(function(p,ye){typeof exports=="object"&&typeof module<"u"?module.exports=ye(require("vue")):typeof define=="function"&&define.amd?define(["vue"],ye):(p=typeof globalThis<"u"?globalThis:p||self,p.LaravelCmsAdminVueComponent=ye(p.Vue))})(this,function(p){"use strict";const ye=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},xy={name:"LaravelCmsAdminMenu"};function ky(n,e,t,r,i,o){const a=p.resolveComponent("router-link");return p.openBlock(),p.createElementBlock("ul",null,[p.createElementVNode("li",null,[p.createVNode(a,{to:"/templates"},{default:p.withCtx(()=>[p.createTextVNode("Templates")]),_:1})]),p.createElementVNode("li",null,[p.createVNode(a,{to:"/pages"},{default:p.withCtx(()=>[p.createTextVNode("Pages")]),_:1})]),p.createElementVNode("li",null,[p.createVNode(a,{to:"/paths"},{default:p.withCtx(()=>[p.createTextVNode("Paths")]),_:1})]),p.createElementVNode("li",null,[p.createVNode(a,{to:"/components"},{default:p.withCtx(()=>[p.createTextVNode("Components")]),_:1})]),p.createElementVNode("li",null,[p.createVNode(a,{to:"/media"},{default:p.withCtx(()=>[p.createTextVNode("Media")]),_:1})])])}const Sy=ye(xy,[["render",ky]]),AB="",Ey={name:"LaravelCmsAdminVueComponent",components:{AdminMenu:Sy}},_y={class:"cms-container"},Cy={class:"cms-menu"},Ty={class:"cms-content"};function Oy(n,e,t,r,i,o){const a=p.resolveComponent("notifications"),c=p.resolveComponent("admin-menu"),u=p.resolveComponent("router-view");return p.openBlock(),p.createElementBlock(p.Fragment,null,[p.createVNode(a),p.createElementVNode("div",_y,[p.createElementVNode("div",Cy,[p.createVNode(c)]),p.createElementVNode("div",Ty,[p.createVNode(u)])])],64)}const Ny=ye(Ey,[["render",Oy]]);function My(){return $u().__VUE_DEVTOOLS_GLOBAL_HOOK__}function $u(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const Ay=typeof Proxy=="function",Dy="devtools-plugin:setup",Ry="plugin:settings:set";let ui,Ua;function Iy(){var n;return ui!==void 0||(typeof window<"u"&&window.performance?(ui=!0,Ua=window.performance):typeof global<"u"&&((n=global.perf_hooks)===null||n===void 0?void 0:n.performance)?(ui=!0,Ua=global.perf_hooks.performance):ui=!1),ui}function Py(){return Iy()?Ua.now():Date.now()}class By{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const r={};if(e.settings)for(const a in e.settings){const c=e.settings[a];r[a]=c.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},r);try{const a=localStorage.getItem(i),c=JSON.parse(a);Object.assign(o,c)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return Py()}},t&&t.on(Ry,(a,c)=>{a===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(a,c)=>this.target?this.target.on[c]:(...u)=>{this.onQueue.push({method:c,args:u})}}),this.proxiedTarget=new Proxy({},{get:(a,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...u)=>(this.targetQueue.push({method:c,args:u,resolve:()=>{}}),this.fallbacks[c](...u)):(...u)=>new Promise(d=>{this.targetQueue.push({method:c,args:u,resolve:d})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function Ly(n,e){const t=n,r=$u(),i=My(),o=Ay&&t.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(Dy,n,e);else{const a=o?new By(t,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Kn=typeof window<"u";function Vy(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Te=Object.assign;function ja(n,e){const t={};for(const r in e){const i=e[r];t[r]=Kt(i)?i.map(n):n(i)}return t}const no=()=>{},Kt=Array.isArray;function ke(n){const e=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+n].concat(e))}const $y=/\/$/,Fy=n=>n.replace($y,"");function Ka(n,e,t="/"){let r,i={},o="",a="";const c=e.indexOf("#");let u=e.indexOf("?");return c<u&&c>=0&&(u=-1),u>-1&&(r=e.slice(0,u),o=e.slice(u+1,c>-1?c:e.length),i=n(o)),c>-1&&(r=r||e.slice(0,c),a=e.slice(c,e.length)),r=Wy(r!=null?r:e,t),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function zy(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Fu(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function zu(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&fr(e.matched[r],t.matched[i])&&Hu(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function fr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Hu(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!Hy(n[t],e[t]))return!1;return!0}function Hy(n,e){return Kt(n)?Wu(n,e):Kt(e)?Wu(e,n):n===e}function Wu(n,e){return Kt(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function Wy(n,e){if(n.startsWith("/"))return n;if(process.env.NODE_ENV!=="production"&&!e.startsWith("/"))return ke(`Cannot resolve a relative location without an absolute path. Trying to resolve "${n}" from "${e}". It should look like "/${e}".`),n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=t.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var ro;(function(n){n.pop="pop",n.push="push"})(ro||(ro={}));var io;(function(n){n.back="back",n.forward="forward",n.unknown=""})(io||(io={}));function Uy(n){if(!n)if(Kn){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Fy(n)}const jy=/^[^#]+#/;function Ky(n,e){return n.replace(jy,"#")+e}function qy(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const as=()=>({left:window.pageXOffset,top:window.pageYOffset});function Jy(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#");if(process.env.NODE_ENV!=="production"&&typeof n.el=="string"&&(!r||!document.getElementById(n.el.slice(1))))try{const o=document.querySelector(n.el);if(r&&o){ke(`The selector "${n.el}" should be passed as "el: document.querySelector('${n.el}')" because it starts with "#".`);return}}catch{ke(`The selector "${n.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i){process.env.NODE_ENV!=="production"&&ke(`Couldn't find element using selector "${n.el}" returned by scrollBehavior.`);return}e=qy(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Uu(n,e){return(history.state?history.state.position-e:-1)+n}const qa=new Map;function Gy(n,e){qa.set(n,e)}function Xy(n){const e=qa.get(n);return qa.delete(n),e}let Yy=()=>location.protocol+"//"+location.host;function ju(n,e){const{pathname:t,search:r,hash:i}=e,o=n.indexOf("#");if(o>-1){let c=i.includes(n.slice(o))?n.slice(o).length:1,u=i.slice(c);return u[0]!=="/"&&(u="/"+u),Fu(u,"")}return Fu(t,n)+r+i}function Zy(n,e,t,r){let i=[],o=[],a=null;const c=({state:y})=>{const b=ju(n,location),w=t.value,E=e.value;let _=0;if(y){if(t.value=b,e.value=y,a&&a===w){a=null;return}_=E?y.position-E.position:0}else r(b);i.forEach(N=>{N(t.value,w,{delta:_,type:ro.pop,direction:_?_>0?io.forward:io.back:io.unknown})})};function u(){a=t.value}function d(y){i.push(y);const b=()=>{const w=i.indexOf(y);w>-1&&i.splice(w,1)};return o.push(b),b}function h(){const{history:y}=window;!y.state||y.replaceState(Te({},y.state,{scroll:as()}),"")}function m(){for(const y of o)y();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:d,destroy:m}}function Ku(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?as():null}}function Qy(n){const{history:e,location:t}=window,r={value:ju(n,t)},i={value:e.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(u,d,h){const m=n.indexOf("#"),y=m>-1?(t.host&&document.querySelector("base")?n:n.slice(m))+u:Yy()+n+u;try{e[h?"replaceState":"pushState"](d,"",y),i.value=d}catch(b){process.env.NODE_ENV!=="production"?ke("Error with push/replace State",b):console.error(b),t[h?"replace":"assign"](y)}}function a(u,d){const h=Te({},e.state,Ku(i.value.back,u,i.value.forward,!0),d,{position:i.value.position});o(u,h,!0),r.value=u}function c(u,d){const h=Te({},i.value,e.state,{forward:u,scroll:as()});process.env.NODE_ENV!=="production"&&!e.state&&ke(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:

history.replaceState(history.state, '', url)

You can find more information at https://next.router.vuejs.org/guide/migration/#usage-of-history-state.`),o(h.current,h,!0);const m=Te({},Ku(r.value,u,null),{position:h.position+1},d);o(u,m,!1),r.value=u}return{location:r,state:i,push:c,replace:a}}function e0(n){n=Uy(n);const e=Qy(n),t=Zy(n,e.state,e.location,e.replace);function r(o,a=!0){a||t.pauseListeners(),history.go(o)}const i=Te({location:"",base:n,go:r,createHref:Ky.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function t0(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),process.env.NODE_ENV!=="production"&&!n.endsWith("#/")&&!n.endsWith("#")&&ke(`A hash base must end with a "#":
"${n}" should be "${n.replace(/#.*$/,"#")}".`),e0(n)}function n0(n){return typeof n=="string"||n&&typeof n=="object"}function qu(n){return typeof n=="string"||typeof n=="symbol"}const dr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ja=Symbol(process.env.NODE_ENV!=="production"?"navigation failure":"");var Ju;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Ju||(Ju={}));const r0={[1]({location:n,currentLocation:e}){return`No match for
 ${JSON.stringify(n)}${e?`
while being at
`+JSON.stringify(e):""}`},[2]({from:n,to:e}){return`Redirected from "${n.fullPath}" to "${o0(e)}" via a navigation guard.`},[4]({from:n,to:e}){return`Navigation aborted from "${n.fullPath}" to "${e.fullPath}" via a navigation guard.`},[8]({from:n,to:e}){return`Navigation cancelled from "${n.fullPath}" to "${e.fullPath}" with a new navigation.`},[16]({from:n,to:e}){return`Avoided redundant navigation to current location: "${n.fullPath}".`}};function fi(n,e){return process.env.NODE_ENV!=="production"?Te(new Error(r0[n](e)),{type:n,[Ja]:!0},e):Te(new Error,{type:n,[Ja]:!0},e)}function qn(n,e){return n instanceof Error&&Ja in n&&(e==null||!!(n.type&e))}const i0=["params","query","hash"];function o0(n){if(typeof n=="string")return n;if("path"in n)return n.path;const e={};for(const t of i0)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}const Gu="[^/]+?",s0={sensitive:!1,strict:!1,start:!0,end:!0},a0=/[.+*?^${}()[\]/\\]/g;function l0(n,e){const t=Te({},s0,e),r=[];let i=t.start?"^":"";const o=[];for(const d of n){const h=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let m=0;m<d.length;m++){const y=d[m];let b=40+(t.sensitive?.25:0);if(y.type===0)m||(i+="/"),i+=y.value.replace(a0,"\\$&"),b+=40;else if(y.type===1){const{value:w,repeatable:E,optional:_,regexp:N}=y;o.push({name:w,repeatable:E,optional:_});const D=N||Gu;if(D!==Gu){b+=10;try{new RegExp(`(${D})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${w}" (${D}): `+C.message)}}let z=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;m||(z=_&&d.length<2?`(?:/${z})`:"/"+z),_&&(z+="?"),i+=z,b+=20,_&&(b+=-8),E&&(b+=-20),D===".*"&&(b+=-50)}h.push(b)}r.push(h)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function c(d){const h=d.match(a),m={};if(!h)return null;for(let y=1;y<h.length;y++){const b=h[y]||"",w=o[y-1];m[w.name]=b&&w.repeatable?b.split("/"):b}return m}function u(d){let h="",m=!1;for(const y of n){(!m||!h.endsWith("/"))&&(h+="/"),m=!1;for(const b of y)if(b.type===0)h+=b.value;else if(b.type===1){const{value:w,repeatable:E,optional:_}=b,N=w in d?d[w]:"";if(Kt(N)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const D=Kt(N)?N.join("/"):N;if(!D)if(_)y.length<2&&(h.endsWith("/")?h=h.slice(0,-1):m=!0);else throw new Error(`Missing required param "${w}"`);h+=D}}return h||"/"}return{re:a,score:r,keys:o,parse:c,stringify:u}}function c0(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function u0(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const o=c0(r[t],i[t]);if(o)return o;t++}if(Math.abs(i.length-r.length)===1){if(Xu(r))return 1;if(Xu(i))return-1}return i.length-r.length}function Xu(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const f0={type:0,value:""},d0=/[a-zA-Z0-9_]/;function p0(n){if(!n)return[[]];if(n==="/")return[[f0]];if(!n.startsWith("/"))throw new Error(process.env.NODE_ENV!=="production"?`Route paths should start with a "/": "${n}" should be "/${n}".`:`Invalid path "${n}"`);function e(b){throw new Error(`ERR (${t})/"${d}": ${b}`)}let t=0,r=t;const i=[];let o;function a(){o&&i.push(o),o=[]}let c=0,u,d="",h="";function m(){!d||(t===0?o.push({type:0,value:d}):t===1||t===2||t===3?(o.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),d="")}function y(){d+=u}for(;c<n.length;){if(u=n[c++],u==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:u==="/"?(d&&m(),a()):u===":"?(m(),t=1):y();break;case 4:y(),t=r;break;case 1:u==="("?t=2:d0.test(u)?y():(m(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&c--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:t=3:h+=u;break;case 3:m(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&c--,h="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${d}"`),m(),a(),i}function h0(n,e,t){const r=l0(p0(n.path),t);if(process.env.NODE_ENV!=="production"){const o=new Set;for(const a of r.keys)o.has(a.name)&&ke(`Found duplicated params with name "${a.name}" for path "${n.path}". Only the last one will be available on "$route.params".`),o.add(a.name)}const i=Te(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function m0(n,e){const t=[],r=new Map;e=Qu({strict:!1,end:!0,sensitive:!1},e);function i(h){return r.get(h)}function o(h,m,y){const b=!y,w=g0(h);process.env.NODE_ENV!=="production"&&w0(w,m),w.aliasOf=y&&y.record;const E=Qu(e,h),_=[w];if("alias"in h){const z=typeof h.alias=="string"?[h.alias]:h.alias;for(const C of z)_.push(Te({},w,{components:y?y.record.components:w.components,path:C,aliasOf:y?y.record:w}))}let N,D;for(const z of _){const{path:C}=z;if(m&&C[0]!=="/"){const j=m.record.path,L=j[j.length-1]==="/"?"":"/";z.path=m.record.path+(C&&L+C)}if(process.env.NODE_ENV!=="production"&&z.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.`);if(N=h0(z,m,E),process.env.NODE_ENV!=="production"&&m&&C[0]==="/"&&x0(N,m),y?(y.alias.push(N),process.env.NODE_ENV!=="production"&&v0(y,N)):(D=D||N,D!==N&&D.alias.push(N),b&&h.name&&!Zu(N)&&a(h.name)),w.children){const j=w.children;for(let L=0;L<j.length;L++)o(j[L],N,y&&y.children[L])}y=y||N,(N.record.components&&Object.keys(N.record.components).length||N.record.name||N.record.redirect)&&u(N)}return D?()=>{a(D)}:no}function a(h){if(qu(h)){const m=r.get(h);m&&(r.delete(h),t.splice(t.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=t.indexOf(h);m>-1&&(t.splice(m,1),h.record.name&&r.delete(h.record.name),h.children.forEach(a),h.alias.forEach(a))}}function c(){return t}function u(h){let m=0;for(;m<t.length&&u0(h,t[m])>=0&&(h.record.path!==t[m].record.path||!ef(h,t[m]));)m++;t.splice(m,0,h),h.record.name&&!Zu(h)&&r.set(h.record.name,h)}function d(h,m){let y,b={},w,E;if("name"in h&&h.name){if(y=r.get(h.name),!y)throw fi(1,{location:h});if(process.env.NODE_ENV!=="production"){const D=Object.keys(h.params||{}).filter(z=>!y.keys.find(C=>C.name===z));D.length&&ke(`Discarded invalid param(s) "${D.join('", "')}" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`)}E=y.record.name,b=Te(Yu(m.params,y.keys.filter(D=>!D.optional).map(D=>D.name)),h.params&&Yu(h.params,y.keys.map(D=>D.name))),w=y.stringify(b)}else if("path"in h)w=h.path,process.env.NODE_ENV!=="production"&&!w.startsWith("/")&&ke(`The Matcher cannot resolve relative paths but received "${w}". Unless you directly called \`matcher.resolve("${w}")\`, this is probably a bug in vue-router. Please open an issue at https://github.com/vuejs/router/issues/new/choose.`),y=t.find(D=>D.re.test(w)),y&&(b=y.parse(w),E=y.record.name);else{if(y=m.name?r.get(m.name):t.find(D=>D.re.test(m.path)),!y)throw fi(1,{location:h,currentLocation:m});E=y.record.name,b=Te({},m.params,h.params),w=y.stringify(b)}const _=[];let N=y;for(;N;)_.unshift(N.record),N=N.parent;return{name:E,path:w,params:b,matched:_,meta:b0(_)}}return n.forEach(h=>o(h)),{addRoute:o,resolve:d,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function Yu(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function g0(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:y0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function y0(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function Zu(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function b0(n){return n.reduce((e,t)=>Te(e,t.meta),{})}function Qu(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function Ga(n,e){return n.name===e.name&&n.optional===e.optional&&n.repeatable===e.repeatable}function v0(n,e){for(const t of n.keys)if(!t.optional&&!e.keys.find(Ga.bind(null,t)))return ke(`Alias "${e.record.path}" and the original record: "${n.record.path}" must have the exact same param named "${t.name}"`);for(const t of e.keys)if(!t.optional&&!n.keys.find(Ga.bind(null,t)))return ke(`Alias "${e.record.path}" and the original record: "${n.record.path}" must have the exact same param named "${t.name}"`)}function w0(n,e){e&&e.record.name&&!n.name&&!n.path&&ke(`The route named "${String(e.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`)}function x0(n,e){for(const t of e.keys)if(!n.keys.find(Ga.bind(null,t)))return ke(`Absolute path "${n.record.path}" must have the exact same param named "${t.name}" as its parent "${e.record.path}".`)}function ef(n,e){return e.children.some(t=>t===n||ef(n,t))}const tf=/#/g,k0=/&/g,S0=/\//g,E0=/=/g,_0=/\?/g,nf=/\+/g,C0=/%5B/g,T0=/%5D/g,rf=/%5E/g,O0=/%60/g,of=/%7B/g,N0=/%7C/g,sf=/%7D/g,M0=/%20/g;function Xa(n){return encodeURI(""+n).replace(N0,"|").replace(C0,"[").replace(T0,"]")}function A0(n){return Xa(n).replace(of,"{").replace(sf,"}").replace(rf,"^")}function Ya(n){return Xa(n).replace(nf,"%2B").replace(M0,"+").replace(tf,"%23").replace(k0,"%26").replace(O0,"`").replace(of,"{").replace(sf,"}").replace(rf,"^")}function D0(n){return Ya(n).replace(E0,"%3D")}function R0(n){return Xa(n).replace(tf,"%23").replace(_0,"%3F")}function I0(n){return n==null?"":R0(n).replace(S0,"%2F")}function oo(n){try{return decodeURIComponent(""+n)}catch{process.env.NODE_ENV!=="production"&&ke(`Error decoding "${n}". Using original value`)}return""+n}function P0(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(nf," "),a=o.indexOf("="),c=oo(a<0?o:o.slice(0,a)),u=a<0?null:oo(o.slice(a+1));if(c in e){let d=e[c];Kt(d)||(d=e[c]=[d]),d.push(u)}else e[c]=u}return e}function af(n){let e="";for(let t in n){const r=n[t];if(t=D0(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Kt(r)?r.map(o=>o&&Ya(o)):[r&&Ya(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+t,o!=null&&(e+="="+o))})}return e}function B0(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Kt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const L0=Symbol(process.env.NODE_ENV!=="production"?"router view location matched":""),lf=Symbol(process.env.NODE_ENV!=="production"?"router view depth":""),ls=Symbol(process.env.NODE_ENV!=="production"?"router":""),cf=Symbol(process.env.NODE_ENV!=="production"?"route location":""),Za=Symbol(process.env.NODE_ENV!=="production"?"router view location":"");function so(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function pr(n,e,t,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const u=m=>{m===!1?c(fi(4,{from:t,to:e})):m instanceof Error?c(m):n0(m)?c(fi(2,{from:e,to:m})):(o&&r.enterCallbacks[i]===o&&typeof m=="function"&&o.push(m),a())},d=n.call(r&&r.instances[i],e,t,process.env.NODE_ENV!=="production"?V0(u,e,t):u);let h=Promise.resolve(d);if(n.length<3&&(h=h.then(u)),process.env.NODE_ENV!=="production"&&n.length>2){const m=`The "next" callback was never called inside of ${n.name?'"'+n.name+'"':""}:
${n.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof d=="object"&&"then"in d)h=h.then(y=>u._called?y:(ke(m),Promise.reject(new Error("Invalid navigation guard"))));else if(d!==void 0&&!u._called){ke(m),c(new Error("Invalid navigation guard"));return}}h.catch(m=>c(m))})}function V0(n,e,t){let r=0;return function(){r++===1&&ke(`The "next" callback was called more than once in one navigation guard when going from "${t.fullPath}" to "${e.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),n._called=!0,r===1&&n.apply(null,arguments)}}function Qa(n,e,t,r){const i=[];for(const o of n){process.env.NODE_ENV!=="production"&&!o.components&&!o.children.length&&ke(`Record with path "${o.path}" is either missing a "component(s)" or "children" property.`);for(const a in o.components){let c=o.components[a];if(process.env.NODE_ENV!=="production"){if(!c||typeof c!="object"&&typeof c!="function")throw ke(`Component "${a}" in record with path "${o.path}" is not a valid component. Received "${String(c)}".`),new Error("Invalid route component");if("then"in c){ke(`Component "${a}" in record with path "${o.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const u=c;c=()=>u}else c.__asyncLoader&&!c.__warnedDefineAsync&&(c.__warnedDefineAsync=!0,ke(`Component "${a}" in record with path "${o.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if($0(c)){const d=(c.__vccOpts||c)[e];d&&i.push(pr(d,t,r,o,a))}else{let u=c();process.env.NODE_ENV!=="production"&&!("catch"in u)&&(ke(`Component "${a}" in record with path "${o.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),u=Promise.resolve(u)),i.push(()=>u.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Vy(d)?d.default:d;o.components[a]=h;const y=(h.__vccOpts||h)[e];return y&&pr(y,t,r,o,a)()}))}}}return i}function $0(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function uf(n){const e=p.inject(ls),t=p.inject(cf),r=p.computed(()=>e.resolve(p.unref(n.to))),i=p.computed(()=>{const{matched:u}=r.value,{length:d}=u,h=u[d-1],m=t.matched;if(!h||!m.length)return-1;const y=m.findIndex(fr.bind(null,h));if(y>-1)return y;const b=ff(u[d-2]);return d>1&&ff(h)===b&&m[m.length-1].path!==b?m.findIndex(fr.bind(null,u[d-2])):y}),o=p.computed(()=>i.value>-1&&H0(t.params,r.value.params)),a=p.computed(()=>i.value>-1&&i.value===t.matched.length-1&&Hu(t.params,r.value.params));function c(u={}){return z0(u)?e[p.unref(n.replace)?"replace":"push"](p.unref(n.to)).catch(no):Promise.resolve()}if((process.env.NODE_ENV!=="production"||!1)&&Kn){const u=p.getCurrentInstance();if(u){const d={route:r.value,isActive:o.value,isExactActive:a.value};u.__vrl_devtools=u.__vrl_devtools||[],u.__vrl_devtools.push(d),p.watchEffect(()=>{d.route=r.value,d.isActive=o.value,d.isExactActive=a.value},{flush:"post"})}}return{route:r,href:p.computed(()=>r.value.href),isActive:o,isExactActive:a,navigate:c}}const F0=p.defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:uf,setup(n,{slots:e}){const t=p.reactive(uf(n)),{options:r}=p.inject(ls),i=p.computed(()=>({[df(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[df(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&e.default(t);return n.custom?o:p.h("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},o)}}});function z0(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function H0(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Kt(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function ff(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const df=(n,e,t)=>n!=null?n:e!=null?e:t,W0=p.defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){process.env.NODE_ENV!=="production"&&j0();const r=p.inject(Za),i=p.computed(()=>n.route||r.value),o=p.inject(lf,0),a=p.computed(()=>{let d=p.unref(o);const{matched:h}=i.value;let m;for(;(m=h[d])&&!m.components;)d++;return d}),c=p.computed(()=>i.value.matched[a.value]);p.provide(lf,p.computed(()=>a.value+1)),p.provide(L0,c),p.provide(Za,i);const u=p.ref();return p.watch(()=>[u.value,c.value,n.name],([d,h,m],[y,b,w])=>{h&&(h.instances[m]=d,b&&b!==h&&d&&d===y&&(h.leaveGuards.size||(h.leaveGuards=b.leaveGuards),h.updateGuards.size||(h.updateGuards=b.updateGuards))),d&&h&&(!b||!fr(h,b)||!y)&&(h.enterCallbacks[m]||[]).forEach(E=>E(d))},{flush:"post"}),()=>{const d=i.value,h=n.name,m=c.value,y=m&&m.components[h];if(!y)return pf(t.default,{Component:y,route:d});const b=m.props[h],w=b?b===!0?d.params:typeof b=="function"?b(d):b:null,E=N=>{N.component.isUnmounted&&(m.instances[h]=null)},_=p.h(y,Te({},w,e,{onVnodeUnmounted:E,ref:u}));if((process.env.NODE_ENV!=="production"||!1)&&Kn&&_.ref){const N={depth:a.value,name:m.name,path:m.path,meta:m.meta};(Kt(_.ref)?_.ref.map(z=>z.i):[_.ref.i]).forEach(z=>{z.__vrv_devtools=N})}return pf(t.default,{Component:_,route:d})||_}}});function pf(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const U0=W0;function j0(){const n=p.getCurrentInstance(),e=n.parent&&n.parent.type.name,t=n.parent&&n.parent.subTree&&n.parent.subTree.type;if(e&&(e==="KeepAlive"||e.includes("Transition"))&&typeof t=="object"&&t.name==="RouterView"){const r=e==="KeepAlive"?"keep-alive":"transition";ke(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${r}>
    <component :is="Component" />
  </${r}>
</router-view>`)}}function ao(n,e){const t=Te({},n,{matched:n.matched.map(r=>eb(r,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:n.fullPath,tooltip:e,value:t}}}function cs(n){return{_custom:{display:n}}}let K0=0;function q0(n,e,t){if(e.__hasDevtools)return;e.__hasDevtools=!0;const r=K0++;Ly({id:"org.vuejs.router"+(r?"."+r:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:n},i=>{typeof i.now!="function"&&console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),i.on.inspectComponent((h,m)=>{h.instanceData&&h.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:ao(e.currentRoute.value,"Current Route")})}),i.on.visitComponentTree(({treeNode:h,componentInstance:m})=>{if(m.__vrv_devtools){const y=m.__vrv_devtools;h.tags.push({label:(y.name?`${y.name.toString()}: `:"")+y.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:hf})}Kt(m.__vrl_devtools)&&(m.__devtoolsApi=i,m.__vrl_devtools.forEach(y=>{let b=yf,w="";y.isExactActive?(b=gf,w="This is exactly active"):y.isActive&&(b=mf,w="This link is active"),h.tags.push({label:y.route.path,textColor:0,tooltip:w,backgroundColor:b})}))}),p.watch(e.currentRoute,()=>{u(),i.notifyComponentUpdate(),i.sendInspectorTree(c),i.sendInspectorState(c)});const o="router:navigations:"+r;i.addTimelineLayer({id:o,label:`Router${r?" "+r:""} Navigations`,color:4237508}),e.onError((h,m)=>{i.addTimelineEvent({layerId:o,event:{title:"Error during Navigation",subtitle:m.fullPath,logType:"error",time:i.now(),data:{error:h},groupId:m.meta.__navigationId}})});let a=0;e.beforeEach((h,m)=>{const y={guard:cs("beforeEach"),from:ao(m,"Current Location during this navigation"),to:ao(h,"Target location")};Object.defineProperty(h.meta,"__navigationId",{value:a++}),i.addTimelineEvent({layerId:o,event:{time:i.now(),title:"Start of navigation",subtitle:h.fullPath,data:y,groupId:h.meta.__navigationId}})}),e.afterEach((h,m,y)=>{const b={guard:cs("afterEach")};y?(b.failure={_custom:{type:Error,readOnly:!0,display:y?y.message:"",tooltip:"Navigation Failure",value:y}},b.status=cs("\u274C")):b.status=cs("\u2705"),b.from=ao(m,"Current Location during this navigation"),b.to=ao(h,"Target location"),i.addTimelineEvent({layerId:o,event:{title:"End of navigation",subtitle:h.fullPath,time:i.now(),data:b,logType:y?"warning":"default",groupId:h.meta.__navigationId}})});const c="router-inspector:"+r;i.addInspector({id:c,label:"Routes"+(r?" "+r:""),icon:"book",treeFilterPlaceholder:"Search routes"});function u(){if(!d)return;const h=d;let m=t.getRoutes().filter(y=>!y.parent||!y.parent.record.components);m.forEach(wf),h.filter&&(m=m.filter(y=>el(y,h.filter.toLowerCase()))),m.forEach(y=>vf(y,e.currentRoute.value)),h.rootNodes=m.map(bf)}let d;i.on.getInspectorTree(h=>{d=h,h.app===n&&h.inspectorId===c&&u()}),i.on.getInspectorState(h=>{if(h.app===n&&h.inspectorId===c){const y=t.getRoutes().find(b=>b.record.__vd_id===h.nodeId);y&&(h.state={options:G0(y)})}}),i.sendInspectorTree(c),i.sendInspectorState(c)})}function J0(n){return n.optional?n.repeatable?"*":"?":n.repeatable?"+":""}function G0(n){const{record:e}=n,t=[{editable:!1,key:"path",value:e.path}];return e.name!=null&&t.push({editable:!1,key:"name",value:e.name}),t.push({editable:!1,key:"regexp",value:n.re}),n.keys.length&&t.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:n.keys.map(r=>`${r.name}${J0(r)}`).join(" "),tooltip:"Param keys",value:n.keys}}}),e.redirect!=null&&t.push({editable:!1,key:"redirect",value:e.redirect}),n.alias.length&&t.push({editable:!1,key:"aliases",value:n.alias.map(r=>r.record.path)}),Object.keys(n.record.meta).length&&t.push({editable:!1,key:"meta",value:n.record.meta}),t.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:n.score.map(r=>r.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:n.score}}}),t}const hf=15485081,mf=2450411,gf=8702998,X0=2282478,yf=16486972,Y0=6710886;function bf(n){const e=[],{record:t}=n;t.name!=null&&e.push({label:String(t.name),textColor:0,backgroundColor:X0}),t.aliasOf&&e.push({label:"alias",textColor:0,backgroundColor:yf}),n.__vd_match&&e.push({label:"matches",textColor:0,backgroundColor:hf}),n.__vd_exactActive&&e.push({label:"exact",textColor:0,backgroundColor:gf}),n.__vd_active&&e.push({label:"active",textColor:0,backgroundColor:mf}),t.redirect&&e.push({label:typeof t.redirect=="string"?`redirect: ${t.redirect}`:"redirects",textColor:16777215,backgroundColor:Y0});let r=t.__vd_id;return r==null&&(r=String(Z0++),t.__vd_id=r),{id:r,label:t.path,tags:e,children:n.children.map(bf)}}let Z0=0;const Q0=/^\/(.*)\/([a-z]*)$/;function vf(n,e){const t=e.matched.length&&fr(e.matched[e.matched.length-1],n.record);n.__vd_exactActive=n.__vd_active=t,t||(n.__vd_active=e.matched.some(r=>fr(r,n.record))),n.children.forEach(r=>vf(r,e))}function wf(n){n.__vd_match=!1,n.children.forEach(wf)}function el(n,e){const t=String(n.re).match(Q0);if(n.__vd_match=!1,!t||t.length<3)return!1;if(new RegExp(t[1].replace(/\$$/,""),t[2]).test(e))return n.children.forEach(a=>el(a,e)),n.record.path!=="/"||e==="/"?(n.__vd_match=n.re.test(e),!0):!1;const i=n.record.path.toLowerCase(),o=oo(i);return!e.startsWith("/")&&(o.includes(e)||i.includes(e))||o.startsWith(e)||i.startsWith(e)||n.record.name&&String(n.record.name).includes(e)?!0:n.children.some(a=>el(a,e))}function eb(n,e){const t={};for(const r in n)e.includes(r)||(t[r]=n[r]);return t}function tb(n){const e=m0(n.routes,n),t=n.parseQuery||P0,r=n.stringifyQuery||af,i=n.history;if(process.env.NODE_ENV!=="production"&&!i)throw new Error('Provide the "history" option when calling "createRouter()": https://next.router.vuejs.org/api/#history.');const o=so(),a=so(),c=so(),u=p.shallowRef(dr);let d=dr;Kn&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=ja.bind(null,R=>""+R),m=ja.bind(null,I0),y=ja.bind(null,oo);function b(R,H){let W,q;return qu(R)?(W=e.getRecordMatcher(R),q=H):q=R,e.addRoute(q,W)}function w(R){const H=e.getRecordMatcher(R);H?e.removeRoute(H):process.env.NODE_ENV!=="production"&&ke(`Cannot remove non-existent route "${String(R)}"`)}function E(){return e.getRoutes().map(R=>R.record)}function _(R){return!!e.getRecordMatcher(R)}function N(R,H){if(H=Te({},H||u.value),typeof R=="string"){const ee=Ka(t,R,H.path),_e=e.resolve({path:ee.path},H),At=i.createHref(ee.fullPath);return process.env.NODE_ENV!=="production"&&(At.startsWith("//")?ke(`Location "${R}" resolved to "${At}". A resolved location cannot start with multiple slashes.`):_e.matched.length||ke(`No match found for location with path "${R}"`)),Te(ee,_e,{params:y(_e.params),hash:oo(ee.hash),redirectedFrom:void 0,href:At})}let W;if("path"in R)process.env.NODE_ENV!=="production"&&"params"in R&&!("name"in R)&&Object.keys(R.params).length&&ke(`Path "${R.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),W=Te({},R,{path:Ka(t,R.path,H.path).path});else{const ee=Te({},R.params);for(const _e in ee)ee[_e]==null&&delete ee[_e];W=Te({},R,{params:m(ee)}),H.params=m(H.params)}const q=e.resolve(W,H),le=R.hash||"";process.env.NODE_ENV!=="production"&&le&&!le.startsWith("#")&&ke(`A \`hash\` should always start with the character "#". Replace "${le}" with "#${le}".`),q.params=h(y(q.params));const Re=zy(r,Te({},R,{hash:A0(le),path:q.path})),se=i.createHref(Re);return process.env.NODE_ENV!=="production"&&(se.startsWith("//")?ke(`Location "${R}" resolved to "${se}". A resolved location cannot start with multiple slashes.`):q.matched.length||ke(`No match found for location with path "${"path"in R?R.path:R}"`)),Te({fullPath:Re,hash:le,query:r===af?B0(R.query):R.query||{}},q,{redirectedFrom:void 0,href:se})}function D(R){return typeof R=="string"?Ka(t,R,u.value.path):Te({},R)}function z(R,H){if(d!==R)return fi(8,{from:H,to:R})}function C(R){return Q(R)}function j(R){return C(Te(D(R),{replace:!0}))}function L(R){const H=R.matched[R.matched.length-1];if(H&&H.redirect){const{redirect:W}=H;let q=typeof W=="function"?W(R):W;if(typeof q=="string"&&(q=q.includes("?")||q.includes("#")?q=D(q):{path:q},q.params={}),process.env.NODE_ENV!=="production"&&!("path"in q)&&!("name"in q))throw ke(`Invalid redirect found:
${JSON.stringify(q,null,2)}
 when navigating to "${R.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return Te({query:R.query,hash:R.hash,params:"path"in q?{}:R.params},q)}}function Q(R,H){const W=d=N(R),q=u.value,le=R.state,Re=R.force,se=R.replace===!0,ee=L(W);if(ee)return Q(Te(D(ee),{state:typeof ee=="object"?Te({},le,ee.state):le,force:Re,replace:se}),H||W);const _e=W;_e.redirectedFrom=H;let At;return!Re&&zu(r,q,W)&&(At=fi(16,{to:_e,from:q}),qe(q,q,!0,!1)),(At?Promise.resolve(At):we(_e,q)).catch(Me=>qn(Me)?qn(Me,2)?Me:rt(Me):De(Me,_e,q)).then(Me=>{if(Me){if(qn(Me,2))return process.env.NODE_ENV!=="production"&&zu(r,N(Me.to),_e)&&H&&(H._count=H._count?H._count+1:1)>30?(ke(`Detected a possibly infinite redirection in a navigation guard when going from "${q.fullPath}" to "${_e.fullPath}". Aborting to avoid a Stack Overflow.
 Are you always returning a new location within a navigation guard? That would lead to this error. Only return when redirecting or aborting, that should fix this. This might break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):Q(Te({replace:se},D(Me.to),{state:typeof Me.to=="object"?Te({},le,Me.to.state):le,force:Re}),H||_e)}else Me=Be(_e,q,!0,se,le);return Pe(_e,q,Me),Me})}function ve(R,H){const W=z(R,H);return W?Promise.reject(W):Promise.resolve()}function Y(R){const H=kt.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(R):R()}function we(R,H){let W;const[q,le,Re]=nb(R,H);W=Qa(q.reverse(),"beforeRouteLeave",R,H);for(const ee of q)ee.leaveGuards.forEach(_e=>{W.push(pr(_e,R,H))});const se=ve.bind(null,R,H);return W.push(se),Ge(W).then(()=>{W=[];for(const ee of o.list())W.push(pr(ee,R,H));return W.push(se),Ge(W)}).then(()=>{W=Qa(le,"beforeRouteUpdate",R,H);for(const ee of le)ee.updateGuards.forEach(_e=>{W.push(pr(_e,R,H))});return W.push(se),Ge(W)}).then(()=>{W=[];for(const ee of Re)if(ee.beforeEnter)if(Kt(ee.beforeEnter))for(const _e of ee.beforeEnter)W.push(pr(_e,R,H));else W.push(pr(ee.beforeEnter,R,H));return W.push(se),Ge(W)}).then(()=>(R.matched.forEach(ee=>ee.enterCallbacks={}),W=Qa(Re,"beforeRouteEnter",R,H),W.push(se),Ge(W))).then(()=>{W=[];for(const ee of a.list())W.push(pr(ee,R,H));return W.push(se),Ge(W)}).catch(ee=>qn(ee,8)?ee:Promise.reject(ee))}function Pe(R,H,W){c.list().forEach(q=>Y(()=>q(R,H,W)))}function Be(R,H,W,q,le){const Re=z(R,H);if(Re)return Re;const se=H===dr,ee=Kn?history.state:{};W&&(q||se?i.replace(R.fullPath,Te({scroll:se&&ee&&ee.scroll},le)):i.push(R.fullPath,le)),u.value=R,qe(R,H,W,se),rt()}let Ne;function ct(){Ne||(Ne=i.listen((R,H,W)=>{if(!Je.listening)return;const q=N(R),le=L(q);if(le){Q(Te(le,{replace:!0}),q).catch(no);return}d=q;const Re=u.value;Kn&&Gy(Uu(Re.fullPath,W.delta),as()),we(q,Re).catch(se=>qn(se,12)?se:qn(se,2)?(Q(se.to,q).then(ee=>{qn(ee,20)&&!W.delta&&W.type===ro.pop&&i.go(-1,!1)}).catch(no),Promise.reject()):(W.delta&&i.go(-W.delta,!1),De(se,q,Re))).then(se=>{se=se||Be(q,Re,!1),se&&(W.delta&&!qn(se,8)?i.go(-W.delta,!1):W.type===ro.pop&&qn(se,20)&&i.go(-1,!1)),Pe(q,Re,se)}).catch(no)}))}let nt=so(),Ke=so(),Le;function De(R,H,W){rt(R);const q=Ke.list();return q.length?q.forEach(le=>le(R,H,W)):(process.env.NODE_ENV!=="production"&&ke("uncaught error during route navigation:"),console.error(R)),Promise.reject(R)}function Ft(){return Le&&u.value!==dr?Promise.resolve():new Promise((R,H)=>{nt.add([R,H])})}function rt(R){return Le||(Le=!R,ct(),nt.list().forEach(([H,W])=>R?W(R):H()),nt.reset()),R}function qe(R,H,W,q){const{scrollBehavior:le}=n;if(!Kn||!le)return Promise.resolve();const Re=!W&&Xy(Uu(R.fullPath,0))||(q||!W)&&history.state&&history.state.scroll||null;return p.nextTick().then(()=>le(R,H,Re)).then(se=>se&&Jy(se)).catch(se=>De(se,R,H))}const xt=R=>i.go(R);let Xt;const kt=new Set,Je={currentRoute:u,listening:!0,addRoute:b,removeRoute:w,hasRoute:_,getRoutes:E,resolve:N,options:n,push:C,replace:j,go:xt,back:()=>xt(-1),forward:()=>xt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:c.add,onError:Ke.add,isReady:Ft,install(R){const H=this;R.component("RouterLink",F0),R.component("RouterView",U0),R.config.globalProperties.$router=H,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>p.unref(u)}),Kn&&!Xt&&u.value===dr&&(Xt=!0,C(i.location).catch(le=>{process.env.NODE_ENV!=="production"&&ke("Unexpected error when starting the router:",le)}));const W={};for(const le in dr)Object.defineProperty(W,le,{get:()=>u.value[le],enumerable:!0});R.provide(ls,H),R.provide(cf,p.shallowReactive(W)),R.provide(Za,u);const q=R.unmount;kt.add(R),R.unmount=function(){kt.delete(R),kt.size<1&&(d=dr,Ne&&Ne(),Ne=null,u.value=dr,Xt=!1,Le=!1),q()},(process.env.NODE_ENV!=="production"||!1)&&Kn&&q0(R,H,e)}};function Ge(R){return R.reduce((H,W)=>H.then(()=>Y(W)),Promise.resolve())}return Je}function nb(n,e){const t=[],r=[],i=[],o=Math.max(e.matched.length,n.matched.length);for(let a=0;a<o;a++){const c=e.matched[a];c&&(n.matched.find(d=>fr(d,c))?r.push(c):t.push(c));const u=n.matched[a];u&&(e.matched.find(d=>fr(d,u))||i.push(u))}return[t,r,i]}function xf(){return p.inject(ls)}function rb(n){return{all:n=n||new Map,on:function(e,t){var r=n.get(e);r?r.push(t):n.set(e,[t])},off:function(e,t){var r=n.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var r=n.get(e);r&&r.slice().map(function(i){i(t)}),(r=n.get("*"))&&r.slice().map(function(i){i(e,t)})}}}const us=rb(),kf=new Map,Sf={x:["left","center","right"],y:["top","bottom"]},ib=(n=>()=>n++)(0),ob=n=>typeof n!="string"?[]:n.split(/\s+/gi).filter(e=>e),sb=n=>{typeof n=="string"&&(n=ob(n));let e=null,t=null;return n.forEach(r=>{Sf.y.indexOf(r)!==-1&&(t=r),Sf.x.indexOf(r)!==-1&&(e=r)}),{x:e,y:t}};class ab{constructor(e,t,r){this.remaining=t,this.callback=e,this.notifyItem=r,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}}const tl={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:n=>({height:[n.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},lb=p.defineComponent({name:"velocity-group",emits:["after-leave","leave","enter"],methods:{enter(n,e){this.$emit("enter",n,e)},leave(n,e){this.$emit("leave",n,e)},afterLeave(){this.$emit("after-leave")}}}),nl=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t};function cb(n,e,t,r,i,o){return p.openBlock(),p.createBlock(p.TransitionGroup,{tag:"span",css:!1,onEnter:n.enter,onLeave:n.leave,onAfterLeave:n.afterLeave},{default:p.withCtx(()=>[p.renderSlot(n.$slots,"default")]),_:3},8,["onEnter","onLeave","onAfterLeave"])}const ub=nl(lb,[["render",cb]]),fb=p.defineComponent({name:"css-group",inheritAttrs:!1,props:{name:{type:String,required:!0}}});function db(n,e,t,r,i,o){return p.openBlock(),p.createBlock(p.TransitionGroup,{tag:"span",name:n.name},{default:p.withCtx(()=>[p.renderSlot(n.$slots,"default")]),_:3},8,["name"])}const pb=nl(fb,[["render",db]]),rl="[-+]?[0-9]*.?[0-9]+",Ef=[{name:"px",regexp:new RegExp(`^${rl}px$`)},{name:"%",regexp:new RegExp(`^${rl}%$`)},{name:"px",regexp:new RegExp(`^${rl}$`)}],hb=n=>{if(n==="auto")return{type:n,value:0};for(let e=0;e<Ef.length;e++){const t=Ef[e];if(t.regexp.test(n))return{type:t.name,value:parseFloat(n)}}return{type:"",value:n}},mb=n=>{switch(typeof n){case"number":return{type:"px",value:n};case"string":return hb(n);default:return{type:"",value:n}}},fs={IDLE:0,DESTROYED:2},gb=p.defineComponent({name:"notifications",components:{VelocityGroup:ub,CssGroup:pb},props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:tl.position},classes:{type:String,default:"vue-notification"},animationType:{type:String,default:"css"},animation:{type:Object,default:tl.velocityAnimation},animationName:{type:String,default:tl.cssAnimation},speed:{type:Number,default:300},cooldown:{type:Number,default:0},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1}},emits:["click","destroy","start"],data(){return{list:[],velocity:kf.get("velocity"),timerControl:null}},computed:{actualWidth(){return mb(this.width)},isVA(){return this.animationType==="velocity"},componentName(){return this.isVA?"velocity-group":"css-group"},styles(){const{x:n,y:e}=sb(this.position),t=this.actualWidth.value,r=this.actualWidth.type,i={width:t+r};return e&&(i[e]="0px"),n&&(n==="center"?i.left=`calc(50% - ${+t/2}${r})`:i[n]="0px"),i},active(){return this.list.filter(n=>n.state!==fs.DESTROYED)},botToTop(){return this.styles.hasOwnProperty("bottom")}},mounted(){us.on("add",this.addItem),us.on("close",this.closeItem)},methods:{destroyIfNecessary(n){this.$emit("click",n),this.closeOnClick&&this.destroy(n)},pauseTimeout(){var n;this.pauseOnHover&&((n=this.timerControl)==null||n.pause())},resumeTimeout(){var n;this.pauseOnHover&&((n=this.timerControl)==null||n.resume())},addItem(n={}){if(n.group||(n.group=""),n.data||(n.data={}),this.group!==n.group)return;if(n.clean||n.clear){this.destroyAll();return}const e=typeof n.duration=="number"?n.duration:this.duration,t=typeof n.speed=="number"?n.speed:this.speed,r=typeof n.ignoreDuplicates=="boolean"?n.ignoreDuplicates:this.ignoreDuplicates,{title:i,text:o,type:a,data:c,id:u}=n,d={id:u||ib(),title:i,text:o,type:a,state:fs.IDLE,speed:t,length:e+2*t,data:c};e>=0&&(this.timerControl=new ab(()=>this.destroy(d),d.length,d));const h=this.reverse?!this.botToTop:this.botToTop;let m=-1;const y=this.active.some(b=>b.title===n.title&&b.text===n.text);(!r||!y)&&(h?(this.list.push(d),this.$emit("start",d),this.active.length>this.max&&(m=0)):(this.list.unshift(d),this.$emit("start",d),this.active.length>this.max&&(m=this.active.length-1)),m!==-1&&this.destroy(this.active[m]))},closeItem(n){this.destroyById(n)},notifyClass(n){return["vue-notification-template",this.classes,n.type||""]},notifyWrapperStyle(n){return this.isVA?void 0:{transition:`all ${n.speed}ms`}},destroy(n){clearTimeout(n.timer),n.state=fs.DESTROYED,this.clean(),this.$emit("destroy",n)},destroyById(n){const e=this.list.find(t=>t.id===n);e&&this.destroy(e)},destroyAll(){this.active.forEach(this.destroy)},getAnimation(n,e){var t;const r=(t=this.animation)==null?void 0:t[n];return typeof r=="function"?r.call(this,e):r},enter(n,e){if(!this.isVA)return;const t=this.getAnimation("enter",n);this.velocity(n,t,{duration:this.speed,complete:e})},leave(n,e){if(!this.isVA)return;const t=this.getAnimation("leave",n);this.velocity(n,t,{duration:this.speed,complete:e})},clean(){this.list=this.list.filter(n=>n.state!==fs.DESTROYED)}}}),yb=["data-id"],bb=["onClick"],vb=["innerHTML"],wb=["innerHTML"];function xb(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("div",{class:"vue-notification-group",style:p.normalizeStyle(n.styles)},[(p.openBlock(),p.createBlock(p.resolveDynamicComponent(n.componentName),{name:n.animationName,onEnter:n.enter,onLeave:n.leave,onAfterLeave:n.clean},{default:p.withCtx(()=>[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(n.active,a=>(p.openBlock(),p.createElementBlock("div",{key:a.id,class:"vue-notification-wrapper",style:p.normalizeStyle(n.notifyWrapperStyle(a)),"data-id":a.id,onMouseenter:e[0]||(e[0]=(...c)=>n.pauseTimeout&&n.pauseTimeout(...c)),onMouseleave:e[1]||(e[1]=(...c)=>n.resumeTimeout&&n.resumeTimeout(...c))},[p.renderSlot(n.$slots,"body",{class:p.normalizeClass([n.classes,a.type]),item:a,close:()=>n.destroy(a)},()=>[p.createElementVNode("div",{class:p.normalizeClass(n.notifyClass(a)),onClick:c=>n.destroyIfNecessary(a)},[a.title?(p.openBlock(),p.createElementBlock("div",{key:0,class:"notification-title",innerHTML:a.title},null,8,vb)):p.createCommentVNode("",!0),p.createElementVNode("div",{class:"notification-content",innerHTML:a.text},null,8,wb)],10,bb)])],44,yb))),128))]),_:3},40,["name","onEnter","onLeave","onAfterLeave"]))],4)}const kb=nl(gb,[["render",xb]]),ue=n=>{typeof n=="string"&&(n={title:"",text:n}),typeof n=="object"&&us.emit("add",n)};ue.close=n=>{us.emit("close",n)};function Sb(n,e={}){Object.entries(e).forEach(r=>kf.set(...r));const t=e.name||"notify";n.config.globalProperties["$"+t]=ue,n.component(e.componentName||"Notifications",kb)}const Eb={install:Sb};(function(){var n;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(n=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:n.content,e.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_t={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",m=1,y=2,b=4,w=1,E=2,_=1,N=2,D=4,z=8,C=16,j=32,L=64,Q=128,ve=256,Y=512,we=30,Pe="...",Be=800,Ne=16,ct=1,nt=2,Ke=3,Le=1/0,De=9007199254740991,Ft=17976931348623157e292,rt=0/0,qe=4294967295,xt=qe-1,Xt=qe>>>1,kt=[["ary",Q],["bind",_],["bindKey",N],["curry",z],["curryRight",C],["flip",Y],["partial",j],["partialRight",L],["rearg",ve]],Je="[object Arguments]",Ge="[object Array]",R="[object AsyncFunction]",H="[object Boolean]",W="[object Date]",q="[object DOMException]",le="[object Error]",Re="[object Function]",se="[object GeneratorFunction]",ee="[object Map]",_e="[object Number]",At="[object Null]",Me="[object Object]",Qr="[object Promise]",Vi="[object Proxy]",Dt="[object RegExp]",Qe="[object Set]",Sn="[object String]",un="[object Symbol]",ei="[object Undefined]",zn="[object WeakMap]",$i="[object WeakSet]",Hn="[object ArrayBuffer]",En="[object DataView]",Lo="[object Float32Array]",Vo="[object Float64Array]",$o="[object Int8Array]",Fo="[object Int16Array]",zo="[object Int32Array]",I="[object Uint8Array]",G="[object Uint8ClampedArray]",ne="[object Uint16Array]",Ce="[object Uint32Array]",Se=/\b__p \+= '';/g,ht=/\b(__p \+=) '' \+/g,zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,er=/&(?:amp|lt|gt|quot|#39);/g,Ho=/[&<>"']/g,tr=RegExp(er.source),Wo=RegExp(Ho.source),Fi=/<%-([\s\S]+?)%>/g,Mr=/<%([\s\S]+?)%>/g,ta=/<%=([\s\S]+?)%>/g,Uo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zi=/^\w*$/,aN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tc=/[\\^$.*+?()[\]{}|]/g,lN=RegExp(Tc.source),Oc=/^\s+/,cN=/\s/,uN=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fN=/\{\n\/\* \[wrapped with (.+)\] \*/,dN=/,? & /,pN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hN=/[()=,{}\[\]\/\s]/,mN=/\\(\\)?/g,gN=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gh=/\w*$/,yN=/^[-+]0x[0-9a-f]+$/i,bN=/^0b[01]+$/i,vN=/^\[object .+?Constructor\]$/,wN=/^0o[0-7]+$/i,xN=/^(?:0|[1-9]\d*)$/,kN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,na=/($^)/,SN=/['\n\r\u2028\u2029\\]/g,ra="\\ud800-\\udfff",EN="\\u0300-\\u036f",_N="\\ufe20-\\ufe2f",CN="\\u20d0-\\u20ff",Xh=EN+_N+CN,Yh="\\u2700-\\u27bf",Zh="a-z\\xdf-\\xf6\\xf8-\\xff",TN="\\xac\\xb1\\xd7\\xf7",ON="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",NN="\\u2000-\\u206f",MN=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qh="A-Z\\xc0-\\xd6\\xd8-\\xde",em="\\ufe0e\\ufe0f",tm=TN+ON+NN+MN,Nc="['\u2019]",AN="["+ra+"]",nm="["+tm+"]",ia="["+Xh+"]",rm="\\d+",DN="["+Yh+"]",im="["+Zh+"]",om="[^"+ra+tm+rm+Yh+Zh+Qh+"]",Mc="\\ud83c[\\udffb-\\udfff]",RN="(?:"+ia+"|"+Mc+")",sm="[^"+ra+"]",Ac="(?:\\ud83c[\\udde6-\\uddff]){2}",Dc="[\\ud800-\\udbff][\\udc00-\\udfff]",Hi="["+Qh+"]",am="\\u200d",lm="(?:"+im+"|"+om+")",IN="(?:"+Hi+"|"+om+")",cm="(?:"+Nc+"(?:d|ll|m|re|s|t|ve))?",um="(?:"+Nc+"(?:D|LL|M|RE|S|T|VE))?",fm=RN+"?",dm="["+em+"]?",PN="(?:"+am+"(?:"+[sm,Ac,Dc].join("|")+")"+dm+fm+")*",BN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",LN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pm=dm+fm+PN,VN="(?:"+[DN,Ac,Dc].join("|")+")"+pm,$N="(?:"+[sm+ia+"?",ia,Ac,Dc,AN].join("|")+")",FN=RegExp(Nc,"g"),zN=RegExp(ia,"g"),Rc=RegExp(Mc+"(?="+Mc+")|"+$N+pm,"g"),HN=RegExp([Hi+"?"+im+"+"+cm+"(?="+[nm,Hi,"$"].join("|")+")",IN+"+"+um+"(?="+[nm,Hi+lm,"$"].join("|")+")",Hi+"?"+lm+"+"+cm,Hi+"+"+um,LN,BN,rm,VN].join("|"),"g"),WN=RegExp("["+am+ra+Xh+em+"]"),UN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jN=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],KN=-1,ze={};ze[Lo]=ze[Vo]=ze[$o]=ze[Fo]=ze[zo]=ze[I]=ze[G]=ze[ne]=ze[Ce]=!0,ze[Je]=ze[Ge]=ze[Hn]=ze[H]=ze[En]=ze[W]=ze[le]=ze[Re]=ze[ee]=ze[_e]=ze[Me]=ze[Dt]=ze[Qe]=ze[Sn]=ze[zn]=!1;var Fe={};Fe[Je]=Fe[Ge]=Fe[Hn]=Fe[En]=Fe[H]=Fe[W]=Fe[Lo]=Fe[Vo]=Fe[$o]=Fe[Fo]=Fe[zo]=Fe[ee]=Fe[_e]=Fe[Me]=Fe[Dt]=Fe[Qe]=Fe[Sn]=Fe[un]=Fe[I]=Fe[G]=Fe[ne]=Fe[Ce]=!0,Fe[le]=Fe[Re]=Fe[zn]=!1;var qN={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},JN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},GN={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},XN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},YN=parseFloat,ZN=parseInt,hm=typeof lo=="object"&&lo&&lo.Object===Object&&lo,QN=typeof self=="object"&&self&&self.Object===Object&&self,mt=hm||QN||Function("return this")(),Ic=e&&!e.nodeType&&e,ti=Ic&&!0&&n&&!n.nodeType&&n,mm=ti&&ti.exports===Ic,Pc=mm&&hm.process,fn=function(){try{var O=ti&&ti.require&&ti.require("util").types;return O||Pc&&Pc.binding&&Pc.binding("util")}catch{}}(),gm=fn&&fn.isArrayBuffer,ym=fn&&fn.isDate,bm=fn&&fn.isMap,vm=fn&&fn.isRegExp,wm=fn&&fn.isSet,xm=fn&&fn.isTypedArray;function Yt(O,P,A){switch(A.length){case 0:return O.call(P);case 1:return O.call(P,A[0]);case 2:return O.call(P,A[0],A[1]);case 3:return O.call(P,A[0],A[1],A[2])}return O.apply(P,A)}function eM(O,P,A,J){for(var ae=-1,Ae=O==null?0:O.length;++ae<Ae;){var it=O[ae];P(J,it,A(it),O)}return J}function dn(O,P){for(var A=-1,J=O==null?0:O.length;++A<J&&P(O[A],A,O)!==!1;);return O}function tM(O,P){for(var A=O==null?0:O.length;A--&&P(O[A],A,O)!==!1;);return O}function km(O,P){for(var A=-1,J=O==null?0:O.length;++A<J;)if(!P(O[A],A,O))return!1;return!0}function Ar(O,P){for(var A=-1,J=O==null?0:O.length,ae=0,Ae=[];++A<J;){var it=O[A];P(it,A,O)&&(Ae[ae++]=it)}return Ae}function oa(O,P){var A=O==null?0:O.length;return!!A&&Wi(O,P,0)>-1}function Bc(O,P,A){for(var J=-1,ae=O==null?0:O.length;++J<ae;)if(A(P,O[J]))return!0;return!1}function He(O,P){for(var A=-1,J=O==null?0:O.length,ae=Array(J);++A<J;)ae[A]=P(O[A],A,O);return ae}function Dr(O,P){for(var A=-1,J=P.length,ae=O.length;++A<J;)O[ae+A]=P[A];return O}function Lc(O,P,A,J){var ae=-1,Ae=O==null?0:O.length;for(J&&Ae&&(A=O[++ae]);++ae<Ae;)A=P(A,O[ae],ae,O);return A}function nM(O,P,A,J){var ae=O==null?0:O.length;for(J&&ae&&(A=O[--ae]);ae--;)A=P(A,O[ae],ae,O);return A}function Vc(O,P){for(var A=-1,J=O==null?0:O.length;++A<J;)if(P(O[A],A,O))return!0;return!1}var rM=$c("length");function iM(O){return O.split("")}function oM(O){return O.match(pN)||[]}function Sm(O,P,A){var J;return A(O,function(ae,Ae,it){if(P(ae,Ae,it))return J=Ae,!1}),J}function sa(O,P,A,J){for(var ae=O.length,Ae=A+(J?1:-1);J?Ae--:++Ae<ae;)if(P(O[Ae],Ae,O))return Ae;return-1}function Wi(O,P,A){return P===P?yM(O,P,A):sa(O,Em,A)}function sM(O,P,A,J){for(var ae=A-1,Ae=O.length;++ae<Ae;)if(J(O[ae],P))return ae;return-1}function Em(O){return O!==O}function _m(O,P){var A=O==null?0:O.length;return A?zc(O,P)/A:rt}function $c(O){return function(P){return P==null?t:P[O]}}function Fc(O){return function(P){return O==null?t:O[P]}}function Cm(O,P,A,J,ae){return ae(O,function(Ae,it,$e){A=J?(J=!1,Ae):P(A,Ae,it,$e)}),A}function aM(O,P){var A=O.length;for(O.sort(P);A--;)O[A]=O[A].value;return O}function zc(O,P){for(var A,J=-1,ae=O.length;++J<ae;){var Ae=P(O[J]);Ae!==t&&(A=A===t?Ae:A+Ae)}return A}function Hc(O,P){for(var A=-1,J=Array(O);++A<O;)J[A]=P(A);return J}function lM(O,P){return He(P,function(A){return[A,O[A]]})}function Tm(O){return O&&O.slice(0,Am(O)+1).replace(Oc,"")}function Zt(O){return function(P){return O(P)}}function Wc(O,P){return He(P,function(A){return O[A]})}function jo(O,P){return O.has(P)}function Om(O,P){for(var A=-1,J=O.length;++A<J&&Wi(P,O[A],0)>-1;);return A}function Nm(O,P){for(var A=O.length;A--&&Wi(P,O[A],0)>-1;);return A}function cM(O,P){for(var A=O.length,J=0;A--;)O[A]===P&&++J;return J}var uM=Fc(qN),fM=Fc(JN);function dM(O){return"\\"+XN[O]}function pM(O,P){return O==null?t:O[P]}function Ui(O){return WN.test(O)}function hM(O){return UN.test(O)}function mM(O){for(var P,A=[];!(P=O.next()).done;)A.push(P.value);return A}function Uc(O){var P=-1,A=Array(O.size);return O.forEach(function(J,ae){A[++P]=[ae,J]}),A}function Mm(O,P){return function(A){return O(P(A))}}function Rr(O,P){for(var A=-1,J=O.length,ae=0,Ae=[];++A<J;){var it=O[A];(it===P||it===h)&&(O[A]=h,Ae[ae++]=A)}return Ae}function aa(O){var P=-1,A=Array(O.size);return O.forEach(function(J){A[++P]=J}),A}function gM(O){var P=-1,A=Array(O.size);return O.forEach(function(J){A[++P]=[J,J]}),A}function yM(O,P,A){for(var J=A-1,ae=O.length;++J<ae;)if(O[J]===P)return J;return-1}function bM(O,P,A){for(var J=A+1;J--;)if(O[J]===P)return J;return J}function ji(O){return Ui(O)?wM(O):rM(O)}function _n(O){return Ui(O)?xM(O):iM(O)}function Am(O){for(var P=O.length;P--&&cN.test(O.charAt(P)););return P}var vM=Fc(GN);function wM(O){for(var P=Rc.lastIndex=0;Rc.test(O);)++P;return P}function xM(O){return O.match(Rc)||[]}function kM(O){return O.match(HN)||[]}var SM=function O(P){P=P==null?mt:Ki.defaults(mt.Object(),P,Ki.pick(mt,jN));var A=P.Array,J=P.Date,ae=P.Error,Ae=P.Function,it=P.Math,$e=P.Object,jc=P.RegExp,EM=P.String,pn=P.TypeError,la=A.prototype,_M=Ae.prototype,qi=$e.prototype,ca=P["__core-js_shared__"],ua=_M.toString,Ve=qi.hasOwnProperty,CM=0,Dm=function(){var s=/[^.]+$/.exec(ca&&ca.keys&&ca.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),fa=qi.toString,TM=ua.call($e),OM=mt._,NM=jc("^"+ua.call(Ve).replace(Tc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),da=mm?P.Buffer:t,Ir=P.Symbol,pa=P.Uint8Array,Rm=da?da.allocUnsafe:t,ha=Mm($e.getPrototypeOf,$e),Im=$e.create,Pm=qi.propertyIsEnumerable,ma=la.splice,Bm=Ir?Ir.isConcatSpreadable:t,Ko=Ir?Ir.iterator:t,ni=Ir?Ir.toStringTag:t,ga=function(){try{var s=ai($e,"defineProperty");return s({},"",{}),s}catch{}}(),MM=P.clearTimeout!==mt.clearTimeout&&P.clearTimeout,AM=J&&J.now!==mt.Date.now&&J.now,DM=P.setTimeout!==mt.setTimeout&&P.setTimeout,ya=it.ceil,ba=it.floor,Kc=$e.getOwnPropertySymbols,RM=da?da.isBuffer:t,Lm=P.isFinite,IM=la.join,PM=Mm($e.keys,$e),ot=it.max,St=it.min,BM=J.now,LM=P.parseInt,Vm=it.random,VM=la.reverse,qc=ai(P,"DataView"),qo=ai(P,"Map"),Jc=ai(P,"Promise"),Ji=ai(P,"Set"),Jo=ai(P,"WeakMap"),Go=ai($e,"create"),va=Jo&&new Jo,Gi={},$M=li(qc),FM=li(qo),zM=li(Jc),HM=li(Ji),WM=li(Jo),wa=Ir?Ir.prototype:t,Xo=wa?wa.valueOf:t,$m=wa?wa.toString:t;function x(s){if(je(s)&&!ce(s)&&!(s instanceof xe)){if(s instanceof hn)return s;if(Ve.call(s,"__wrapped__"))return Fg(s)}return new hn(s)}var Xi=function(){function s(){}return function(l){if(!We(l))return{};if(Im)return Im(l);s.prototype=l;var f=new s;return s.prototype=t,f}}();function xa(){}function hn(s,l){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}x.templateSettings={escape:Fi,evaluate:Mr,interpolate:ta,variable:"",imports:{_:x}},x.prototype=xa.prototype,x.prototype.constructor=x,hn.prototype=Xi(xa.prototype),hn.prototype.constructor=hn;function xe(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qe,this.__views__=[]}function UM(){var s=new xe(this.__wrapped__);return s.__actions__=Ht(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Ht(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Ht(this.__views__),s}function jM(){if(this.__filtered__){var s=new xe(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function KM(){var s=this.__wrapped__.value(),l=this.__dir__,f=ce(s),g=l<0,v=f?s.length:0,k=iD(0,v,this.__views__),S=k.start,T=k.end,M=T-S,B=g?T:S-1,V=this.__iteratees__,$=V.length,U=0,Z=St(M,this.__takeCount__);if(!f||!g&&v==M&&Z==M)return cg(s,this.__actions__);var ie=[];e:for(;M--&&U<Z;){B+=l;for(var me=-1,oe=s[B];++me<$;){var be=V[me],Ee=be.iteratee,tn=be.type,Pt=Ee(oe);if(tn==nt)oe=Pt;else if(!Pt){if(tn==ct)continue e;break e}}ie[U++]=oe}return ie}xe.prototype=Xi(xa.prototype),xe.prototype.constructor=xe;function ri(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var g=s[l];this.set(g[0],g[1])}}function qM(){this.__data__=Go?Go(null):{},this.size=0}function JM(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}function GM(s){var l=this.__data__;if(Go){var f=l[s];return f===u?t:f}return Ve.call(l,s)?l[s]:t}function XM(s){var l=this.__data__;return Go?l[s]!==t:Ve.call(l,s)}function YM(s,l){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Go&&l===t?u:l,this}ri.prototype.clear=qM,ri.prototype.delete=JM,ri.prototype.get=GM,ri.prototype.has=XM,ri.prototype.set=YM;function nr(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var g=s[l];this.set(g[0],g[1])}}function ZM(){this.__data__=[],this.size=0}function QM(s){var l=this.__data__,f=ka(l,s);if(f<0)return!1;var g=l.length-1;return f==g?l.pop():ma.call(l,f,1),--this.size,!0}function eA(s){var l=this.__data__,f=ka(l,s);return f<0?t:l[f][1]}function tA(s){return ka(this.__data__,s)>-1}function nA(s,l){var f=this.__data__,g=ka(f,s);return g<0?(++this.size,f.push([s,l])):f[g][1]=l,this}nr.prototype.clear=ZM,nr.prototype.delete=QM,nr.prototype.get=eA,nr.prototype.has=tA,nr.prototype.set=nA;function rr(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var g=s[l];this.set(g[0],g[1])}}function rA(){this.size=0,this.__data__={hash:new ri,map:new(qo||nr),string:new ri}}function iA(s){var l=Ia(this,s).delete(s);return this.size-=l?1:0,l}function oA(s){return Ia(this,s).get(s)}function sA(s){return Ia(this,s).has(s)}function aA(s,l){var f=Ia(this,s),g=f.size;return f.set(s,l),this.size+=f.size==g?0:1,this}rr.prototype.clear=rA,rr.prototype.delete=iA,rr.prototype.get=oA,rr.prototype.has=sA,rr.prototype.set=aA;function ii(s){var l=-1,f=s==null?0:s.length;for(this.__data__=new rr;++l<f;)this.add(s[l])}function lA(s){return this.__data__.set(s,u),this}function cA(s){return this.__data__.has(s)}ii.prototype.add=ii.prototype.push=lA,ii.prototype.has=cA;function Cn(s){var l=this.__data__=new nr(s);this.size=l.size}function uA(){this.__data__=new nr,this.size=0}function fA(s){var l=this.__data__,f=l.delete(s);return this.size=l.size,f}function dA(s){return this.__data__.get(s)}function pA(s){return this.__data__.has(s)}function hA(s,l){var f=this.__data__;if(f instanceof nr){var g=f.__data__;if(!qo||g.length<i-1)return g.push([s,l]),this.size=++f.size,this;f=this.__data__=new rr(g)}return f.set(s,l),this.size=f.size,this}Cn.prototype.clear=uA,Cn.prototype.delete=fA,Cn.prototype.get=dA,Cn.prototype.has=pA,Cn.prototype.set=hA;function Fm(s,l){var f=ce(s),g=!f&&ci(s),v=!f&&!g&&$r(s),k=!f&&!g&&!v&&eo(s),S=f||g||v||k,T=S?Hc(s.length,EM):[],M=T.length;for(var B in s)(l||Ve.call(s,B))&&!(S&&(B=="length"||v&&(B=="offset"||B=="parent")||k&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||ar(B,M)))&&T.push(B);return T}function zm(s){var l=s.length;return l?s[ou(0,l-1)]:t}function mA(s,l){return Pa(Ht(s),oi(l,0,s.length))}function gA(s){return Pa(Ht(s))}function Gc(s,l,f){(f!==t&&!Tn(s[l],f)||f===t&&!(l in s))&&ir(s,l,f)}function Yo(s,l,f){var g=s[l];(!(Ve.call(s,l)&&Tn(g,f))||f===t&&!(l in s))&&ir(s,l,f)}function ka(s,l){for(var f=s.length;f--;)if(Tn(s[f][0],l))return f;return-1}function yA(s,l,f,g){return Pr(s,function(v,k,S){l(g,v,f(v),S)}),g}function Hm(s,l){return s&&Un(l,ut(l),s)}function bA(s,l){return s&&Un(l,Ut(l),s)}function ir(s,l,f){l=="__proto__"&&ga?ga(s,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[l]=f}function Xc(s,l){for(var f=-1,g=l.length,v=A(g),k=s==null;++f<g;)v[f]=k?t:Mu(s,l[f]);return v}function oi(s,l,f){return s===s&&(f!==t&&(s=s<=f?s:f),l!==t&&(s=s>=l?s:l)),s}function mn(s,l,f,g,v,k){var S,T=l&m,M=l&y,B=l&b;if(f&&(S=v?f(s,g,v,k):f(s)),S!==t)return S;if(!We(s))return s;var V=ce(s);if(V){if(S=sD(s),!T)return Ht(s,S)}else{var $=Et(s),U=$==Re||$==se;if($r(s))return dg(s,T);if($==Me||$==Je||U&&!v){if(S=M||U?{}:Ag(s),!T)return M?GA(s,bA(S,s)):JA(s,Hm(S,s))}else{if(!Fe[$])return v?s:{};S=aD(s,$,T)}}k||(k=new Cn);var Z=k.get(s);if(Z)return Z;k.set(s,S),sy(s)?s.forEach(function(oe){S.add(mn(oe,l,f,oe,s,k))}):iy(s)&&s.forEach(function(oe,be){S.set(be,mn(oe,l,f,be,s,k))});var ie=B?M?gu:mu:M?Ut:ut,me=V?t:ie(s);return dn(me||s,function(oe,be){me&&(be=oe,oe=s[be]),Yo(S,be,mn(oe,l,f,be,s,k))}),S}function vA(s){var l=ut(s);return function(f){return Wm(f,s,l)}}function Wm(s,l,f){var g=f.length;if(s==null)return!g;for(s=$e(s);g--;){var v=f[g],k=l[v],S=s[v];if(S===t&&!(v in s)||!k(S))return!1}return!0}function Um(s,l,f){if(typeof s!="function")throw new pn(a);return is(function(){s.apply(t,f)},l)}function Zo(s,l,f,g){var v=-1,k=oa,S=!0,T=s.length,M=[],B=l.length;if(!T)return M;f&&(l=He(l,Zt(f))),g?(k=Bc,S=!1):l.length>=i&&(k=jo,S=!1,l=new ii(l));e:for(;++v<T;){var V=s[v],$=f==null?V:f(V);if(V=g||V!==0?V:0,S&&$===$){for(var U=B;U--;)if(l[U]===$)continue e;M.push(V)}else k(l,$,g)||M.push(V)}return M}var Pr=yg(Wn),jm=yg(Zc,!0);function wA(s,l){var f=!0;return Pr(s,function(g,v,k){return f=!!l(g,v,k),f}),f}function Sa(s,l,f){for(var g=-1,v=s.length;++g<v;){var k=s[g],S=l(k);if(S!=null&&(T===t?S===S&&!en(S):f(S,T)))var T=S,M=k}return M}function xA(s,l,f,g){var v=s.length;for(f=de(f),f<0&&(f=-f>v?0:v+f),g=g===t||g>v?v:de(g),g<0&&(g+=v),g=f>g?0:ly(g);f<g;)s[f++]=l;return s}function Km(s,l){var f=[];return Pr(s,function(g,v,k){l(g,v,k)&&f.push(g)}),f}function gt(s,l,f,g,v){var k=-1,S=s.length;for(f||(f=cD),v||(v=[]);++k<S;){var T=s[k];l>0&&f(T)?l>1?gt(T,l-1,f,g,v):Dr(v,T):g||(v[v.length]=T)}return v}var Yc=bg(),qm=bg(!0);function Wn(s,l){return s&&Yc(s,l,ut)}function Zc(s,l){return s&&qm(s,l,ut)}function Ea(s,l){return Ar(l,function(f){return lr(s[f])})}function si(s,l){l=Lr(l,s);for(var f=0,g=l.length;s!=null&&f<g;)s=s[jn(l[f++])];return f&&f==g?s:t}function Jm(s,l,f){var g=l(s);return ce(s)?g:Dr(g,f(s))}function Rt(s){return s==null?s===t?ei:At:ni&&ni in $e(s)?rD(s):gD(s)}function Qc(s,l){return s>l}function kA(s,l){return s!=null&&Ve.call(s,l)}function SA(s,l){return s!=null&&l in $e(s)}function EA(s,l,f){return s>=St(l,f)&&s<ot(l,f)}function eu(s,l,f){for(var g=f?Bc:oa,v=s[0].length,k=s.length,S=k,T=A(k),M=1/0,B=[];S--;){var V=s[S];S&&l&&(V=He(V,Zt(l))),M=St(V.length,M),T[S]=!f&&(l||v>=120&&V.length>=120)?new ii(S&&V):t}V=s[0];var $=-1,U=T[0];e:for(;++$<v&&B.length<M;){var Z=V[$],ie=l?l(Z):Z;if(Z=f||Z!==0?Z:0,!(U?jo(U,ie):g(B,ie,f))){for(S=k;--S;){var me=T[S];if(!(me?jo(me,ie):g(s[S],ie,f)))continue e}U&&U.push(ie),B.push(Z)}}return B}function _A(s,l,f,g){return Wn(s,function(v,k,S){l(g,f(v),k,S)}),g}function Qo(s,l,f){l=Lr(l,s),s=Pg(s,l);var g=s==null?s:s[jn(yn(l))];return g==null?t:Yt(g,s,f)}function Gm(s){return je(s)&&Rt(s)==Je}function CA(s){return je(s)&&Rt(s)==Hn}function TA(s){return je(s)&&Rt(s)==W}function es(s,l,f,g,v){return s===l?!0:s==null||l==null||!je(s)&&!je(l)?s!==s&&l!==l:OA(s,l,f,g,es,v)}function OA(s,l,f,g,v,k){var S=ce(s),T=ce(l),M=S?Ge:Et(s),B=T?Ge:Et(l);M=M==Je?Me:M,B=B==Je?Me:B;var V=M==Me,$=B==Me,U=M==B;if(U&&$r(s)){if(!$r(l))return!1;S=!0,V=!1}if(U&&!V)return k||(k=new Cn),S||eo(s)?Og(s,l,f,g,v,k):tD(s,l,M,f,g,v,k);if(!(f&w)){var Z=V&&Ve.call(s,"__wrapped__"),ie=$&&Ve.call(l,"__wrapped__");if(Z||ie){var me=Z?s.value():s,oe=ie?l.value():l;return k||(k=new Cn),v(me,oe,f,g,k)}}return U?(k||(k=new Cn),nD(s,l,f,g,v,k)):!1}function NA(s){return je(s)&&Et(s)==ee}function tu(s,l,f,g){var v=f.length,k=v,S=!g;if(s==null)return!k;for(s=$e(s);v--;){var T=f[v];if(S&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++v<k;){T=f[v];var M=T[0],B=s[M],V=T[1];if(S&&T[2]){if(B===t&&!(M in s))return!1}else{var $=new Cn;if(g)var U=g(B,V,M,s,l,$);if(!(U===t?es(V,B,w|E,g,$):U))return!1}}return!0}function Xm(s){if(!We(s)||fD(s))return!1;var l=lr(s)?NM:vN;return l.test(li(s))}function MA(s){return je(s)&&Rt(s)==Dt}function AA(s){return je(s)&&Et(s)==Qe}function DA(s){return je(s)&&za(s.length)&&!!ze[Rt(s)]}function Ym(s){return typeof s=="function"?s:s==null?jt:typeof s=="object"?ce(s)?eg(s[0],s[1]):Qm(s):vy(s)}function nu(s){if(!rs(s))return PM(s);var l=[];for(var f in $e(s))Ve.call(s,f)&&f!="constructor"&&l.push(f);return l}function RA(s){if(!We(s))return mD(s);var l=rs(s),f=[];for(var g in s)g=="constructor"&&(l||!Ve.call(s,g))||f.push(g);return f}function ru(s,l){return s<l}function Zm(s,l){var f=-1,g=Wt(s)?A(s.length):[];return Pr(s,function(v,k,S){g[++f]=l(v,k,S)}),g}function Qm(s){var l=bu(s);return l.length==1&&l[0][2]?Rg(l[0][0],l[0][1]):function(f){return f===s||tu(f,s,l)}}function eg(s,l){return wu(s)&&Dg(l)?Rg(jn(s),l):function(f){var g=Mu(f,s);return g===t&&g===l?Au(f,s):es(l,g,w|E)}}function _a(s,l,f,g,v){s!==l&&Yc(l,function(k,S){if(v||(v=new Cn),We(k))IA(s,l,S,f,_a,g,v);else{var T=g?g(ku(s,S),k,S+"",s,l,v):t;T===t&&(T=k),Gc(s,S,T)}},Ut)}function IA(s,l,f,g,v,k,S){var T=ku(s,f),M=ku(l,f),B=S.get(M);if(B){Gc(s,f,B);return}var V=k?k(T,M,f+"",s,l,S):t,$=V===t;if($){var U=ce(M),Z=!U&&$r(M),ie=!U&&!Z&&eo(M);V=M,U||Z||ie?ce(T)?V=T:Xe(T)?V=Ht(T):Z?($=!1,V=dg(M,!0)):ie?($=!1,V=pg(M,!0)):V=[]:ss(M)||ci(M)?(V=T,ci(T)?V=cy(T):(!We(T)||lr(T))&&(V=Ag(M))):$=!1}$&&(S.set(M,V),v(V,M,g,k,S),S.delete(M)),Gc(s,f,V)}function tg(s,l){var f=s.length;if(!!f)return l+=l<0?f:0,ar(l,f)?s[l]:t}function ng(s,l,f){l.length?l=He(l,function(k){return ce(k)?function(S){return si(S,k.length===1?k[0]:k)}:k}):l=[jt];var g=-1;l=He(l,Zt(re()));var v=Zm(s,function(k,S,T){var M=He(l,function(B){return B(k)});return{criteria:M,index:++g,value:k}});return aM(v,function(k,S){return qA(k,S,f)})}function PA(s,l){return rg(s,l,function(f,g){return Au(s,g)})}function rg(s,l,f){for(var g=-1,v=l.length,k={};++g<v;){var S=l[g],T=si(s,S);f(T,S)&&ts(k,Lr(S,s),T)}return k}function BA(s){return function(l){return si(l,s)}}function iu(s,l,f,g){var v=g?sM:Wi,k=-1,S=l.length,T=s;for(s===l&&(l=Ht(l)),f&&(T=He(s,Zt(f)));++k<S;)for(var M=0,B=l[k],V=f?f(B):B;(M=v(T,V,M,g))>-1;)T!==s&&ma.call(T,M,1),ma.call(s,M,1);return s}function ig(s,l){for(var f=s?l.length:0,g=f-1;f--;){var v=l[f];if(f==g||v!==k){var k=v;ar(v)?ma.call(s,v,1):lu(s,v)}}return s}function ou(s,l){return s+ba(Vm()*(l-s+1))}function LA(s,l,f,g){for(var v=-1,k=ot(ya((l-s)/(f||1)),0),S=A(k);k--;)S[g?k:++v]=s,s+=f;return S}function su(s,l){var f="";if(!s||l<1||l>De)return f;do l%2&&(f+=s),l=ba(l/2),l&&(s+=s);while(l);return f}function ge(s,l){return Su(Ig(s,l,jt),s+"")}function VA(s){return zm(to(s))}function $A(s,l){var f=to(s);return Pa(f,oi(l,0,f.length))}function ts(s,l,f,g){if(!We(s))return s;l=Lr(l,s);for(var v=-1,k=l.length,S=k-1,T=s;T!=null&&++v<k;){var M=jn(l[v]),B=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return s;if(v!=S){var V=T[M];B=g?g(V,M,T):t,B===t&&(B=We(V)?V:ar(l[v+1])?[]:{})}Yo(T,M,B),T=T[M]}return s}var og=va?function(s,l){return va.set(s,l),s}:jt,FA=ga?function(s,l){return ga(s,"toString",{configurable:!0,enumerable:!1,value:Ru(l),writable:!0})}:jt;function zA(s){return Pa(to(s))}function gn(s,l,f){var g=-1,v=s.length;l<0&&(l=-l>v?0:v+l),f=f>v?v:f,f<0&&(f+=v),v=l>f?0:f-l>>>0,l>>>=0;for(var k=A(v);++g<v;)k[g]=s[g+l];return k}function HA(s,l){var f;return Pr(s,function(g,v,k){return f=l(g,v,k),!f}),!!f}function Ca(s,l,f){var g=0,v=s==null?g:s.length;if(typeof l=="number"&&l===l&&v<=Xt){for(;g<v;){var k=g+v>>>1,S=s[k];S!==null&&!en(S)&&(f?S<=l:S<l)?g=k+1:v=k}return v}return au(s,l,jt,f)}function au(s,l,f,g){var v=0,k=s==null?0:s.length;if(k===0)return 0;l=f(l);for(var S=l!==l,T=l===null,M=en(l),B=l===t;v<k;){var V=ba((v+k)/2),$=f(s[V]),U=$!==t,Z=$===null,ie=$===$,me=en($);if(S)var oe=g||ie;else B?oe=ie&&(g||U):T?oe=ie&&U&&(g||!Z):M?oe=ie&&U&&!Z&&(g||!me):Z||me?oe=!1:oe=g?$<=l:$<l;oe?v=V+1:k=V}return St(k,xt)}function sg(s,l){for(var f=-1,g=s.length,v=0,k=[];++f<g;){var S=s[f],T=l?l(S):S;if(!f||!Tn(T,M)){var M=T;k[v++]=S===0?0:S}}return k}function ag(s){return typeof s=="number"?s:en(s)?rt:+s}function Qt(s){if(typeof s=="string")return s;if(ce(s))return He(s,Qt)+"";if(en(s))return $m?$m.call(s):"";var l=s+"";return l=="0"&&1/s==-Le?"-0":l}function Br(s,l,f){var g=-1,v=oa,k=s.length,S=!0,T=[],M=T;if(f)S=!1,v=Bc;else if(k>=i){var B=l?null:QA(s);if(B)return aa(B);S=!1,v=jo,M=new ii}else M=l?[]:T;e:for(;++g<k;){var V=s[g],$=l?l(V):V;if(V=f||V!==0?V:0,S&&$===$){for(var U=M.length;U--;)if(M[U]===$)continue e;l&&M.push($),T.push(V)}else v(M,$,f)||(M!==T&&M.push($),T.push(V))}return T}function lu(s,l){return l=Lr(l,s),s=Pg(s,l),s==null||delete s[jn(yn(l))]}function lg(s,l,f,g){return ts(s,l,f(si(s,l)),g)}function Ta(s,l,f,g){for(var v=s.length,k=g?v:-1;(g?k--:++k<v)&&l(s[k],k,s););return f?gn(s,g?0:k,g?k+1:v):gn(s,g?k+1:0,g?v:k)}function cg(s,l){var f=s;return f instanceof xe&&(f=f.value()),Lc(l,function(g,v){return v.func.apply(v.thisArg,Dr([g],v.args))},f)}function cu(s,l,f){var g=s.length;if(g<2)return g?Br(s[0]):[];for(var v=-1,k=A(g);++v<g;)for(var S=s[v],T=-1;++T<g;)T!=v&&(k[v]=Zo(k[v]||S,s[T],l,f));return Br(gt(k,1),l,f)}function ug(s,l,f){for(var g=-1,v=s.length,k=l.length,S={};++g<v;){var T=g<k?l[g]:t;f(S,s[g],T)}return S}function uu(s){return Xe(s)?s:[]}function fu(s){return typeof s=="function"?s:jt}function Lr(s,l){return ce(s)?s:wu(s,l)?[s]:$g(Ie(s))}var WA=ge;function Vr(s,l,f){var g=s.length;return f=f===t?g:f,!l&&f>=g?s:gn(s,l,f)}var fg=MM||function(s){return mt.clearTimeout(s)};function dg(s,l){if(l)return s.slice();var f=s.length,g=Rm?Rm(f):new s.constructor(f);return s.copy(g),g}function du(s){var l=new s.constructor(s.byteLength);return new pa(l).set(new pa(s)),l}function UA(s,l){var f=l?du(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function jA(s){var l=new s.constructor(s.source,Gh.exec(s));return l.lastIndex=s.lastIndex,l}function KA(s){return Xo?$e(Xo.call(s)):{}}function pg(s,l){var f=l?du(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function hg(s,l){if(s!==l){var f=s!==t,g=s===null,v=s===s,k=en(s),S=l!==t,T=l===null,M=l===l,B=en(l);if(!T&&!B&&!k&&s>l||k&&S&&M&&!T&&!B||g&&S&&M||!f&&M||!v)return 1;if(!g&&!k&&!B&&s<l||B&&f&&v&&!g&&!k||T&&f&&v||!S&&v||!M)return-1}return 0}function qA(s,l,f){for(var g=-1,v=s.criteria,k=l.criteria,S=v.length,T=f.length;++g<S;){var M=hg(v[g],k[g]);if(M){if(g>=T)return M;var B=f[g];return M*(B=="desc"?-1:1)}}return s.index-l.index}function mg(s,l,f,g){for(var v=-1,k=s.length,S=f.length,T=-1,M=l.length,B=ot(k-S,0),V=A(M+B),$=!g;++T<M;)V[T]=l[T];for(;++v<S;)($||v<k)&&(V[f[v]]=s[v]);for(;B--;)V[T++]=s[v++];return V}function gg(s,l,f,g){for(var v=-1,k=s.length,S=-1,T=f.length,M=-1,B=l.length,V=ot(k-T,0),$=A(V+B),U=!g;++v<V;)$[v]=s[v];for(var Z=v;++M<B;)$[Z+M]=l[M];for(;++S<T;)(U||v<k)&&($[Z+f[S]]=s[v++]);return $}function Ht(s,l){var f=-1,g=s.length;for(l||(l=A(g));++f<g;)l[f]=s[f];return l}function Un(s,l,f,g){var v=!f;f||(f={});for(var k=-1,S=l.length;++k<S;){var T=l[k],M=g?g(f[T],s[T],T,f,s):t;M===t&&(M=s[T]),v?ir(f,T,M):Yo(f,T,M)}return f}function JA(s,l){return Un(s,vu(s),l)}function GA(s,l){return Un(s,Ng(s),l)}function Oa(s,l){return function(f,g){var v=ce(f)?eM:yA,k=l?l():{};return v(f,s,re(g,2),k)}}function Yi(s){return ge(function(l,f){var g=-1,v=f.length,k=v>1?f[v-1]:t,S=v>2?f[2]:t;for(k=s.length>3&&typeof k=="function"?(v--,k):t,S&&It(f[0],f[1],S)&&(k=v<3?t:k,v=1),l=$e(l);++g<v;){var T=f[g];T&&s(l,T,g,k)}return l})}function yg(s,l){return function(f,g){if(f==null)return f;if(!Wt(f))return s(f,g);for(var v=f.length,k=l?v:-1,S=$e(f);(l?k--:++k<v)&&g(S[k],k,S)!==!1;);return f}}function bg(s){return function(l,f,g){for(var v=-1,k=$e(l),S=g(l),T=S.length;T--;){var M=S[s?T:++v];if(f(k[M],M,k)===!1)break}return l}}function XA(s,l,f){var g=l&_,v=ns(s);function k(){var S=this&&this!==mt&&this instanceof k?v:s;return S.apply(g?f:this,arguments)}return k}function vg(s){return function(l){l=Ie(l);var f=Ui(l)?_n(l):t,g=f?f[0]:l.charAt(0),v=f?Vr(f,1).join(""):l.slice(1);return g[s]()+v}}function Zi(s){return function(l){return Lc(yy(gy(l).replace(FN,"")),s,"")}}function ns(s){return function(){var l=arguments;switch(l.length){case 0:return new s;case 1:return new s(l[0]);case 2:return new s(l[0],l[1]);case 3:return new s(l[0],l[1],l[2]);case 4:return new s(l[0],l[1],l[2],l[3]);case 5:return new s(l[0],l[1],l[2],l[3],l[4]);case 6:return new s(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new s(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=Xi(s.prototype),g=s.apply(f,l);return We(g)?g:f}}function YA(s,l,f){var g=ns(s);function v(){for(var k=arguments.length,S=A(k),T=k,M=Qi(v);T--;)S[T]=arguments[T];var B=k<3&&S[0]!==M&&S[k-1]!==M?[]:Rr(S,M);if(k-=B.length,k<f)return Eg(s,l,Na,v.placeholder,t,S,B,t,t,f-k);var V=this&&this!==mt&&this instanceof v?g:s;return Yt(V,this,S)}return v}function wg(s){return function(l,f,g){var v=$e(l);if(!Wt(l)){var k=re(f,3);l=ut(l),f=function(T){return k(v[T],T,v)}}var S=s(l,f,g);return S>-1?v[k?l[S]:S]:t}}function xg(s){return sr(function(l){var f=l.length,g=f,v=hn.prototype.thru;for(s&&l.reverse();g--;){var k=l[g];if(typeof k!="function")throw new pn(a);if(v&&!S&&Ra(k)=="wrapper")var S=new hn([],!0)}for(g=S?g:f;++g<f;){k=l[g];var T=Ra(k),M=T=="wrapper"?yu(k):t;M&&xu(M[0])&&M[1]==(Q|z|j|ve)&&!M[4].length&&M[9]==1?S=S[Ra(M[0])].apply(S,M[3]):S=k.length==1&&xu(k)?S[T]():S.thru(k)}return function(){var B=arguments,V=B[0];if(S&&B.length==1&&ce(V))return S.plant(V).value();for(var $=0,U=f?l[$].apply(this,B):V;++$<f;)U=l[$].call(this,U);return U}})}function Na(s,l,f,g,v,k,S,T,M,B){var V=l&Q,$=l&_,U=l&N,Z=l&(z|C),ie=l&Y,me=U?t:ns(s);function oe(){for(var be=arguments.length,Ee=A(be),tn=be;tn--;)Ee[tn]=arguments[tn];if(Z)var Pt=Qi(oe),nn=cM(Ee,Pt);if(g&&(Ee=mg(Ee,g,v,Z)),k&&(Ee=gg(Ee,k,S,Z)),be-=nn,Z&&be<B){var Ye=Rr(Ee,Pt);return Eg(s,l,Na,oe.placeholder,f,Ee,Ye,T,M,B-be)}var On=$?f:this,ur=U?On[s]:s;return be=Ee.length,T?Ee=yD(Ee,T):ie&&be>1&&Ee.reverse(),V&&M<be&&(Ee.length=M),this&&this!==mt&&this instanceof oe&&(ur=me||ns(ur)),ur.apply(On,Ee)}return oe}function kg(s,l){return function(f,g){return _A(f,s,l(g),{})}}function Ma(s,l){return function(f,g){var v;if(f===t&&g===t)return l;if(f!==t&&(v=f),g!==t){if(v===t)return g;typeof f=="string"||typeof g=="string"?(f=Qt(f),g=Qt(g)):(f=ag(f),g=ag(g)),v=s(f,g)}return v}}function pu(s){return sr(function(l){return l=He(l,Zt(re())),ge(function(f){var g=this;return s(l,function(v){return Yt(v,g,f)})})})}function Aa(s,l){l=l===t?" ":Qt(l);var f=l.length;if(f<2)return f?su(l,s):l;var g=su(l,ya(s/ji(l)));return Ui(l)?Vr(_n(g),0,s).join(""):g.slice(0,s)}function ZA(s,l,f,g){var v=l&_,k=ns(s);function S(){for(var T=-1,M=arguments.length,B=-1,V=g.length,$=A(V+M),U=this&&this!==mt&&this instanceof S?k:s;++B<V;)$[B]=g[B];for(;M--;)$[B++]=arguments[++T];return Yt(U,v?f:this,$)}return S}function Sg(s){return function(l,f,g){return g&&typeof g!="number"&&It(l,f,g)&&(f=g=t),l=cr(l),f===t?(f=l,l=0):f=cr(f),g=g===t?l<f?1:-1:cr(g),LA(l,f,g,s)}}function Da(s){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=bn(l),f=bn(f)),s(l,f)}}function Eg(s,l,f,g,v,k,S,T,M,B){var V=l&z,$=V?S:t,U=V?t:S,Z=V?k:t,ie=V?t:k;l|=V?j:L,l&=~(V?L:j),l&D||(l&=~(_|N));var me=[s,l,v,Z,$,ie,U,T,M,B],oe=f.apply(t,me);return xu(s)&&Bg(oe,me),oe.placeholder=g,Lg(oe,s,l)}function hu(s){var l=it[s];return function(f,g){if(f=bn(f),g=g==null?0:St(de(g),292),g&&Lm(f)){var v=(Ie(f)+"e").split("e"),k=l(v[0]+"e"+(+v[1]+g));return v=(Ie(k)+"e").split("e"),+(v[0]+"e"+(+v[1]-g))}return l(f)}}var QA=Ji&&1/aa(new Ji([,-0]))[1]==Le?function(s){return new Ji(s)}:Bu;function _g(s){return function(l){var f=Et(l);return f==ee?Uc(l):f==Qe?gM(l):lM(l,s(l))}}function or(s,l,f,g,v,k,S,T){var M=l&N;if(!M&&typeof s!="function")throw new pn(a);var B=g?g.length:0;if(B||(l&=~(j|L),g=v=t),S=S===t?S:ot(de(S),0),T=T===t?T:de(T),B-=v?v.length:0,l&L){var V=g,$=v;g=v=t}var U=M?t:yu(s),Z=[s,l,f,g,v,V,$,k,S,T];if(U&&hD(Z,U),s=Z[0],l=Z[1],f=Z[2],g=Z[3],v=Z[4],T=Z[9]=Z[9]===t?M?0:s.length:ot(Z[9]-B,0),!T&&l&(z|C)&&(l&=~(z|C)),!l||l==_)var ie=XA(s,l,f);else l==z||l==C?ie=YA(s,l,T):(l==j||l==(_|j))&&!v.length?ie=ZA(s,l,f,g):ie=Na.apply(t,Z);var me=U?og:Bg;return Lg(me(ie,Z),s,l)}function Cg(s,l,f,g){return s===t||Tn(s,qi[f])&&!Ve.call(g,f)?l:s}function Tg(s,l,f,g,v,k){return We(s)&&We(l)&&(k.set(l,s),_a(s,l,t,Tg,k),k.delete(l)),s}function eD(s){return ss(s)?t:s}function Og(s,l,f,g,v,k){var S=f&w,T=s.length,M=l.length;if(T!=M&&!(S&&M>T))return!1;var B=k.get(s),V=k.get(l);if(B&&V)return B==l&&V==s;var $=-1,U=!0,Z=f&E?new ii:t;for(k.set(s,l),k.set(l,s);++$<T;){var ie=s[$],me=l[$];if(g)var oe=S?g(me,ie,$,l,s,k):g(ie,me,$,s,l,k);if(oe!==t){if(oe)continue;U=!1;break}if(Z){if(!Vc(l,function(be,Ee){if(!jo(Z,Ee)&&(ie===be||v(ie,be,f,g,k)))return Z.push(Ee)})){U=!1;break}}else if(!(ie===me||v(ie,me,f,g,k))){U=!1;break}}return k.delete(s),k.delete(l),U}function tD(s,l,f,g,v,k,S){switch(f){case En:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case Hn:return!(s.byteLength!=l.byteLength||!k(new pa(s),new pa(l)));case H:case W:case _e:return Tn(+s,+l);case le:return s.name==l.name&&s.message==l.message;case Dt:case Sn:return s==l+"";case ee:var T=Uc;case Qe:var M=g&w;if(T||(T=aa),s.size!=l.size&&!M)return!1;var B=S.get(s);if(B)return B==l;g|=E,S.set(s,l);var V=Og(T(s),T(l),g,v,k,S);return S.delete(s),V;case un:if(Xo)return Xo.call(s)==Xo.call(l)}return!1}function nD(s,l,f,g,v,k){var S=f&w,T=mu(s),M=T.length,B=mu(l),V=B.length;if(M!=V&&!S)return!1;for(var $=M;$--;){var U=T[$];if(!(S?U in l:Ve.call(l,U)))return!1}var Z=k.get(s),ie=k.get(l);if(Z&&ie)return Z==l&&ie==s;var me=!0;k.set(s,l),k.set(l,s);for(var oe=S;++$<M;){U=T[$];var be=s[U],Ee=l[U];if(g)var tn=S?g(Ee,be,U,l,s,k):g(be,Ee,U,s,l,k);if(!(tn===t?be===Ee||v(be,Ee,f,g,k):tn)){me=!1;break}oe||(oe=U=="constructor")}if(me&&!oe){var Pt=s.constructor,nn=l.constructor;Pt!=nn&&"constructor"in s&&"constructor"in l&&!(typeof Pt=="function"&&Pt instanceof Pt&&typeof nn=="function"&&nn instanceof nn)&&(me=!1)}return k.delete(s),k.delete(l),me}function sr(s){return Su(Ig(s,t,Wg),s+"")}function mu(s){return Jm(s,ut,vu)}function gu(s){return Jm(s,Ut,Ng)}var yu=va?function(s){return va.get(s)}:Bu;function Ra(s){for(var l=s.name+"",f=Gi[l],g=Ve.call(Gi,l)?f.length:0;g--;){var v=f[g],k=v.func;if(k==null||k==s)return v.name}return l}function Qi(s){var l=Ve.call(x,"placeholder")?x:s;return l.placeholder}function re(){var s=x.iteratee||Iu;return s=s===Iu?Ym:s,arguments.length?s(arguments[0],arguments[1]):s}function Ia(s,l){var f=s.__data__;return uD(l)?f[typeof l=="string"?"string":"hash"]:f.map}function bu(s){for(var l=ut(s),f=l.length;f--;){var g=l[f],v=s[g];l[f]=[g,v,Dg(v)]}return l}function ai(s,l){var f=pM(s,l);return Xm(f)?f:t}function rD(s){var l=Ve.call(s,ni),f=s[ni];try{s[ni]=t;var g=!0}catch{}var v=fa.call(s);return g&&(l?s[ni]=f:delete s[ni]),v}var vu=Kc?function(s){return s==null?[]:(s=$e(s),Ar(Kc(s),function(l){return Pm.call(s,l)}))}:Lu,Ng=Kc?function(s){for(var l=[];s;)Dr(l,vu(s)),s=ha(s);return l}:Lu,Et=Rt;(qc&&Et(new qc(new ArrayBuffer(1)))!=En||qo&&Et(new qo)!=ee||Jc&&Et(Jc.resolve())!=Qr||Ji&&Et(new Ji)!=Qe||Jo&&Et(new Jo)!=zn)&&(Et=function(s){var l=Rt(s),f=l==Me?s.constructor:t,g=f?li(f):"";if(g)switch(g){case $M:return En;case FM:return ee;case zM:return Qr;case HM:return Qe;case WM:return zn}return l});function iD(s,l,f){for(var g=-1,v=f.length;++g<v;){var k=f[g],S=k.size;switch(k.type){case"drop":s+=S;break;case"dropRight":l-=S;break;case"take":l=St(l,s+S);break;case"takeRight":s=ot(s,l-S);break}}return{start:s,end:l}}function oD(s){var l=s.match(fN);return l?l[1].split(dN):[]}function Mg(s,l,f){l=Lr(l,s);for(var g=-1,v=l.length,k=!1;++g<v;){var S=jn(l[g]);if(!(k=s!=null&&f(s,S)))break;s=s[S]}return k||++g!=v?k:(v=s==null?0:s.length,!!v&&za(v)&&ar(S,v)&&(ce(s)||ci(s)))}function sD(s){var l=s.length,f=new s.constructor(l);return l&&typeof s[0]=="string"&&Ve.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function Ag(s){return typeof s.constructor=="function"&&!rs(s)?Xi(ha(s)):{}}function aD(s,l,f){var g=s.constructor;switch(l){case Hn:return du(s);case H:case W:return new g(+s);case En:return UA(s,f);case Lo:case Vo:case $o:case Fo:case zo:case I:case G:case ne:case Ce:return pg(s,f);case ee:return new g;case _e:case Sn:return new g(s);case Dt:return jA(s);case Qe:return new g;case un:return KA(s)}}function lD(s,l){var f=l.length;if(!f)return s;var g=f-1;return l[g]=(f>1?"& ":"")+l[g],l=l.join(f>2?", ":" "),s.replace(uN,`{
/* [wrapped with `+l+`] */
`)}function cD(s){return ce(s)||ci(s)||!!(Bm&&s&&s[Bm])}function ar(s,l){var f=typeof s;return l=l==null?De:l,!!l&&(f=="number"||f!="symbol"&&xN.test(s))&&s>-1&&s%1==0&&s<l}function It(s,l,f){if(!We(f))return!1;var g=typeof l;return(g=="number"?Wt(f)&&ar(l,f.length):g=="string"&&l in f)?Tn(f[l],s):!1}function wu(s,l){if(ce(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||en(s)?!0:zi.test(s)||!Uo.test(s)||l!=null&&s in $e(l)}function uD(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}function xu(s){var l=Ra(s),f=x[l];if(typeof f!="function"||!(l in xe.prototype))return!1;if(s===f)return!0;var g=yu(f);return!!g&&s===g[0]}function fD(s){return!!Dm&&Dm in s}var dD=ca?lr:Vu;function rs(s){var l=s&&s.constructor,f=typeof l=="function"&&l.prototype||qi;return s===f}function Dg(s){return s===s&&!We(s)}function Rg(s,l){return function(f){return f==null?!1:f[s]===l&&(l!==t||s in $e(f))}}function pD(s){var l=$a(s,function(g){return f.size===d&&f.clear(),g}),f=l.cache;return l}function hD(s,l){var f=s[1],g=l[1],v=f|g,k=v<(_|N|Q),S=g==Q&&f==z||g==Q&&f==ve&&s[7].length<=l[8]||g==(Q|ve)&&l[7].length<=l[8]&&f==z;if(!(k||S))return s;g&_&&(s[2]=l[2],v|=f&_?0:D);var T=l[3];if(T){var M=s[3];s[3]=M?mg(M,T,l[4]):T,s[4]=M?Rr(s[3],h):l[4]}return T=l[5],T&&(M=s[5],s[5]=M?gg(M,T,l[6]):T,s[6]=M?Rr(s[5],h):l[6]),T=l[7],T&&(s[7]=T),g&Q&&(s[8]=s[8]==null?l[8]:St(s[8],l[8])),s[9]==null&&(s[9]=l[9]),s[0]=l[0],s[1]=v,s}function mD(s){var l=[];if(s!=null)for(var f in $e(s))l.push(f);return l}function gD(s){return fa.call(s)}function Ig(s,l,f){return l=ot(l===t?s.length-1:l,0),function(){for(var g=arguments,v=-1,k=ot(g.length-l,0),S=A(k);++v<k;)S[v]=g[l+v];v=-1;for(var T=A(l+1);++v<l;)T[v]=g[v];return T[l]=f(S),Yt(s,this,T)}}function Pg(s,l){return l.length<2?s:si(s,gn(l,0,-1))}function yD(s,l){for(var f=s.length,g=St(l.length,f),v=Ht(s);g--;){var k=l[g];s[g]=ar(k,f)?v[k]:t}return s}function ku(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var Bg=Vg(og),is=DM||function(s,l){return mt.setTimeout(s,l)},Su=Vg(FA);function Lg(s,l,f){var g=l+"";return Su(s,lD(g,bD(oD(g),f)))}function Vg(s){var l=0,f=0;return function(){var g=BM(),v=Ne-(g-f);if(f=g,v>0){if(++l>=Be)return arguments[0]}else l=0;return s.apply(t,arguments)}}function Pa(s,l){var f=-1,g=s.length,v=g-1;for(l=l===t?g:l;++f<l;){var k=ou(f,v),S=s[k];s[k]=s[f],s[f]=S}return s.length=l,s}var $g=pD(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(aN,function(f,g,v,k){l.push(v?k.replace(mN,"$1"):g||f)}),l});function jn(s){if(typeof s=="string"||en(s))return s;var l=s+"";return l=="0"&&1/s==-Le?"-0":l}function li(s){if(s!=null){try{return ua.call(s)}catch{}try{return s+""}catch{}}return""}function bD(s,l){return dn(kt,function(f){var g="_."+f[0];l&f[1]&&!oa(s,g)&&s.push(g)}),s.sort()}function Fg(s){if(s instanceof xe)return s.clone();var l=new hn(s.__wrapped__,s.__chain__);return l.__actions__=Ht(s.__actions__),l.__index__=s.__index__,l.__values__=s.__values__,l}function vD(s,l,f){(f?It(s,l,f):l===t)?l=1:l=ot(de(l),0);var g=s==null?0:s.length;if(!g||l<1)return[];for(var v=0,k=0,S=A(ya(g/l));v<g;)S[k++]=gn(s,v,v+=l);return S}function wD(s){for(var l=-1,f=s==null?0:s.length,g=0,v=[];++l<f;){var k=s[l];k&&(v[g++]=k)}return v}function xD(){var s=arguments.length;if(!s)return[];for(var l=A(s-1),f=arguments[0],g=s;g--;)l[g-1]=arguments[g];return Dr(ce(f)?Ht(f):[f],gt(l,1))}var kD=ge(function(s,l){return Xe(s)?Zo(s,gt(l,1,Xe,!0)):[]}),SD=ge(function(s,l){var f=yn(l);return Xe(f)&&(f=t),Xe(s)?Zo(s,gt(l,1,Xe,!0),re(f,2)):[]}),ED=ge(function(s,l){var f=yn(l);return Xe(f)&&(f=t),Xe(s)?Zo(s,gt(l,1,Xe,!0),t,f):[]});function _D(s,l,f){var g=s==null?0:s.length;return g?(l=f||l===t?1:de(l),gn(s,l<0?0:l,g)):[]}function CD(s,l,f){var g=s==null?0:s.length;return g?(l=f||l===t?1:de(l),l=g-l,gn(s,0,l<0?0:l)):[]}function TD(s,l){return s&&s.length?Ta(s,re(l,3),!0,!0):[]}function OD(s,l){return s&&s.length?Ta(s,re(l,3),!0):[]}function ND(s,l,f,g){var v=s==null?0:s.length;return v?(f&&typeof f!="number"&&It(s,l,f)&&(f=0,g=v),xA(s,l,f,g)):[]}function zg(s,l,f){var g=s==null?0:s.length;if(!g)return-1;var v=f==null?0:de(f);return v<0&&(v=ot(g+v,0)),sa(s,re(l,3),v)}function Hg(s,l,f){var g=s==null?0:s.length;if(!g)return-1;var v=g-1;return f!==t&&(v=de(f),v=f<0?ot(g+v,0):St(v,g-1)),sa(s,re(l,3),v,!0)}function Wg(s){var l=s==null?0:s.length;return l?gt(s,1):[]}function MD(s){var l=s==null?0:s.length;return l?gt(s,Le):[]}function AD(s,l){var f=s==null?0:s.length;return f?(l=l===t?1:de(l),gt(s,l)):[]}function DD(s){for(var l=-1,f=s==null?0:s.length,g={};++l<f;){var v=s[l];g[v[0]]=v[1]}return g}function Ug(s){return s&&s.length?s[0]:t}function RD(s,l,f){var g=s==null?0:s.length;if(!g)return-1;var v=f==null?0:de(f);return v<0&&(v=ot(g+v,0)),Wi(s,l,v)}function ID(s){var l=s==null?0:s.length;return l?gn(s,0,-1):[]}var PD=ge(function(s){var l=He(s,uu);return l.length&&l[0]===s[0]?eu(l):[]}),BD=ge(function(s){var l=yn(s),f=He(s,uu);return l===yn(f)?l=t:f.pop(),f.length&&f[0]===s[0]?eu(f,re(l,2)):[]}),LD=ge(function(s){var l=yn(s),f=He(s,uu);return l=typeof l=="function"?l:t,l&&f.pop(),f.length&&f[0]===s[0]?eu(f,t,l):[]});function VD(s,l){return s==null?"":IM.call(s,l)}function yn(s){var l=s==null?0:s.length;return l?s[l-1]:t}function $D(s,l,f){var g=s==null?0:s.length;if(!g)return-1;var v=g;return f!==t&&(v=de(f),v=v<0?ot(g+v,0):St(v,g-1)),l===l?bM(s,l,v):sa(s,Em,v,!0)}function FD(s,l){return s&&s.length?tg(s,de(l)):t}var zD=ge(jg);function jg(s,l){return s&&s.length&&l&&l.length?iu(s,l):s}function HD(s,l,f){return s&&s.length&&l&&l.length?iu(s,l,re(f,2)):s}function WD(s,l,f){return s&&s.length&&l&&l.length?iu(s,l,t,f):s}var UD=sr(function(s,l){var f=s==null?0:s.length,g=Xc(s,l);return ig(s,He(l,function(v){return ar(v,f)?+v:v}).sort(hg)),g});function jD(s,l){var f=[];if(!(s&&s.length))return f;var g=-1,v=[],k=s.length;for(l=re(l,3);++g<k;){var S=s[g];l(S,g,s)&&(f.push(S),v.push(g))}return ig(s,v),f}function Eu(s){return s==null?s:VM.call(s)}function KD(s,l,f){var g=s==null?0:s.length;return g?(f&&typeof f!="number"&&It(s,l,f)?(l=0,f=g):(l=l==null?0:de(l),f=f===t?g:de(f)),gn(s,l,f)):[]}function qD(s,l){return Ca(s,l)}function JD(s,l,f){return au(s,l,re(f,2))}function GD(s,l){var f=s==null?0:s.length;if(f){var g=Ca(s,l);if(g<f&&Tn(s[g],l))return g}return-1}function XD(s,l){return Ca(s,l,!0)}function YD(s,l,f){return au(s,l,re(f,2),!0)}function ZD(s,l){var f=s==null?0:s.length;if(f){var g=Ca(s,l,!0)-1;if(Tn(s[g],l))return g}return-1}function QD(s){return s&&s.length?sg(s):[]}function eR(s,l){return s&&s.length?sg(s,re(l,2)):[]}function tR(s){var l=s==null?0:s.length;return l?gn(s,1,l):[]}function nR(s,l,f){return s&&s.length?(l=f||l===t?1:de(l),gn(s,0,l<0?0:l)):[]}function rR(s,l,f){var g=s==null?0:s.length;return g?(l=f||l===t?1:de(l),l=g-l,gn(s,l<0?0:l,g)):[]}function iR(s,l){return s&&s.length?Ta(s,re(l,3),!1,!0):[]}function oR(s,l){return s&&s.length?Ta(s,re(l,3)):[]}var sR=ge(function(s){return Br(gt(s,1,Xe,!0))}),aR=ge(function(s){var l=yn(s);return Xe(l)&&(l=t),Br(gt(s,1,Xe,!0),re(l,2))}),lR=ge(function(s){var l=yn(s);return l=typeof l=="function"?l:t,Br(gt(s,1,Xe,!0),t,l)});function cR(s){return s&&s.length?Br(s):[]}function uR(s,l){return s&&s.length?Br(s,re(l,2)):[]}function fR(s,l){return l=typeof l=="function"?l:t,s&&s.length?Br(s,t,l):[]}function _u(s){if(!(s&&s.length))return[];var l=0;return s=Ar(s,function(f){if(Xe(f))return l=ot(f.length,l),!0}),Hc(l,function(f){return He(s,$c(f))})}function Kg(s,l){if(!(s&&s.length))return[];var f=_u(s);return l==null?f:He(f,function(g){return Yt(l,t,g)})}var dR=ge(function(s,l){return Xe(s)?Zo(s,l):[]}),pR=ge(function(s){return cu(Ar(s,Xe))}),hR=ge(function(s){var l=yn(s);return Xe(l)&&(l=t),cu(Ar(s,Xe),re(l,2))}),mR=ge(function(s){var l=yn(s);return l=typeof l=="function"?l:t,cu(Ar(s,Xe),t,l)}),gR=ge(_u);function yR(s,l){return ug(s||[],l||[],Yo)}function bR(s,l){return ug(s||[],l||[],ts)}var vR=ge(function(s){var l=s.length,f=l>1?s[l-1]:t;return f=typeof f=="function"?(s.pop(),f):t,Kg(s,f)});function qg(s){var l=x(s);return l.__chain__=!0,l}function wR(s,l){return l(s),s}function Ba(s,l){return l(s)}var xR=sr(function(s){var l=s.length,f=l?s[0]:0,g=this.__wrapped__,v=function(k){return Xc(k,s)};return l>1||this.__actions__.length||!(g instanceof xe)||!ar(f)?this.thru(v):(g=g.slice(f,+f+(l?1:0)),g.__actions__.push({func:Ba,args:[v],thisArg:t}),new hn(g,this.__chain__).thru(function(k){return l&&!k.length&&k.push(t),k}))});function kR(){return qg(this)}function SR(){return new hn(this.value(),this.__chain__)}function ER(){this.__values__===t&&(this.__values__=ay(this.value()));var s=this.__index__>=this.__values__.length,l=s?t:this.__values__[this.__index__++];return{done:s,value:l}}function _R(){return this}function CR(s){for(var l,f=this;f instanceof xa;){var g=Fg(f);g.__index__=0,g.__values__=t,l?v.__wrapped__=g:l=g;var v=g;f=f.__wrapped__}return v.__wrapped__=s,l}function TR(){var s=this.__wrapped__;if(s instanceof xe){var l=s;return this.__actions__.length&&(l=new xe(this)),l=l.reverse(),l.__actions__.push({func:Ba,args:[Eu],thisArg:t}),new hn(l,this.__chain__)}return this.thru(Eu)}function OR(){return cg(this.__wrapped__,this.__actions__)}var NR=Oa(function(s,l,f){Ve.call(s,f)?++s[f]:ir(s,f,1)});function MR(s,l,f){var g=ce(s)?km:wA;return f&&It(s,l,f)&&(l=t),g(s,re(l,3))}function AR(s,l){var f=ce(s)?Ar:Km;return f(s,re(l,3))}var DR=wg(zg),RR=wg(Hg);function IR(s,l){return gt(La(s,l),1)}function PR(s,l){return gt(La(s,l),Le)}function BR(s,l,f){return f=f===t?1:de(f),gt(La(s,l),f)}function Jg(s,l){var f=ce(s)?dn:Pr;return f(s,re(l,3))}function Gg(s,l){var f=ce(s)?tM:jm;return f(s,re(l,3))}var LR=Oa(function(s,l,f){Ve.call(s,f)?s[f].push(l):ir(s,f,[l])});function VR(s,l,f,g){s=Wt(s)?s:to(s),f=f&&!g?de(f):0;var v=s.length;return f<0&&(f=ot(v+f,0)),Ha(s)?f<=v&&s.indexOf(l,f)>-1:!!v&&Wi(s,l,f)>-1}var $R=ge(function(s,l,f){var g=-1,v=typeof l=="function",k=Wt(s)?A(s.length):[];return Pr(s,function(S){k[++g]=v?Yt(l,S,f):Qo(S,l,f)}),k}),FR=Oa(function(s,l,f){ir(s,f,l)});function La(s,l){var f=ce(s)?He:Zm;return f(s,re(l,3))}function zR(s,l,f,g){return s==null?[]:(ce(l)||(l=l==null?[]:[l]),f=g?t:f,ce(f)||(f=f==null?[]:[f]),ng(s,l,f))}var HR=Oa(function(s,l,f){s[f?0:1].push(l)},function(){return[[],[]]});function WR(s,l,f){var g=ce(s)?Lc:Cm,v=arguments.length<3;return g(s,re(l,4),f,v,Pr)}function UR(s,l,f){var g=ce(s)?nM:Cm,v=arguments.length<3;return g(s,re(l,4),f,v,jm)}function jR(s,l){var f=ce(s)?Ar:Km;return f(s,Fa(re(l,3)))}function KR(s){var l=ce(s)?zm:VA;return l(s)}function qR(s,l,f){(f?It(s,l,f):l===t)?l=1:l=de(l);var g=ce(s)?mA:$A;return g(s,l)}function JR(s){var l=ce(s)?gA:zA;return l(s)}function GR(s){if(s==null)return 0;if(Wt(s))return Ha(s)?ji(s):s.length;var l=Et(s);return l==ee||l==Qe?s.size:nu(s).length}function XR(s,l,f){var g=ce(s)?Vc:HA;return f&&It(s,l,f)&&(l=t),g(s,re(l,3))}var YR=ge(function(s,l){if(s==null)return[];var f=l.length;return f>1&&It(s,l[0],l[1])?l=[]:f>2&&It(l[0],l[1],l[2])&&(l=[l[0]]),ng(s,gt(l,1),[])}),Va=AM||function(){return mt.Date.now()};function ZR(s,l){if(typeof l!="function")throw new pn(a);return s=de(s),function(){if(--s<1)return l.apply(this,arguments)}}function Xg(s,l,f){return l=f?t:l,l=s&&l==null?s.length:l,or(s,Q,t,t,t,t,l)}function Yg(s,l){var f;if(typeof l!="function")throw new pn(a);return s=de(s),function(){return--s>0&&(f=l.apply(this,arguments)),s<=1&&(l=t),f}}var Cu=ge(function(s,l,f){var g=_;if(f.length){var v=Rr(f,Qi(Cu));g|=j}return or(s,g,l,f,v)}),Zg=ge(function(s,l,f){var g=_|N;if(f.length){var v=Rr(f,Qi(Zg));g|=j}return or(l,g,s,f,v)});function Qg(s,l,f){l=f?t:l;var g=or(s,z,t,t,t,t,t,l);return g.placeholder=Qg.placeholder,g}function ey(s,l,f){l=f?t:l;var g=or(s,C,t,t,t,t,t,l);return g.placeholder=ey.placeholder,g}function ty(s,l,f){var g,v,k,S,T,M,B=0,V=!1,$=!1,U=!0;if(typeof s!="function")throw new pn(a);l=bn(l)||0,We(f)&&(V=!!f.leading,$="maxWait"in f,k=$?ot(bn(f.maxWait)||0,l):k,U="trailing"in f?!!f.trailing:U);function Z(Ye){var On=g,ur=v;return g=v=t,B=Ye,S=s.apply(ur,On),S}function ie(Ye){return B=Ye,T=is(be,l),V?Z(Ye):S}function me(Ye){var On=Ye-M,ur=Ye-B,wy=l-On;return $?St(wy,k-ur):wy}function oe(Ye){var On=Ye-M,ur=Ye-B;return M===t||On>=l||On<0||$&&ur>=k}function be(){var Ye=Va();if(oe(Ye))return Ee(Ye);T=is(be,me(Ye))}function Ee(Ye){return T=t,U&&g?Z(Ye):(g=v=t,S)}function tn(){T!==t&&fg(T),B=0,g=M=v=T=t}function Pt(){return T===t?S:Ee(Va())}function nn(){var Ye=Va(),On=oe(Ye);if(g=arguments,v=this,M=Ye,On){if(T===t)return ie(M);if($)return fg(T),T=is(be,l),Z(M)}return T===t&&(T=is(be,l)),S}return nn.cancel=tn,nn.flush=Pt,nn}var QR=ge(function(s,l){return Um(s,1,l)}),eI=ge(function(s,l,f){return Um(s,bn(l)||0,f)});function tI(s){return or(s,Y)}function $a(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new pn(a);var f=function(){var g=arguments,v=l?l.apply(this,g):g[0],k=f.cache;if(k.has(v))return k.get(v);var S=s.apply(this,g);return f.cache=k.set(v,S)||k,S};return f.cache=new($a.Cache||rr),f}$a.Cache=rr;function Fa(s){if(typeof s!="function")throw new pn(a);return function(){var l=arguments;switch(l.length){case 0:return!s.call(this);case 1:return!s.call(this,l[0]);case 2:return!s.call(this,l[0],l[1]);case 3:return!s.call(this,l[0],l[1],l[2])}return!s.apply(this,l)}}function nI(s){return Yg(2,s)}var rI=WA(function(s,l){l=l.length==1&&ce(l[0])?He(l[0],Zt(re())):He(gt(l,1),Zt(re()));var f=l.length;return ge(function(g){for(var v=-1,k=St(g.length,f);++v<k;)g[v]=l[v].call(this,g[v]);return Yt(s,this,g)})}),Tu=ge(function(s,l){var f=Rr(l,Qi(Tu));return or(s,j,t,l,f)}),ny=ge(function(s,l){var f=Rr(l,Qi(ny));return or(s,L,t,l,f)}),iI=sr(function(s,l){return or(s,ve,t,t,t,l)});function oI(s,l){if(typeof s!="function")throw new pn(a);return l=l===t?l:de(l),ge(s,l)}function sI(s,l){if(typeof s!="function")throw new pn(a);return l=l==null?0:ot(de(l),0),ge(function(f){var g=f[l],v=Vr(f,0,l);return g&&Dr(v,g),Yt(s,this,v)})}function aI(s,l,f){var g=!0,v=!0;if(typeof s!="function")throw new pn(a);return We(f)&&(g="leading"in f?!!f.leading:g,v="trailing"in f?!!f.trailing:v),ty(s,l,{leading:g,maxWait:l,trailing:v})}function lI(s){return Xg(s,1)}function cI(s,l){return Tu(fu(l),s)}function uI(){if(!arguments.length)return[];var s=arguments[0];return ce(s)?s:[s]}function fI(s){return mn(s,b)}function dI(s,l){return l=typeof l=="function"?l:t,mn(s,b,l)}function pI(s){return mn(s,m|b)}function hI(s,l){return l=typeof l=="function"?l:t,mn(s,m|b,l)}function mI(s,l){return l==null||Wm(s,l,ut(l))}function Tn(s,l){return s===l||s!==s&&l!==l}var gI=Da(Qc),yI=Da(function(s,l){return s>=l}),ci=Gm(function(){return arguments}())?Gm:function(s){return je(s)&&Ve.call(s,"callee")&&!Pm.call(s,"callee")},ce=A.isArray,bI=gm?Zt(gm):CA;function Wt(s){return s!=null&&za(s.length)&&!lr(s)}function Xe(s){return je(s)&&Wt(s)}function vI(s){return s===!0||s===!1||je(s)&&Rt(s)==H}var $r=RM||Vu,wI=ym?Zt(ym):TA;function xI(s){return je(s)&&s.nodeType===1&&!ss(s)}function kI(s){if(s==null)return!0;if(Wt(s)&&(ce(s)||typeof s=="string"||typeof s.splice=="function"||$r(s)||eo(s)||ci(s)))return!s.length;var l=Et(s);if(l==ee||l==Qe)return!s.size;if(rs(s))return!nu(s).length;for(var f in s)if(Ve.call(s,f))return!1;return!0}function SI(s,l){return es(s,l)}function EI(s,l,f){f=typeof f=="function"?f:t;var g=f?f(s,l):t;return g===t?es(s,l,t,f):!!g}function Ou(s){if(!je(s))return!1;var l=Rt(s);return l==le||l==q||typeof s.message=="string"&&typeof s.name=="string"&&!ss(s)}function _I(s){return typeof s=="number"&&Lm(s)}function lr(s){if(!We(s))return!1;var l=Rt(s);return l==Re||l==se||l==R||l==Vi}function ry(s){return typeof s=="number"&&s==de(s)}function za(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=De}function We(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}function je(s){return s!=null&&typeof s=="object"}var iy=bm?Zt(bm):NA;function CI(s,l){return s===l||tu(s,l,bu(l))}function TI(s,l,f){return f=typeof f=="function"?f:t,tu(s,l,bu(l),f)}function OI(s){return oy(s)&&s!=+s}function NI(s){if(dD(s))throw new ae(o);return Xm(s)}function MI(s){return s===null}function AI(s){return s==null}function oy(s){return typeof s=="number"||je(s)&&Rt(s)==_e}function ss(s){if(!je(s)||Rt(s)!=Me)return!1;var l=ha(s);if(l===null)return!0;var f=Ve.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&ua.call(f)==TM}var Nu=vm?Zt(vm):MA;function DI(s){return ry(s)&&s>=-De&&s<=De}var sy=wm?Zt(wm):AA;function Ha(s){return typeof s=="string"||!ce(s)&&je(s)&&Rt(s)==Sn}function en(s){return typeof s=="symbol"||je(s)&&Rt(s)==un}var eo=xm?Zt(xm):DA;function RI(s){return s===t}function II(s){return je(s)&&Et(s)==zn}function PI(s){return je(s)&&Rt(s)==$i}var BI=Da(ru),LI=Da(function(s,l){return s<=l});function ay(s){if(!s)return[];if(Wt(s))return Ha(s)?_n(s):Ht(s);if(Ko&&s[Ko])return mM(s[Ko]());var l=Et(s),f=l==ee?Uc:l==Qe?aa:to;return f(s)}function cr(s){if(!s)return s===0?s:0;if(s=bn(s),s===Le||s===-Le){var l=s<0?-1:1;return l*Ft}return s===s?s:0}function de(s){var l=cr(s),f=l%1;return l===l?f?l-f:l:0}function ly(s){return s?oi(de(s),0,qe):0}function bn(s){if(typeof s=="number")return s;if(en(s))return rt;if(We(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=We(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=Tm(s);var f=bN.test(s);return f||wN.test(s)?ZN(s.slice(2),f?2:8):yN.test(s)?rt:+s}function cy(s){return Un(s,Ut(s))}function VI(s){return s?oi(de(s),-De,De):s===0?s:0}function Ie(s){return s==null?"":Qt(s)}var $I=Yi(function(s,l){if(rs(l)||Wt(l)){Un(l,ut(l),s);return}for(var f in l)Ve.call(l,f)&&Yo(s,f,l[f])}),uy=Yi(function(s,l){Un(l,Ut(l),s)}),Wa=Yi(function(s,l,f,g){Un(l,Ut(l),s,g)}),FI=Yi(function(s,l,f,g){Un(l,ut(l),s,g)}),zI=sr(Xc);function HI(s,l){var f=Xi(s);return l==null?f:Hm(f,l)}var WI=ge(function(s,l){s=$e(s);var f=-1,g=l.length,v=g>2?l[2]:t;for(v&&It(l[0],l[1],v)&&(g=1);++f<g;)for(var k=l[f],S=Ut(k),T=-1,M=S.length;++T<M;){var B=S[T],V=s[B];(V===t||Tn(V,qi[B])&&!Ve.call(s,B))&&(s[B]=k[B])}return s}),UI=ge(function(s){return s.push(t,Tg),Yt(fy,t,s)});function jI(s,l){return Sm(s,re(l,3),Wn)}function KI(s,l){return Sm(s,re(l,3),Zc)}function qI(s,l){return s==null?s:Yc(s,re(l,3),Ut)}function JI(s,l){return s==null?s:qm(s,re(l,3),Ut)}function GI(s,l){return s&&Wn(s,re(l,3))}function XI(s,l){return s&&Zc(s,re(l,3))}function YI(s){return s==null?[]:Ea(s,ut(s))}function ZI(s){return s==null?[]:Ea(s,Ut(s))}function Mu(s,l,f){var g=s==null?t:si(s,l);return g===t?f:g}function QI(s,l){return s!=null&&Mg(s,l,kA)}function Au(s,l){return s!=null&&Mg(s,l,SA)}var eP=kg(function(s,l,f){l!=null&&typeof l.toString!="function"&&(l=fa.call(l)),s[l]=f},Ru(jt)),tP=kg(function(s,l,f){l!=null&&typeof l.toString!="function"&&(l=fa.call(l)),Ve.call(s,l)?s[l].push(f):s[l]=[f]},re),nP=ge(Qo);function ut(s){return Wt(s)?Fm(s):nu(s)}function Ut(s){return Wt(s)?Fm(s,!0):RA(s)}function rP(s,l){var f={};return l=re(l,3),Wn(s,function(g,v,k){ir(f,l(g,v,k),g)}),f}function iP(s,l){var f={};return l=re(l,3),Wn(s,function(g,v,k){ir(f,v,l(g,v,k))}),f}var oP=Yi(function(s,l,f){_a(s,l,f)}),fy=Yi(function(s,l,f,g){_a(s,l,f,g)}),sP=sr(function(s,l){var f={};if(s==null)return f;var g=!1;l=He(l,function(k){return k=Lr(k,s),g||(g=k.length>1),k}),Un(s,gu(s),f),g&&(f=mn(f,m|y|b,eD));for(var v=l.length;v--;)lu(f,l[v]);return f});function aP(s,l){return dy(s,Fa(re(l)))}var lP=sr(function(s,l){return s==null?{}:PA(s,l)});function dy(s,l){if(s==null)return{};var f=He(gu(s),function(g){return[g]});return l=re(l),rg(s,f,function(g,v){return l(g,v[0])})}function cP(s,l,f){l=Lr(l,s);var g=-1,v=l.length;for(v||(v=1,s=t);++g<v;){var k=s==null?t:s[jn(l[g])];k===t&&(g=v,k=f),s=lr(k)?k.call(s):k}return s}function uP(s,l,f){return s==null?s:ts(s,l,f)}function fP(s,l,f,g){return g=typeof g=="function"?g:t,s==null?s:ts(s,l,f,g)}var py=_g(ut),hy=_g(Ut);function dP(s,l,f){var g=ce(s),v=g||$r(s)||eo(s);if(l=re(l,4),f==null){var k=s&&s.constructor;v?f=g?new k:[]:We(s)?f=lr(k)?Xi(ha(s)):{}:f={}}return(v?dn:Wn)(s,function(S,T,M){return l(f,S,T,M)}),f}function pP(s,l){return s==null?!0:lu(s,l)}function hP(s,l,f){return s==null?s:lg(s,l,fu(f))}function mP(s,l,f,g){return g=typeof g=="function"?g:t,s==null?s:lg(s,l,fu(f),g)}function to(s){return s==null?[]:Wc(s,ut(s))}function gP(s){return s==null?[]:Wc(s,Ut(s))}function yP(s,l,f){return f===t&&(f=l,l=t),f!==t&&(f=bn(f),f=f===f?f:0),l!==t&&(l=bn(l),l=l===l?l:0),oi(bn(s),l,f)}function bP(s,l,f){return l=cr(l),f===t?(f=l,l=0):f=cr(f),s=bn(s),EA(s,l,f)}function vP(s,l,f){if(f&&typeof f!="boolean"&&It(s,l,f)&&(l=f=t),f===t&&(typeof l=="boolean"?(f=l,l=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&l===t?(s=0,l=1):(s=cr(s),l===t?(l=s,s=0):l=cr(l)),s>l){var g=s;s=l,l=g}if(f||s%1||l%1){var v=Vm();return St(s+v*(l-s+YN("1e-"+((v+"").length-1))),l)}return ou(s,l)}var wP=Zi(function(s,l,f){return l=l.toLowerCase(),s+(f?my(l):l)});function my(s){return Du(Ie(s).toLowerCase())}function gy(s){return s=Ie(s),s&&s.replace(kN,uM).replace(zN,"")}function xP(s,l,f){s=Ie(s),l=Qt(l);var g=s.length;f=f===t?g:oi(de(f),0,g);var v=f;return f-=l.length,f>=0&&s.slice(f,v)==l}function kP(s){return s=Ie(s),s&&Wo.test(s)?s.replace(Ho,fM):s}function SP(s){return s=Ie(s),s&&lN.test(s)?s.replace(Tc,"\\$&"):s}var EP=Zi(function(s,l,f){return s+(f?"-":"")+l.toLowerCase()}),_P=Zi(function(s,l,f){return s+(f?" ":"")+l.toLowerCase()}),CP=vg("toLowerCase");function TP(s,l,f){s=Ie(s),l=de(l);var g=l?ji(s):0;if(!l||g>=l)return s;var v=(l-g)/2;return Aa(ba(v),f)+s+Aa(ya(v),f)}function OP(s,l,f){s=Ie(s),l=de(l);var g=l?ji(s):0;return l&&g<l?s+Aa(l-g,f):s}function NP(s,l,f){s=Ie(s),l=de(l);var g=l?ji(s):0;return l&&g<l?Aa(l-g,f)+s:s}function MP(s,l,f){return f||l==null?l=0:l&&(l=+l),LM(Ie(s).replace(Oc,""),l||0)}function AP(s,l,f){return(f?It(s,l,f):l===t)?l=1:l=de(l),su(Ie(s),l)}function DP(){var s=arguments,l=Ie(s[0]);return s.length<3?l:l.replace(s[1],s[2])}var RP=Zi(function(s,l,f){return s+(f?"_":"")+l.toLowerCase()});function IP(s,l,f){return f&&typeof f!="number"&&It(s,l,f)&&(l=f=t),f=f===t?qe:f>>>0,f?(s=Ie(s),s&&(typeof l=="string"||l!=null&&!Nu(l))&&(l=Qt(l),!l&&Ui(s))?Vr(_n(s),0,f):s.split(l,f)):[]}var PP=Zi(function(s,l,f){return s+(f?" ":"")+Du(l)});function BP(s,l,f){return s=Ie(s),f=f==null?0:oi(de(f),0,s.length),l=Qt(l),s.slice(f,f+l.length)==l}function LP(s,l,f){var g=x.templateSettings;f&&It(s,l,f)&&(l=t),s=Ie(s),l=Wa({},l,g,Cg);var v=Wa({},l.imports,g.imports,Cg),k=ut(v),S=Wc(v,k),T,M,B=0,V=l.interpolate||na,$="__p += '",U=jc((l.escape||na).source+"|"+V.source+"|"+(V===ta?gN:na).source+"|"+(l.evaluate||na).source+"|$","g"),Z="//# sourceURL="+(Ve.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++KN+"]")+`
`;s.replace(U,function(oe,be,Ee,tn,Pt,nn){return Ee||(Ee=tn),$+=s.slice(B,nn).replace(SN,dM),be&&(T=!0,$+=`' +
__e(`+be+`) +
'`),Pt&&(M=!0,$+=`';
`+Pt+`;
__p += '`),Ee&&($+=`' +
((__t = (`+Ee+`)) == null ? '' : __t) +
'`),B=nn+oe.length,oe}),$+=`';
`;var ie=Ve.call(l,"variable")&&l.variable;if(!ie)$=`with (obj) {
`+$+`
}
`;else if(hN.test(ie))throw new ae(c);$=(M?$.replace(Se,""):$).replace(ht,"$1").replace(zt,"$1;"),$="function("+(ie||"obj")+`) {
`+(ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$+`return __p
}`;var me=by(function(){return Ae(k,Z+"return "+$).apply(t,S)});if(me.source=$,Ou(me))throw me;return me}function VP(s){return Ie(s).toLowerCase()}function $P(s){return Ie(s).toUpperCase()}function FP(s,l,f){if(s=Ie(s),s&&(f||l===t))return Tm(s);if(!s||!(l=Qt(l)))return s;var g=_n(s),v=_n(l),k=Om(g,v),S=Nm(g,v)+1;return Vr(g,k,S).join("")}function zP(s,l,f){if(s=Ie(s),s&&(f||l===t))return s.slice(0,Am(s)+1);if(!s||!(l=Qt(l)))return s;var g=_n(s),v=Nm(g,_n(l))+1;return Vr(g,0,v).join("")}function HP(s,l,f){if(s=Ie(s),s&&(f||l===t))return s.replace(Oc,"");if(!s||!(l=Qt(l)))return s;var g=_n(s),v=Om(g,_n(l));return Vr(g,v).join("")}function WP(s,l){var f=we,g=Pe;if(We(l)){var v="separator"in l?l.separator:v;f="length"in l?de(l.length):f,g="omission"in l?Qt(l.omission):g}s=Ie(s);var k=s.length;if(Ui(s)){var S=_n(s);k=S.length}if(f>=k)return s;var T=f-ji(g);if(T<1)return g;var M=S?Vr(S,0,T).join(""):s.slice(0,T);if(v===t)return M+g;if(S&&(T+=M.length-T),Nu(v)){if(s.slice(T).search(v)){var B,V=M;for(v.global||(v=jc(v.source,Ie(Gh.exec(v))+"g")),v.lastIndex=0;B=v.exec(V);)var $=B.index;M=M.slice(0,$===t?T:$)}}else if(s.indexOf(Qt(v),T)!=T){var U=M.lastIndexOf(v);U>-1&&(M=M.slice(0,U))}return M+g}function UP(s){return s=Ie(s),s&&tr.test(s)?s.replace(er,vM):s}var jP=Zi(function(s,l,f){return s+(f?" ":"")+l.toUpperCase()}),Du=vg("toUpperCase");function yy(s,l,f){return s=Ie(s),l=f?t:l,l===t?hM(s)?kM(s):oM(s):s.match(l)||[]}var by=ge(function(s,l){try{return Yt(s,t,l)}catch(f){return Ou(f)?f:new ae(f)}}),KP=sr(function(s,l){return dn(l,function(f){f=jn(f),ir(s,f,Cu(s[f],s))}),s});function qP(s){var l=s==null?0:s.length,f=re();return s=l?He(s,function(g){if(typeof g[1]!="function")throw new pn(a);return[f(g[0]),g[1]]}):[],ge(function(g){for(var v=-1;++v<l;){var k=s[v];if(Yt(k[0],this,g))return Yt(k[1],this,g)}})}function JP(s){return vA(mn(s,m))}function Ru(s){return function(){return s}}function GP(s,l){return s==null||s!==s?l:s}var XP=xg(),YP=xg(!0);function jt(s){return s}function Iu(s){return Ym(typeof s=="function"?s:mn(s,m))}function ZP(s){return Qm(mn(s,m))}function QP(s,l){return eg(s,mn(l,m))}var eB=ge(function(s,l){return function(f){return Qo(f,s,l)}}),tB=ge(function(s,l){return function(f){return Qo(s,f,l)}});function Pu(s,l,f){var g=ut(l),v=Ea(l,g);f==null&&!(We(l)&&(v.length||!g.length))&&(f=l,l=s,s=this,v=Ea(l,ut(l)));var k=!(We(f)&&"chain"in f)||!!f.chain,S=lr(s);return dn(v,function(T){var M=l[T];s[T]=M,S&&(s.prototype[T]=function(){var B=this.__chain__;if(k||B){var V=s(this.__wrapped__),$=V.__actions__=Ht(this.__actions__);return $.push({func:M,args:arguments,thisArg:s}),V.__chain__=B,V}return M.apply(s,Dr([this.value()],arguments))})}),s}function nB(){return mt._===this&&(mt._=OM),this}function Bu(){}function rB(s){return s=de(s),ge(function(l){return tg(l,s)})}var iB=pu(He),oB=pu(km),sB=pu(Vc);function vy(s){return wu(s)?$c(jn(s)):BA(s)}function aB(s){return function(l){return s==null?t:si(s,l)}}var lB=Sg(),cB=Sg(!0);function Lu(){return[]}function Vu(){return!1}function uB(){return{}}function fB(){return""}function dB(){return!0}function pB(s,l){if(s=de(s),s<1||s>De)return[];var f=qe,g=St(s,qe);l=re(l),s-=qe;for(var v=Hc(g,l);++f<s;)l(f);return v}function hB(s){return ce(s)?He(s,jn):en(s)?[s]:Ht($g(Ie(s)))}function mB(s){var l=++CM;return Ie(s)+l}var gB=Ma(function(s,l){return s+l},0),yB=hu("ceil"),bB=Ma(function(s,l){return s/l},1),vB=hu("floor");function wB(s){return s&&s.length?Sa(s,jt,Qc):t}function xB(s,l){return s&&s.length?Sa(s,re(l,2),Qc):t}function kB(s){return _m(s,jt)}function SB(s,l){return _m(s,re(l,2))}function EB(s){return s&&s.length?Sa(s,jt,ru):t}function _B(s,l){return s&&s.length?Sa(s,re(l,2),ru):t}var CB=Ma(function(s,l){return s*l},1),TB=hu("round"),OB=Ma(function(s,l){return s-l},0);function NB(s){return s&&s.length?zc(s,jt):0}function MB(s,l){return s&&s.length?zc(s,re(l,2)):0}return x.after=ZR,x.ary=Xg,x.assign=$I,x.assignIn=uy,x.assignInWith=Wa,x.assignWith=FI,x.at=zI,x.before=Yg,x.bind=Cu,x.bindAll=KP,x.bindKey=Zg,x.castArray=uI,x.chain=qg,x.chunk=vD,x.compact=wD,x.concat=xD,x.cond=qP,x.conforms=JP,x.constant=Ru,x.countBy=NR,x.create=HI,x.curry=Qg,x.curryRight=ey,x.debounce=ty,x.defaults=WI,x.defaultsDeep=UI,x.defer=QR,x.delay=eI,x.difference=kD,x.differenceBy=SD,x.differenceWith=ED,x.drop=_D,x.dropRight=CD,x.dropRightWhile=TD,x.dropWhile=OD,x.fill=ND,x.filter=AR,x.flatMap=IR,x.flatMapDeep=PR,x.flatMapDepth=BR,x.flatten=Wg,x.flattenDeep=MD,x.flattenDepth=AD,x.flip=tI,x.flow=XP,x.flowRight=YP,x.fromPairs=DD,x.functions=YI,x.functionsIn=ZI,x.groupBy=LR,x.initial=ID,x.intersection=PD,x.intersectionBy=BD,x.intersectionWith=LD,x.invert=eP,x.invertBy=tP,x.invokeMap=$R,x.iteratee=Iu,x.keyBy=FR,x.keys=ut,x.keysIn=Ut,x.map=La,x.mapKeys=rP,x.mapValues=iP,x.matches=ZP,x.matchesProperty=QP,x.memoize=$a,x.merge=oP,x.mergeWith=fy,x.method=eB,x.methodOf=tB,x.mixin=Pu,x.negate=Fa,x.nthArg=rB,x.omit=sP,x.omitBy=aP,x.once=nI,x.orderBy=zR,x.over=iB,x.overArgs=rI,x.overEvery=oB,x.overSome=sB,x.partial=Tu,x.partialRight=ny,x.partition=HR,x.pick=lP,x.pickBy=dy,x.property=vy,x.propertyOf=aB,x.pull=zD,x.pullAll=jg,x.pullAllBy=HD,x.pullAllWith=WD,x.pullAt=UD,x.range=lB,x.rangeRight=cB,x.rearg=iI,x.reject=jR,x.remove=jD,x.rest=oI,x.reverse=Eu,x.sampleSize=qR,x.set=uP,x.setWith=fP,x.shuffle=JR,x.slice=KD,x.sortBy=YR,x.sortedUniq=QD,x.sortedUniqBy=eR,x.split=IP,x.spread=sI,x.tail=tR,x.take=nR,x.takeRight=rR,x.takeRightWhile=iR,x.takeWhile=oR,x.tap=wR,x.throttle=aI,x.thru=Ba,x.toArray=ay,x.toPairs=py,x.toPairsIn=hy,x.toPath=hB,x.toPlainObject=cy,x.transform=dP,x.unary=lI,x.union=sR,x.unionBy=aR,x.unionWith=lR,x.uniq=cR,x.uniqBy=uR,x.uniqWith=fR,x.unset=pP,x.unzip=_u,x.unzipWith=Kg,x.update=hP,x.updateWith=mP,x.values=to,x.valuesIn=gP,x.without=dR,x.words=yy,x.wrap=cI,x.xor=pR,x.xorBy=hR,x.xorWith=mR,x.zip=gR,x.zipObject=yR,x.zipObjectDeep=bR,x.zipWith=vR,x.entries=py,x.entriesIn=hy,x.extend=uy,x.extendWith=Wa,Pu(x,x),x.add=gB,x.attempt=by,x.camelCase=wP,x.capitalize=my,x.ceil=yB,x.clamp=yP,x.clone=fI,x.cloneDeep=pI,x.cloneDeepWith=hI,x.cloneWith=dI,x.conformsTo=mI,x.deburr=gy,x.defaultTo=GP,x.divide=bB,x.endsWith=xP,x.eq=Tn,x.escape=kP,x.escapeRegExp=SP,x.every=MR,x.find=DR,x.findIndex=zg,x.findKey=jI,x.findLast=RR,x.findLastIndex=Hg,x.findLastKey=KI,x.floor=vB,x.forEach=Jg,x.forEachRight=Gg,x.forIn=qI,x.forInRight=JI,x.forOwn=GI,x.forOwnRight=XI,x.get=Mu,x.gt=gI,x.gte=yI,x.has=QI,x.hasIn=Au,x.head=Ug,x.identity=jt,x.includes=VR,x.indexOf=RD,x.inRange=bP,x.invoke=nP,x.isArguments=ci,x.isArray=ce,x.isArrayBuffer=bI,x.isArrayLike=Wt,x.isArrayLikeObject=Xe,x.isBoolean=vI,x.isBuffer=$r,x.isDate=wI,x.isElement=xI,x.isEmpty=kI,x.isEqual=SI,x.isEqualWith=EI,x.isError=Ou,x.isFinite=_I,x.isFunction=lr,x.isInteger=ry,x.isLength=za,x.isMap=iy,x.isMatch=CI,x.isMatchWith=TI,x.isNaN=OI,x.isNative=NI,x.isNil=AI,x.isNull=MI,x.isNumber=oy,x.isObject=We,x.isObjectLike=je,x.isPlainObject=ss,x.isRegExp=Nu,x.isSafeInteger=DI,x.isSet=sy,x.isString=Ha,x.isSymbol=en,x.isTypedArray=eo,x.isUndefined=RI,x.isWeakMap=II,x.isWeakSet=PI,x.join=VD,x.kebabCase=EP,x.last=yn,x.lastIndexOf=$D,x.lowerCase=_P,x.lowerFirst=CP,x.lt=BI,x.lte=LI,x.max=wB,x.maxBy=xB,x.mean=kB,x.meanBy=SB,x.min=EB,x.minBy=_B,x.stubArray=Lu,x.stubFalse=Vu,x.stubObject=uB,x.stubString=fB,x.stubTrue=dB,x.multiply=CB,x.nth=FD,x.noConflict=nB,x.noop=Bu,x.now=Va,x.pad=TP,x.padEnd=OP,x.padStart=NP,x.parseInt=MP,x.random=vP,x.reduce=WR,x.reduceRight=UR,x.repeat=AP,x.replace=DP,x.result=cP,x.round=TB,x.runInContext=O,x.sample=KR,x.size=GR,x.snakeCase=RP,x.some=XR,x.sortedIndex=qD,x.sortedIndexBy=JD,x.sortedIndexOf=GD,x.sortedLastIndex=XD,x.sortedLastIndexBy=YD,x.sortedLastIndexOf=ZD,x.startCase=PP,x.startsWith=BP,x.subtract=OB,x.sum=NB,x.sumBy=MB,x.template=LP,x.times=pB,x.toFinite=cr,x.toInteger=de,x.toLength=ly,x.toLower=VP,x.toNumber=bn,x.toSafeInteger=VI,x.toString=Ie,x.toUpper=$P,x.trim=FP,x.trimEnd=zP,x.trimStart=HP,x.truncate=WP,x.unescape=UP,x.uniqueId=mB,x.upperCase=jP,x.upperFirst=Du,x.each=Jg,x.eachRight=Gg,x.first=Ug,Pu(x,function(){var s={};return Wn(x,function(l,f){Ve.call(x.prototype,f)||(s[f]=l)}),s}(),{chain:!1}),x.VERSION=r,dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){x[s].placeholder=x}),dn(["drop","take"],function(s,l){xe.prototype[s]=function(f){f=f===t?1:ot(de(f),0);var g=this.__filtered__&&!l?new xe(this):this.clone();return g.__filtered__?g.__takeCount__=St(f,g.__takeCount__):g.__views__.push({size:St(f,qe),type:s+(g.__dir__<0?"Right":"")}),g},xe.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),dn(["filter","map","takeWhile"],function(s,l){var f=l+1,g=f==ct||f==Ke;xe.prototype[s]=function(v){var k=this.clone();return k.__iteratees__.push({iteratee:re(v,3),type:f}),k.__filtered__=k.__filtered__||g,k}}),dn(["head","last"],function(s,l){var f="take"+(l?"Right":"");xe.prototype[s]=function(){return this[f](1).value()[0]}}),dn(["initial","tail"],function(s,l){var f="drop"+(l?"":"Right");xe.prototype[s]=function(){return this.__filtered__?new xe(this):this[f](1)}}),xe.prototype.compact=function(){return this.filter(jt)},xe.prototype.find=function(s){return this.filter(s).head()},xe.prototype.findLast=function(s){return this.reverse().find(s)},xe.prototype.invokeMap=ge(function(s,l){return typeof s=="function"?new xe(this):this.map(function(f){return Qo(f,s,l)})}),xe.prototype.reject=function(s){return this.filter(Fa(re(s)))},xe.prototype.slice=function(s,l){s=de(s);var f=this;return f.__filtered__&&(s>0||l<0)?new xe(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),l!==t&&(l=de(l),f=l<0?f.dropRight(-l):f.take(l-s)),f)},xe.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},xe.prototype.toArray=function(){return this.take(qe)},Wn(xe.prototype,function(s,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),g=/^(?:head|last)$/.test(l),v=x[g?"take"+(l=="last"?"Right":""):l],k=g||/^find/.test(l);!v||(x.prototype[l]=function(){var S=this.__wrapped__,T=g?[1]:arguments,M=S instanceof xe,B=T[0],V=M||ce(S),$=function(be){var Ee=v.apply(x,Dr([be],T));return g&&U?Ee[0]:Ee};V&&f&&typeof B=="function"&&B.length!=1&&(M=V=!1);var U=this.__chain__,Z=!!this.__actions__.length,ie=k&&!U,me=M&&!Z;if(!k&&V){S=me?S:new xe(this);var oe=s.apply(S,T);return oe.__actions__.push({func:Ba,args:[$],thisArg:t}),new hn(oe,U)}return ie&&me?s.apply(this,T):(oe=this.thru($),ie?g?oe.value()[0]:oe.value():oe)})}),dn(["pop","push","shift","sort","splice","unshift"],function(s){var l=la[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);x.prototype[s]=function(){var v=arguments;if(g&&!this.__chain__){var k=this.value();return l.apply(ce(k)?k:[],v)}return this[f](function(S){return l.apply(ce(S)?S:[],v)})}}),Wn(xe.prototype,function(s,l){var f=x[l];if(f){var g=f.name+"";Ve.call(Gi,g)||(Gi[g]=[]),Gi[g].push({name:l,func:f})}}),Gi[Na(t,N).name]=[{name:"wrapper",func:t}],xe.prototype.clone=UM,xe.prototype.reverse=jM,xe.prototype.value=KM,x.prototype.at=xR,x.prototype.chain=kR,x.prototype.commit=SR,x.prototype.next=ER,x.prototype.plant=CR,x.prototype.reverse=TR,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=OR,x.prototype.first=x.prototype.head,Ko&&(x.prototype[Ko]=_R),x},Ki=SM();ti?((ti.exports=Ki)._=Ki,Ic._=Ki):mt._=Ki}).call(lo)})(_t,_t.exports);const _b={name:"LaravelCmsAdminPagesListItem",props:["component"],setup(n,{emit:e}){async function t(){e("delete",n.component.id)}return{onDeleteClick:t}}};function Cb(n,e,t,r,i,o){const a=p.resolveComponent("router-link");return p.openBlock(),p.createElementBlock("tr",null,[p.createElementVNode("td",null,p.toDisplayString(t.component.id),1),p.createElementVNode("td",null,[p.createVNode(a,{to:"/components/"+t.component.id},{default:p.withCtx(()=>[p.createTextVNode(p.toDisplayString(t.component.component),1)]),_:1},8,["to"])]),p.createElementVNode("td",null,[p.createElementVNode("button",{onClick:e[0]||(e[0]=p.withModifiers((...c)=>r.onDeleteClick&&r.onDeleteClick(...c),["prevent"])),class:"btn btn-link text-error"}," Delete ")])])}const Tb=ye(_b,[["render",Cb]]),Ob={name:"LaravelCmsAdminComponentAddForm",components:{},emits:["add"],setup(n,{emit:e}){const t=p.ref({});async function r(){!this.valid||(e("add",t.value),t.value={})}const i=p.computed(()=>t.value.name!=null&&t.value.identifier!=null);return{newPath:t,onSubmit:r,valid:i}}},Nb={class:"form-group form-inline mx-2"},Mb=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),Ab={class:"form-group form-inline mx-2"},Db=p.createElementVNode("label",{class:"form-label",for:"identifier"},"Identifier",-1),Rb=["disabled"];function Ib(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("form",{onSubmit:e[2]||(e[2]=p.withModifiers((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"]))},[p.createElementVNode("fieldset",null,[p.createElementVNode("div",Nb,[Mb,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>r.newPath.name=a)},null,512),[[p.vModelText,r.newPath.name]])]),p.createElementVNode("div",Ab,[Db,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"identifier",id:"identifier","onUpdate:modelValue":e[1]||(e[1]=a=>r.newPath.identifier=a)},null,512),[[p.vModelText,r.newPath.identifier]])]),p.createElementVNode("button",{class:"btn btn-primary mx-2",disabled:!r.valid}," Add Path ",8,Rb)])],32)}const Pb={name:"LaravelCmsAdminComponents",components:{ListItem:Tb,AddForm:ye(Ob,[["render",Ib]])},setup(n,{emit:e}){const t=p.ref([]),r=p.ref(!1);async function i(){let u="/api/cms-components?"+new URLSearchParams({"q[]":["is_global[eq]=TRUE"]}).toString();const h=await(await fetch(u)).json();t.value=h.data,r.value=!0}async function o(u){const d=await fetch("/api/cms-components",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(template)}),h=await d.json();if(!d.ok){ue({title:h.message,type:"error"});return}t.value.push(h.data),ue({title:"New component added.",type:"success"}),t.value.push(Object.assign(u,h.data))}async function a(u){if(!(await fetch("/api/cms-components/"+u,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Template deleted.",type:"warn"});var h=t.value.map(m=>m.id).indexOf(u);~h&&t.value.splice(h,1)}return i(),{componentsSorted:p.computed(()=>_t.exports.sortBy(t.value||[],u=>u.component)),loaded:r,onAdd:o,onDelete:a}}},Bb=p.createElementVNode("h2",null,"Components",-1),Lb={key:0,class:"table"},Vb={key:1},$b={key:2};function Fb(n,e,t,r,i,o){const a=p.resolveComponent("add-form"),c=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock(p.Fragment,null,[Bb,p.createVNode(a,{onAdd:r.onAdd},null,8,["onAdd"]),r.loaded&&r.componentsSorted.length?(p.openBlock(),p.createElementBlock("table",Lb,[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.componentsSorted,u=>(p.openBlock(),p.createBlock(c,{key:u.id,component:u,onDelete:r.onDelete},null,8,["component","onDelete"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",Vb,"There are no components.")):(p.openBlock(),p.createElementBlock("p",$b,"Loading..."))],64)}const zb=ye(Pb,[["render",Fb]]),Hb={};function Wb(n,e){return null}const Ub=ye(Hb,[["render",Wb]]),jb={name:"LaravelCmsAdminMediaAddForm",components:{},emits:["add"],setup(n,{emit:e}){const t=p.ref({});async function r(){!this.valid||(e("add",t.value),t.value={})}function i(){t.value.file="Set"}const o=p.computed(()=>t.value.caption!=null&&t.value.file!=null);return{newMedia:t,onSubmit:r,onFileChanged:i,valid:o}}},Kb={class:"form-group form-inline mx-2"},qb=p.createElementVNode("label",{class:"form-label",for:"caption"},"Caption",-1),Jb={class:"form-group form-inline mx-2"},Gb=p.createElementVNode("label",{class:"form-label",for:"file"},"File",-1),Xb=["disabled"];function Yb(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("form",{onSubmit:e[2]||(e[2]=p.withModifiers((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"]))},[p.createElementVNode("fieldset",null,[p.createElementVNode("div",Kb,[qb,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"caption",id:"caption","onUpdate:modelValue":e[0]||(e[0]=a=>r.newMedia.caption=a)},null,512),[[p.vModelText,r.newMedia.caption]])]),p.createElementVNode("div",Jb,[Gb,p.createElementVNode("input",{class:"form-input",type:"file",name:"file",id:"file",onChange:e[1]||(e[1]=(...a)=>r.onFileChanged&&r.onFileChanged(...a))},null,32)]),p.createElementVNode("button",{class:"btn btn-primary mx-2",disabled:!r.valid}," Add Media ",8,Xb)])],32)}const Zb={name:"LaravelCmsAdminMedia",components:{ListItem:Ub,AddForm:ye(jb,[["render",Yb]])},setup(n,{emit:e}){const t=p.ref([]),r=p.ref(!1);async function i(){const d=await(await fetch("/api/cms-media")).json();t.value=d.data,r.value=!0}async function o(u){const d=await fetch("/api/cms-media",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(template)}),h=await d.json();if(!d.ok){ue({title:h.message,type:"error"});return}t.value.push(h.data),ue({title:"New path added.",type:"success"}),paths.value.push(Object.assign(u,h.data))}async function a(u){if(!(await fetch("/api/cms-media/"+u,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Media deleted.",type:"warn"});var h=paths.value.map(m=>m.id).indexOf(u);~h&&paths.value.splice(h,1)}return i(),{mediaSorted:p.computed(()=>_t.exports.sortBy(t.value||[],u=>u.created_at)),loaded:r,onAdd:o,onDelete:a}}},Qb=p.createElementVNode("h2",null,"Media",-1),e1={key:0,class:"table"},t1={key:1},n1={key:2};function r1(n,e,t,r,i,o){const a=p.resolveComponent("add-form"),c=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock(p.Fragment,null,[Qb,p.createVNode(a,{onAdd:r.onAdd},null,8,["onAdd"]),r.loaded&&r.mediaSorted.length?(p.openBlock(),p.createElementBlock("table",e1,[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.mediaSorted,u=>(p.openBlock(),p.createBlock(c,{key:u.id,media:u,onDelete:r.onDelete},null,8,["media","onDelete"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",t1,"There is no uploaded media.")):(p.openBlock(),p.createElementBlock("p",n1,"Loading..."))],64)}const i1=ye(Zb,[["render",r1]]),o1={name:"LaravelCmsAdminPagesListItem",props:["page"],setup(n,{emit:e}){async function t(){e("delete",n.page.id)}return{onDeleteClick:t}}};function s1(n,e,t,r,i,o){var c;const a=p.resolveComponent("router-link");return p.openBlock(),p.createElementBlock("tr",null,[p.createElementVNode("td",null,p.toDisplayString(t.page.id),1),p.createElementVNode("td",null,[p.createVNode(a,{to:"/pages/"+t.page.id},{default:p.withCtx(()=>[p.createTextVNode(p.toDisplayString(t.page.name),1)]),_:1},8,["to"])]),p.createElementVNode("td",null,p.toDisplayString(t.page.title),1),p.createElementVNode("td",null,p.toDisplayString(t.page.path),1),p.createElementVNode("td",null,p.toDisplayString((c=t.page.template)==null?void 0:c.name),1),p.createElementVNode("td",null,[p.createElementVNode("button",{onClick:e[0]||(e[0]=p.withModifiers((...u)=>r.onDeleteClick&&r.onDeleteClick(...u),["prevent"])),class:"btn btn-link text-error"}," Delete ")])])}const a1=ye(o1,[["render",s1]]),l1={name:"LaravelCmsAdminPageAddForm",components:{},emits:["add"],setup(n,{emit:e}){const t=p.ref({}),r=p.ref([]);async function i(){const d=await(await fetch("/api/cms-templates")).json();r.value=d.data}async function o(){!this.valid||(e("add",t.value),t.value={})}function a(){t.value.path||(t.value.path="/"+t.value.title.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"))}i();const c=p.computed(()=>t.value.name!=null&&t.value.title!=null&&t.value.path!=null&&t.value.cms_template_id!=null);return{newPage:t,templates:r,onSubmit:o,onTitleBlur:a,valid:c}}},c1={class:"form-group form-inline mx-2"},u1=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),f1={class:"form-group form-inline mx-2"},d1=p.createElementVNode("label",{class:"form-label",for:"title"},"Title",-1),p1={class:"form-group form-inline mx-2"},h1=p.createElementVNode("label",{class:"form-label",for:"template"},"Template",-1),m1=p.createElementVNode("option",null,null,-1),g1=["value"],y1={class:"form-group form-inline mx-2"},b1=p.createElementVNode("label",{class:"form-label",for:"path"},"Path",-1),v1=["disabled"],w1={key:1};function x1(n,e,t,r,i,o){const a=p.resolveComponent("router-link");return r.templates.length?(p.openBlock(),p.createElementBlock("form",{key:0,onSubmit:e[5]||(e[5]=p.withModifiers((...c)=>r.onSubmit&&r.onSubmit(...c),["prevent"]))},[p.createElementVNode("fieldset",null,[p.createElementVNode("div",c1,[u1,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=c=>r.newPage.name=c)},null,512),[[p.vModelText,r.newPage.name]])]),p.createElementVNode("div",f1,[d1,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"title",id:"title",onBlur:e[1]||(e[1]=(...c)=>r.onTitleBlur&&r.onTitleBlur(...c)),"onUpdate:modelValue":e[2]||(e[2]=c=>r.newPage.title=c)},null,544),[[p.vModelText,r.newPage.title]])]),p.createElementVNode("div",p1,[h1,p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"template",id:"template","onUpdate:modelValue":e[3]||(e[3]=c=>r.newPage.cms_template_id=c)},[m1,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.templates,c=>(p.openBlock(),p.createElementBlock("option",{key:c.id,value:c.id},p.toDisplayString(c.name),9,g1))),128))],512),[[p.vModelSelect,r.newPage.cms_template_id,void 0,{number:!0}]])]),p.createElementVNode("div",y1,[b1,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"path",id:"path","onUpdate:modelValue":e[4]||(e[4]=c=>r.newPage.path=c)},null,512),[[p.vModelText,r.newPage.path]])]),p.createElementVNode("button",{class:"mx-2 btn btn-link",disabled:!r.valid}," Add Page ",8,v1)])],32)):(p.openBlock(),p.createElementBlock("p",w1,[p.createTextVNode(" You must set up "),p.createVNode(a,{to:"/templates"},{default:p.withCtx(()=>[p.createTextVNode("templates")]),_:1}),p.createTextVNode(" before adding a page. ")]))}const k1={name:"LaravelCmsAdminPages",components:{ListItem:a1,AddForm:ye(l1,[["render",x1]])},setup(){const n=xf(),e=p.ref([]),t=p.ref(!1);async function r(){let c="/api/cms-pages?"+new URLSearchParams({"include[]":["template"]}).toString();const d=await(await fetch(c)).json();e.value=d.data,t.value=!0}async function i(c){const u=await fetch("/api/cms-pages",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(c)}),d=await u.json();if(!u.ok){ue({title:d.message,type:"error"});return}e.value.push(d.data),ue({title:"New page created.",type:"success"}),n.push("/pages/"+d.data.id)}async function o(c){if(!(await fetch("/api/cms-pages/"+c,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Page deleted.",type:"warn"});var d=e.value.map(h=>h.id).indexOf(c);~d&&e.value.splice(d,1)}return r(),{pagesSorted:p.computed(()=>_t.exports.sortBy(e.value||[],c=>c.name)),loaded:t,onAdd:i,onDelete:o}}},S1=p.createElementVNode("h2",null,"Add Page",-1),E1=p.createElementVNode("h2",null,"Existing Pages",-1),_1={key:0,class:"table"},C1=p.createElementVNode("tr",null,[p.createElementVNode("th",null,"Id"),p.createElementVNode("th",null,"Name"),p.createElementVNode("th",null,"Title"),p.createElementVNode("th",null,"Path"),p.createElementVNode("th",null,"Template"),p.createElementVNode("th")],-1),T1={key:1},O1={key:2};function N1(n,e,t,r,i,o){const a=p.resolveComponent("add-form"),c=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock(p.Fragment,null,[S1,p.createVNode(a,{onAdd:r.onAdd},null,8,["onAdd"]),E1,r.loaded&&r.pagesSorted.length?(p.openBlock(),p.createElementBlock("table",_1,[C1,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.pagesSorted,u=>(p.openBlock(),p.createBlock(c,{key:u.id,page:u,onDelete:r.onDelete},null,8,["page","onDelete"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",T1,"There are no pages.")):(p.openBlock(),p.createElementBlock("p",O1,"Loading..."))],64)}const _f=ye(k1,[["render",N1]]),M1={name:"LaravelCmsAdminPagePathsListItem",props:["path"],setup(n,{emit:e}){async function t(){e("delete",n.path.id)}return{onDeleteClick:t}}};function A1(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("tr",null,[p.createElementVNode("td",null,p.toDisplayString(t.path.id),1),p.createElementVNode("td",null,p.toDisplayString(t.path.path),1),p.createElementVNode("td",null,[p.createElementVNode("button",{onClick:e[0]||(e[0]=p.withModifiers((...a)=>r.onDeleteClick&&r.onDeleteClick(...a),["prevent"])),class:"btn btn-link text-error"}," Delete ")])])}const D1=ye(M1,[["render",A1]]),R1={name:"LaravelCmsAdminPagePathsAddForm",components:{},emits:["add"],setup(n,{emit:e}){const t=p.ref({});async function r(){!this.valid||(e("add",t.value),t.value={})}const i=p.computed(()=>t.value.path!=null);return{newPath:t,onSubmit:r,valid:i}}},I1={class:"form-group form-inline mx-2"},P1=p.createElementVNode("label",{class:"form-label",for:"path"},"Path",-1),B1=["disabled"];function L1(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("form",{onSubmit:e[1]||(e[1]=p.withModifiers((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"]))},[p.createElementVNode("fieldset",null,[p.createElementVNode("div",I1,[P1,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"path",id:"path","onUpdate:modelValue":e[0]||(e[0]=a=>r.newPath.path=a)},null,512),[[p.vModelText,r.newPath.path]])]),p.createElementVNode("button",{class:"btn btn-primary mx-2",disabled:!r.valid}," Add Path ",8,B1)])],32)}const V1={name:"LaravelCmsAdminPaths",components:{ListItem:D1,AddForm:ye(R1,[["render",L1]])},props:["page"],setup(n,{emit:e}){const t=p.ref([]),r=p.ref(!1);async function i(){const d=await(await fetch("/api/cms-paths?cms_page_id="+n.page.id)).json();t.value=d.data,r.value=!0}async function o(u){u.cms_page_id=n.page.id;const d=await fetch("/api/cms-paths",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(u)}),h=await d.json();if(!d.ok){ue({title:h.message,type:"error"});return}ue({title:"New path added.",type:"success"}),t.value.push(Object.assign(u,h.data))}async function a(u){if(!(await fetch("/api/cms-paths/"+u,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Path deleted.",type:"warn"});var h=t.value.map(m=>m.id).indexOf(u);~h&&t.value.splice(h,1)}return i(),{pathsSorted:p.computed(()=>_t.exports.sortBy(t.value||[],u=>u.path)),loaded:r,onAdd:o,onDelete:a}}},$1={key:0,class:"table"},F1=p.createElementVNode("tr",null,[p.createElementVNode("th",null,"Id"),p.createElementVNode("th",{colspan:"2"},"Path")],-1),z1={key:1},H1={key:2};function W1(n,e,t,r,i,o){const a=p.resolveComponent("add-form"),c=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock(p.Fragment,null,[p.createVNode(a,{onAdd:r.onAdd},null,8,["onAdd"]),r.loaded&&r.pathsSorted.length?(p.openBlock(),p.createElementBlock("table",$1,[F1,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.pathsSorted,u=>(p.openBlock(),p.createBlock(c,{key:u.id,path:u,onDelete:r.onDelete},null,8,["path","onDelete"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",z1,"There are no paths.")):(p.openBlock(),p.createElementBlock("p",H1,"Loading..."))],64)}const U1=ye(V1,[["render",W1]]),j1={name:"LaravelCmsAdminPageComponent",props:["component"],components:{},emits:["edit"],setup(n,{emit:e}){function t(){e("edit",n.component)}function r(){e("delete",n.component)}const i=p.computed(()=>n.component.html);return{onEditClick:t,onDeleteClick:r,preview:i}}},K1={class:"card mb-2"},q1={class:"card-header"},J1={class:"card-title h5"},G1={class:"card-subtitle text-gray"},X1=["innerHTML"],Y1={class:"card-footer"};function Z1(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("div",K1,[p.createElementVNode("div",q1,[p.createElementVNode("div",J1,p.toDisplayString(t.component.name),1),p.createElementVNode("div",G1,p.toDisplayString(t.component.view),1)]),p.createElementVNode("div",{class:"card-body",innerHTML:r.preview},null,8,X1),p.createElementVNode("div",Y1,[p.createElementVNode("button",{class:"btn btn-link",onClick:e[0]||(e[0]=p.withModifiers((...a)=>r.onEditClick&&r.onEditClick(...a),["prevent"]))}," Edit "),p.createElementVNode("button",{class:"btn btn-link text-error float-right",onClick:e[1]||(e[1]=p.withModifiers((...a)=>r.onDeleteClick&&r.onDeleteClick(...a),["prevent"]))}," Delete ")])])}const Cf=ye(j1,[["render",Z1]]),Q1={name:"LaravelCmsAdminPageUnsortedComponents",components:{Component:Cf},props:["templateSections","components"],emits:["select","delete"],setup(n,{emit:e}){function t(i){e("select",i)}function r(i){e("delete",i)}return{onEdit:t,onDelete:r}}},ev=p.createElementVNode("p",null,"Unsorted Components",-1),tv={class:"table mb-2"};function nv(n,e,t,r,i,o){const a=p.resolveComponent("component");return p.openBlock(),p.createElementBlock(p.Fragment,null,[ev,p.createElementVNode("table",tv,[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(t.components,c=>(p.openBlock(),p.createBlock(a,{key:c.id,component:c,onEdit:r.onEdit,onDelete:r.onDelete},null,8,["component","onEdit","onDelete"]))),128))])],64)}const rv=ye(Q1,[["render",nv]]),iv={name:"LaravelCmsAdminPageTemplateSection",props:["templateSection","components"],components:{Component:Cf},setup(n,{emit:e}){async function t(o){e("select",o)}function r(o){e("delete",o)}return{includedComponents:p.computed(()=>{const o=_t.exports.filter(n.components,a=>a.cms_template_section_id==n.templateSection.id);return _t.exports.sortBy(o,"sort_order")}),onEdit:t,onDelete:r}}};function ov(n,e,t,r,i,o){const a=p.resolveComponent("component");return p.openBlock(),p.createElementBlock("fieldset",null,[p.createElementVNode("legend",null," Section: "+p.toDisplayString(t.templateSection.name)+" "+p.toDisplayString(t.templateSection.id),1),(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.includedComponents,c=>(p.openBlock(),p.createBlock(a,{key:c.id,component:c,onEdit:r.onEdit,onDelete:r.onDelete},null,8,["component","onEdit","onDelete"]))),128))])}const sv={name:"LaravelCmsAdminPageTemplateSections",components:{ListItem:ye(iv,[["render",ov]])},props:["templateSections","components"],setup(n,{emit:e}){async function t(i){e("select",i)}function r(i){e("delete",i)}return{onSelect:t,onDelete:r}}};function av(n,e,t,r,i,o){const a=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock("form",null,[p.createElementVNode("fieldset",null,[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(t.templateSections,c=>(p.openBlock(),p.createBlock(a,{key:c.id,"template-section":c,components:t.components,onSelect:r.onSelect,onDelete:r.onDelete},null,8,["template-section","components","onSelect","onDelete"]))),128))])])}const lv=ye(sv,[["render",av]]);function ft(n){this.content=n}ft.prototype={constructor:ft,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new ft(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ft(t)},addToStart:function(n,e){return new ft([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ft(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new ft(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=ft.from(n),n.size?new ft(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ft.from(n),n.size?new ft(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ft.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}},ft.from=function(n){if(n instanceof ft)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ft(e)};function Tf(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)t++;return t}if(i.content.size||o.content.size){let a=Tf(i.content,o.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function Of(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let a=n.child(--i),c=e.child(--o),u=a.nodeSize;if(a==c){t-=u,r-=u;continue}if(!a.sameMarkup(c))return{a:t,b:r};if(a.isText&&a.text!=c.text){let d=0,h=Math.min(a.text.length,c.text.length);for(;d<h&&a.text[a.text.length-d-1]==c.text[c.text.length-d-1];)d++,t--,r--;return{a:t,b:r}}if(a.content.size||c.content.size){let d=Of(a.content,c.content,t-1,r-1);if(d)return d}t-=u,r-=u}}class F{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let a=0,c=0;c<t;a++){let u=this.content[a],d=c+u.nodeSize;if(d>e&&r(u,i+c,o||null,a)!==!1&&u.content.size){let h=c+1;u.nodesBetween(Math.max(0,e-h),Math.min(u.content.size,t-h),r,i+h)}c=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",a=!0;return this.nodesBetween(e,t,(c,u)=>{c.isText?(o+=c.text.slice(Math.max(e,u)-u,t-u),a=!r):c.isLeaf?(i?o+=typeof i=="function"?i(c):i:c.type.spec.leafText&&(o+=c.type.spec.leafText(c)),a=!r):!a&&c.isBlock&&(o+=r,a=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new F(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,a=0;a<t;o++){let c=this.content[o],u=a+c.nodeSize;u>e&&((a<e||u>t)&&(c.isText?c=c.cut(Math.max(0,e-a),Math.min(c.text.length,t-a)):c=c.cut(Math.max(0,e-a-1),Math.min(c.content.size,t-a-1))),r.push(c),i+=c.nodeSize),a=u}return new F(r,i)}cutByIndex(e,t){return e==t?F.empty:e==0&&t==this.content.length?this:new F(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new F(i,o)}addToStart(e){return new F([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new F(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Tf(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Of(this,e,t,r)}findIndex(e,t=-1){if(e==0)return ds(0,e);if(e==this.size)return ds(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),a=i+o.nodeSize;if(a>=e)return a==e||t>0?ds(r+1,a):ds(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return F.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new F(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return F.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new F(t||e,r)}static from(e){if(!e)return F.empty;if(e instanceof F)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new F([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}F.empty=new F([],0);const il={index:0,offset:0};function ds(n,e){return il.index=n,il.offset=e,il}function ps(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!ps(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!ps(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class Oe{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ps(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Oe.none;if(e instanceof Oe)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}Oe.none=[];class hs extends Error{}class K{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Mf(this.content,e+this.openStart,t);return r&&new K(r,this.openStart,this.openEnd)}removeBetween(e,t){return new K(Nf(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return K.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new K(F.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new K(e,r,i)}}K.empty=new K(F.empty,0,0);function Nf(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:a,offset:c}=n.findIndex(t);if(i==e||o.isText){if(c!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(Nf(o.content,e-i-1,t-i-1)))}function Mf(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),a=n.maybeChild(i);if(o==e||a.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let c=Mf(a.content,e-o-1,t);return c&&n.replaceChild(i,a.copy(c))}function cv(n,e,t){if(t.openStart>n.depth)throw new hs("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new hs("Inconsistent open depths");return Af(n,e,t,0)}function Af(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=Af(n,e,t,r+1);return o.copy(o.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,c=a.content;return zr(a,c.cut(0,n.parentOffset).append(t.content).append(c.cut(e.parentOffset)))}else{let{start:a,end:c}=uv(t,n);return zr(o,Rf(n,a,c,e,r))}else return zr(o,ms(n,e,r))}function Df(n,e){if(!e.type.compatibleContent(n.type))throw new hs("Cannot join "+e.type.name+" onto "+n.type.name)}function ol(n,e,t){let r=n.node(t);return Df(r,e.node(t)),r}function Fr(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function co(n,e,t,r){let i=(e||n).node(t),o=0,a=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Fr(n.nodeAfter,r),o++));for(let c=o;c<a;c++)Fr(i.child(c),r);e&&e.depth==t&&e.textOffset&&Fr(e.nodeBefore,r)}function zr(n,e){return n.type.checkContent(e),n.copy(e)}function Rf(n,e,t,r,i){let o=n.depth>i&&ol(n,e,i+1),a=r.depth>i&&ol(t,r,i+1),c=[];return co(null,n,i,c),o&&a&&e.index(i)==t.index(i)?(Df(o,a),Fr(zr(o,Rf(n,e,t,r,i+1)),c)):(o&&Fr(zr(o,ms(n,e,i+1)),c),co(e,t,i,c),a&&Fr(zr(a,ms(t,r,i+1)),c)),co(r,null,i,c),new F(c)}function ms(n,e,t){let r=[];if(co(null,n,t,r),n.depth>t){let i=ol(n,e,t+1);Fr(zr(i,ms(n,e,t+1)),r)}return co(e,null,t,r),new F(r)}function uv(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(F.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class uo{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Oe.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new gs(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let a=e;;){let{index:c,offset:u}=a.content.findIndex(o),d=o-u;if(r.push(a,c,i+u),!d||(a=a.child(c),a.isText))break;o=d-1,i+=u+1}return new uo(t,r,o)}static resolveCached(e,t){for(let i=0;i<sl.length;i++){let o=sl[i];if(o.pos==t&&o.doc==e)return o}let r=sl[al]=uo.resolve(e,t);return al=(al+1)%fv,r}}let sl=[],al=0,fv=12;class gs{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const dv=Object.create(null);class Nn{constructor(e,t,r,i=Oe.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||F.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&ps(this.attrs,t||e.defaultAttrs||dv)&&Oe.sameSet(this.marks,r||Oe.none)}copy(e=null){return e==this.content?this:new Nn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Nn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return K.empty;let i=this.resolve(e),o=this.resolve(t),a=r?0:i.sharedDepth(t),c=i.start(a),d=i.node(a).content.cut(i.pos-c,o.pos-c);return new K(d,i.depth-a,o.depth-a)}replace(e,t,r){return cv(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return uo.resolveCached(this,e)}resolveNoCache(e){return uo.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),If(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=F.empty,i=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,o),c=a&&a.matchFragment(this.content,t);if(!c||!c.validEnd)return!1;for(let u=i;u<o;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Oe.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Oe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=F.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}}Nn.prototype.text=void 0;class ys extends Nn{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):If(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ys(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ys(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function If(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Hr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new pv(e,t);if(r.next==null)return Hr.empty;let i=Pf(r);r.next&&r.err("Unexpected trailing text");let o=wv(vv(i));return xv(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(a,c){let u=a.matchFragment(e,r);if(u&&(!t||u.validEnd))return F.from(c.map(d=>d.createAndFill()));for(let d=0;d<a.next.length;d++){let{type:h,next:m}=a.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let y=o(m,c.concat(h));if(y)return y}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let a=[];for(let c=i;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:c,next:u}=o.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in t)&&(!i.type||u.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),t[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}Hr.empty=new Hr(!0);class pv{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Pf(n){let e=[];do e.push(hv(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hv(n){let e=[];do e.push(mv(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function mv(n){let e=bv(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=gv(n,e);else break;return e}function Bf(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function gv(n,e){let t=Bf(n),r=t;return n.eat(",")&&(n.next!="}"?r=Bf(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function yv(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let a=t[o];a.groups.indexOf(e)>-1&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function bv(n){if(n.eat("(")){let e=Pf(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=yv(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vv(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(a,c,u){let d={term:u,to:c};return e[a].push(d),d}function i(a,c){a.forEach(u=>u.to=c)}function o(a,c){if(a.type=="choice")return a.exprs.reduce((u,d)=>u.concat(o(d,c)),[]);if(a.type=="seq")for(let u=0;;u++){let d=o(a.exprs[u],c);if(u==a.exprs.length-1)return d;i(d,c=t())}else if(a.type=="star"){let u=t();return r(c,u),i(o(a.expr,u),u),[r(u)]}else if(a.type=="plus"){let u=t();return i(o(a.expr,c),u),i(o(a.expr,u),u),[r(u)]}else{if(a.type=="opt")return[r(c)].concat(o(a.expr,c));if(a.type=="range"){let u=c;for(let d=0;d<a.min;d++){let h=t();i(o(a.expr,u),h),u=h}if(a.max==-1)i(o(a.expr,u),u);else for(let d=a.min;d<a.max;d++){let h=t();r(u,h),i(o(a.expr,u),h),u=h}return[r(u)]}else{if(a.type=="name")return[r(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Lf(n,e){return e-n}function Vf(n,e){let t=[];return r(e),t.sort(Lf);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let a=0;a<o.length;a++){let{term:c,to:u}=o[a];!c&&t.indexOf(u)==-1&&r(u)}}}function wv(n){let e=Object.create(null);return t(Vf(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:c,to:u})=>{if(!c)return;let d;for(let h=0;h<i.length;h++)i[h][0]==c&&(d=i[h][1]);Vf(n,u).forEach(h=>{d||i.push([c,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let o=e[r.join(",")]=new Hr(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let c=i[a][1].sort(Lf);o.next.push({type:i[a][0],next:e[c.join(",")]||t(c)})}return o}}function xv(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,a=[];for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];a.push(u.name),o&&!(u.isText||u.hasRequiredAttrs())&&(o=!1),r.indexOf(d)==-1&&r.push(d)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function $f(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Ff(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function zf(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new kv(n[t]);return e}class bs{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=zf(r.attrs),this.defaultAttrs=$f(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Hr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ff(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Nn(this,this.computeAttrs(e),F.from(t),Oe.setFrom(r))}createChecked(e=null,t,r){return t=F.from(t),this.checkContent(t),new Nn(this,this.computeAttrs(e),t,Oe.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=F.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(F.empty,!0);return o?new Nn(this,e,t.append(o),Oe.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Oe.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,a)=>r[o]=new bs(o,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class kv{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class vs{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=zf(i.attrs),this.excluded=null;let o=$f(this.attrs);this.instance=o?new Oe(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Oe(this,Ff(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,a)=>r[o]=new vs(o,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Sv{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=ft.from(e.nodes),t.marks=ft.from(e.marks||{}),this.nodes=bs.compile(this.spec.nodes,this),this.marks=vs.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",c=o.spec.marks;o.contentMatch=r[a]||(r[a]=Hr.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=c=="_"?null:c?Hf(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:Hf(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof bs){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new ys(r,r.defaultAttrs,e,Oe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Nn.fromJSON(this,e)}markFromJSON(e){return Oe.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Hf(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],a=o;if(o)t.push(o);else for(let c in n.marks){let u=n.marks[c];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class di{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new Kf(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Kf(this,t,!0);return r.addAll(e,t.from,t.to),K.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(Cv(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],c=a.style;if(!(c.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=t))){if(a.getAttrs){let u=a.getAttrs(t);if(u===!1)continue;a.attrs=u||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let c=t[a];if((c.priority==null?50:c.priority)<o)break}t.splice(a,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=qf(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=qf(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new di(e,di.schemaRules(e)))}}const Wf={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ev={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Uf={ol:!0,ul:!0},ws=1,xs=2,fo=4;function jf(n,e,t){return e!=null?(e?ws:0)|(e==="full"?xs:0):n&&n.whitespace=="pre"?ws|xs:t&~fo}class ks{constructor(e,t,r,i,o,a,c){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=c,this.content=[],this.activeMarks=Oe.none,this.stashMarks=[],this.match=a||(c&fo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(F.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ws)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=F.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(F.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Ov(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Wf.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Kf{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,o,a=jf(null,t.preserveWhitespace,0)|(r?fo:0);i?o=new ks(i.type,i.attrs,Oe.none,Oe.none,!0,t.topMatch||i.type.contentMatch,a):r?o=new ks(null,null,Oe.none,Oe.none,!0,null,a):o=new ks(e.schema.topNodeType,null,Oe.none,Oe.none,!0,null,a),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Tv(r));if(!i)return;let[o,a]=i,c=this.top;for(let u=0;u<a.length;u++)this.removePendingMark(a[u],c);for(let u=0;u<o.length;u++)this.addPendingMark(o[u]);t();for(let u=0;u<o.length;u++)this.removePendingMark(o[u],c);for(let u=0;u<a.length;u++)this.addPendingMark(a[u])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&xs||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&ws)r.options&xs?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Uf.hasOwnProperty(r)&&this.parser.normalizeLists&&_v(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(o?o.ignore:Ev.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,c=this.top,u=this.needsBlock;if(Wf.hasOwnProperty(r))c.content.length&&c.content[0].isInline&&this.open&&(this.open--,c=this.top),a=!0,c.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),a&&this.sync(c),this.needsBlock=u}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Oe.none,r=Oe.none;for(let i=0;i<e.length;i+=2)for(let o=void 0;;){let a=this.parser.matchStyle(e[i],e[i+1],this,o);if(!a)break;if(a.ignore)return null;if(a.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(c=>{a.clearMark(c)&&(r=c.addToSet(r))}):t=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(t),a.consuming===!1)o=a;else break}return[t,r]}addElementByRule(e,t,r){let i,o,a;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):i=this.enter(o,t.attrs||null,t.preserveWhitespace)):(a=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(a));let c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u));else{let u=e;typeof t.contentElement=="string"?u=e.querySelector(t.contentElement):typeof t.contentElement=="function"?u=t.contentElement(e):t.contentElement&&(u=t.contentElement),this.findAround(e,u,!0),this.addAll(u)}i&&this.sync(c)&&this.open--,a&&this.removePendingMark(a,c)}addAll(e,t,r){let i=t||0;for(let o=t?e.childNodes[t]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],a=o.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,r=o,!a.length)||o.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let a=jf(e,i,o.options);o.options&fo&&o.content.length==0&&(a|=fo),this.nodes.push(new ks(e,t,o.activeMarks,o.pendingMarks,r,null,a)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(c,u)=>{for(;c>=0;c--){let d=t[c];if(d==""){if(c==t.length-1||c==0)continue;for(;u>=o;u--)if(a(c-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=o?r.node(u-o).type:null;if(!h||h.name!=d&&h.groups.indexOf(d)==-1)return!1;u--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Nv(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let a=i.popFromStashMark(e);a&&i.type&&i.type.allowsMarkType(a.type)&&(i.activeMarks=a.addToSet(i.activeMarks))}if(i==t)break}}}function _v(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Uf.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Cv(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Tv(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function qf(n){let e={};for(let t in n)e[t]=n[t];return e}function Ov(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],a=c=>{o.push(c);for(let u=0;u<c.edgeCount;u++){let{type:d,next:h}=c.edge(u);if(d==e||o.indexOf(h)<0&&a(h))return!0}};if(a(i.contentMatch))return!0}}function Nv(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class Mn{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ll(t).createDocumentFragment());let i=r,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let c=0,u=0;for(;c<o.length&&u<a.marks.length;){let d=a.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(o[c][0])||d.type.spec.spanning===!1)break;c++,u++}for(;c<o.length;)i=o.pop()[1];for(;u<a.marks.length;){let d=a.marks[u++],h=this.serializeMark(d,a.isInline,t);h&&(o.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Mn.renderSpec(ll(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Mn.renderSpec(ll(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,c=r?e.createElementNS(r,i):e.createElement(i),u=t[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let m=h.indexOf(" ");m>0?c.setAttributeNS(h.slice(0,m),h.slice(m+1),u[h]):c.setAttribute(h,u[h])}}for(let h=d;h<t.length;h++){let m=t[h];if(m===0){if(h<t.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:y,contentDOM:b}=Mn.renderSpec(e,m,r);if(c.appendChild(y),b){if(a)throw new RangeError("Multiple content holes");a=b}}}return{dom:c,contentDOM:a}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Mn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Jf(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Jf(e.marks)}}function Jf(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ll(n){return n.document||window.document}const Gf=65535,Xf=Math.pow(2,16);function Mv(n,e){return n+e*Xf}function Yf(n){return n&Gf}function Av(n){return(n-(n&Gf))/Xf}const Zf=1,Qf=2,Ss=4,ed=8;class cl{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&ed)>0}get deletedBefore(){return(this.delInfo&(Zf|Ss))>0}get deletedAfter(){return(this.delInfo&(Qf|Ss))>0}get deletedAcross(){return(this.delInfo&Ss)>0}}class qt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&qt.empty)return qt.empty}recover(e){let t=0,r=Yf(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Av(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?i:0);if(u>e)break;let d=this.ranges[c+o],h=this.ranges[c+a],m=u+d;if(e<=m){let y=d?e==u?-1:e==m?1:t:t,b=u+i+(y<0?0:h);if(r)return b;let w=e==(t<0?u:m)?null:Mv(c/3,e-u),E=e==u?Qf:e==m?Zf:Ss;return(t<0?e!=u:e!=m)&&(E|=ed),new cl(b,E,w)}i+=h-d}return r?e+i:new cl(e+i,0,null)}touches(e,t){let r=0,i=Yf(t),o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?r:0);if(u>e)break;let d=this.ranges[c+o],h=u+d;if(e<=h&&c==i*3)return!0;r+=this.ranges[c+a]-d}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],c=a-(this.inverted?o:0),u=a+(this.inverted?0:o),d=this.ranges[i+t],h=this.ranges[i+r];e(c,c+d,u,u+h),o+=h-d}}invert(){return new qt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?qt.empty:new qt(e<0?[0,-e,0]:[0,0,e])}}qt.empty=new qt([]);class pi{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new pi(this.maps,this.mirror,e,t)}copy(){return new pi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new pi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this.maps[o],c=a.mapResult(e,t);if(c.recover!=null){let u=this.getMirror(o);if(u!=null&&u>o&&u<this.to){o=u,e=this.maps[u].recover(c.recover);continue}}i|=c.delInfo,e=c.pos}return r?e:new cl(e,i,null)}}const ul=Object.create(null);class yt{getMap(){return qt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ul[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ul)throw new RangeError("Duplicate use of step JSON ID "+e);return ul[e]=t,t.prototype.jsonID=e,t}}class Ze{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ze(e,null)}static fail(e){return new Ze(null,e)}static fromReplace(e,t,r,i){try{return Ze.ok(e.replace(t,r,i))}catch(o){if(o instanceof hs)return Ze.fail(o.message);throw o}}}function fl(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(fl(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return F.fromArray(r)}class hr extends yt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new K(fl(t.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return Ze.fromReplace(e,this.from,this.to,o)}invert(){return new An(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new hr(t.pos,r.pos,this.mark)}merge(e){return e instanceof hr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new hr(t.from,t.to,e.markFromJSON(t.mark))}}yt.jsonID("addMark",hr);class An extends yt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new K(fl(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ze.fromReplace(e,this.from,this.to,r)}invert(){return new hr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new An(t.pos,r.pos,this.mark)}merge(e){return e instanceof An&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new An(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new An(t.from,t.to,e.markFromJSON(t.mark))}}yt.jsonID("removeMark",An);class mr extends yt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ze.fromReplace(e,this.pos,this.pos+1,new K(F.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new mr(this.pos,t.marks[i]);return new mr(this.pos,this.mark)}}return new hi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new mr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new mr(t.pos,e.markFromJSON(t.mark))}}yt.jsonID("addNodeMark",mr);class hi extends yt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ze.fromReplace(e,this.pos,this.pos+1,new K(F.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new mr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hi(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hi(t.pos,e.markFromJSON(t.mark))}}yt.jsonID("removeNodeMark",hi);class dt extends yt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&dl(e,this.from,this.to)?Ze.fail("Structure replace would overwrite content"):Ze.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new qt([this.from,this.to-this.from,this.slice.size])}invert(e){return new dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new dt(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?K.empty:new K(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new dt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?K.empty:new K(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new dt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new dt(t.from,t.to,K.fromJSON(e,t.slice),!!t.structure)}}yt.jsonID("replace",dt);class st extends yt{constructor(e,t,r,i,o,a,c=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=c}apply(e){if(this.structure&&(dl(e,this.from,this.gapFrom)||dl(e,this.gapTo,this.to)))return Ze.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ze.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ze.fromReplace(e,this.from,this.to,r):Ze.fail("Content does not fit in gap")}getMap(){return new qt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new st(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new st(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new st(t.from,t.to,t.gapFrom,t.gapTo,K.fromJSON(e,t.slice),t.insert,!!t.structure)}}yt.jsonID("replaceAround",st);function dl(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function Dv(n,e,t,r){let i=[],o=[],a,c;n.doc.nodesBetween(e,t,(u,d,h)=>{if(!u.isInline)return;let m=u.marks;if(!r.isInSet(m)&&h.type.allowsMarkType(r.type)){let y=Math.max(d,e),b=Math.min(d+u.nodeSize,t),w=r.addToSet(m);for(let E=0;E<m.length;E++)m[E].isInSet(w)||(a&&a.to==y&&a.mark.eq(m[E])?a.to=b:i.push(a=new An(y,b,m[E])));c&&c.to==y?c.to=b:o.push(c=new hr(y,b,r))}}),i.forEach(u=>n.step(u)),o.forEach(u=>n.step(u))}function Rv(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(a,c)=>{if(!a.isInline)return;o++;let u=null;if(r instanceof vs){let d=a.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(a.marks)&&(u=[r]):u=a.marks;if(u&&u.length){let d=Math.min(c+a.nodeSize,t);for(let h=0;h<u.length;h++){let m=u[h],y;for(let b=0;b<i.length;b++){let w=i[b];w.step==o-1&&m.eq(i[b].style)&&(y=w)}y?(y.to=d,y.step=o):i.push({style:m,from:Math.max(c,e),to:d,step:o})}}}),i.forEach(a=>n.step(new An(a.from,a.to,a.style)))}function Iv(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],a=e+1;for(let c=0;c<i.childCount;c++){let u=i.child(c),d=a+u.nodeSize,h=r.matchType(u.type);if(!h)o.push(new dt(a,d,K.empty));else{r=h;for(let m=0;m<u.marks.length;m++)t.allowsMarkType(u.marks[m].type)||n.step(new An(a,d,u.marks[m]));if(u.isText&&!t.spec.code){let m,y=/\r?\n|\r/g,b;for(;m=y.exec(u.text);)b||(b=new K(F.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),o.push(new dt(a+m.index,a+m.index+m[0].length,b))}}a=d}if(!r.validEnd){let c=r.fillBefore(F.empty,!0);n.replace(a,a,new K(c,0,0))}for(let c=o.length-1;c>=0;c--)n.step(o[c])}function Pv(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function mi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,a,t))return r;if(r==0||i.type.spec.isolating||!Pv(i,o,a))break}return null}function Bv(n,e,t){let{$from:r,$to:i,depth:o}=e,a=r.before(o+1),c=i.after(o+1),u=a,d=c,h=F.empty,m=0;for(let w=o,E=!1;w>t;w--)E||r.index(w)>0?(E=!0,h=F.from(r.node(w).copy(h)),m++):u--;let y=F.empty,b=0;for(let w=o,E=!1;w>t;w--)E||i.after(w+1)<i.end(w)?(E=!0,y=F.from(i.node(w).copy(y)),b++):d++;n.step(new st(u,d,a,c,new K(h.append(y),m,b),h.size-m,!0))}function pl(n,e,t=null,r=n){let i=Lv(n,e),o=i&&Vv(r,e);return o?i.map(td).concat({type:e,attrs:t}).concat(o.map(td)):null}function td(n){return{type:n,attrs:null}}function Lv(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return t.canReplaceWith(r,i,a)?o:null}function Vv(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let u=(a.length?a[a.length-1]:e).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(t.child(d).type);return!u||!u.validEnd?null:a}function $v(n,e,t){let r=F.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let c=t[a].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=F.from(t[a].type.create(t[a].attrs,r))}let i=e.start,o=e.end;n.step(new st(i,o,i,o,new K(r,0,0),t.length,!0))}function Fv(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(a,c)=>{if(a.isTextblock&&!a.hasMarkup(r,i)&&zv(n.doc,n.mapping.slice(o).map(c),r)){n.clearIncompatible(n.mapping.slice(o).map(c,1),r);let u=n.mapping.slice(o),d=u.map(c,1),h=u.map(c+a.nodeSize,1);return n.step(new st(d,h,d+1,h-1,new K(F.from(r.create(i,null,a.marks)),0,0),1,!0)),!1}})}function zv(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Hv(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let a=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,a);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new st(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new K(F.from(a),0,0),1,!0))}function gi(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=t-2;d>o;d--,h--){let m=i.node(d),y=i.index(d);if(m.type.spec.isolating)return!1;let b=m.content.cutByIndex(y,m.childCount),w=r&&r[h+1];w&&(b=b.replaceChild(0,w.type.create(w.attrs)));let E=r&&r[h]||m;if(!m.canReplace(y+1,m.childCount)||!E.type.validContent(b))return!1}let c=i.indexAfter(o),u=r&&r[0];return i.node(o).canReplaceWith(c,c,u?u.type:i.node(o+1).type)}function Wv(n,e,t=1,r){let i=n.doc.resolve(e),o=F.empty,a=F.empty;for(let c=i.depth,u=i.depth-t,d=t-1;c>u;c--,d--){o=F.from(i.node(c).copy(o));let h=r&&r[d];a=F.from(h?h.type.create(h.attrs,a):i.node(c).copy(a))}n.step(new dt(e,e,new K(o.append(a),t,t),!0))}function gr(n,e){let t=n.resolve(e),r=t.index();return nd(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function nd(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Es(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,a,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):t>0?(o=r.node(i+1),c++,a=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),a=r.node(i+1)),o&&!o.isTextblock&&nd(o,a)&&r.node(i).canReplace(c,c+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function Uv(n,e,t){let r=new dt(e-t,e+t,K.empty,!0);n.step(r)}function jv(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function rd(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let a=r.depth;a>=0;a--){let c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0),d=r.node(a),h=!1;if(o==1)h=d.canReplace(u,u,i);else{let m=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=m&&d.canReplaceWith(u,u,m[0])}if(h)return c==0?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function hl(n,e,t=e,r=K.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return id(i,o,r)?new dt(e,t,r):new Kv(i,o,r).fit()}function id(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Kv{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=F.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=F.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,c=i.depth;for(;a&&c&&o.childCount==1;)o=o.firstChild.content,a--,c--;let u=new K(o,a,c);return e>-1?new st(r.pos,e,this.$to.pos,this.$to.end(),u,t):u.size||r.pos!=this.$to.pos?new dt(r.pos,i.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ml(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:u,match:d}=this.frontier[c],h,m=null;if(t==1&&(a?d.matchType(a.type)||(m=d.fillBefore(F.from(a),!1)):o&&u.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:m};if(t==2&&a&&(h=d.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:h};if(o&&d.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ml(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new K(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ml(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new K(po(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new K(po(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,d=0,h=[],{match:m,type:y}=this.frontier[t];if(i){for(let E=0;E<i.childCount;E++)h.push(i.child(E));m=m.matchFragment(i)}let b=c.size+e-(a.content.size-a.openEnd);for(;d<c.childCount;){let E=c.child(d),_=m.matchType(E.type);if(!_)break;d++,(d>1||u==0||E.content.size)&&(m=_,h.push(od(E.mark(y.allowedMarks(E.marks)),d==1?u:0,d==c.childCount?b:-1)))}let w=d==c.childCount;w||(b=-1),this.placed=ho(this.placed,t,F.from(h)),this.frontier[t].match=m,w&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,_=c;E<b;E++){let N=_.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),_=N.content}this.unplaced=w?e==0?K.empty:new K(po(a.content,e-1,1),e-1,b<0?a.openEnd:e-1):new K(po(a.content,e,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!gl(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=gl(e,t,i,r,o);if(!!a){for(let c=t-1;c>=0;c--){let{match:u,type:d}=this.frontier[c],h=gl(e,c,d,u,!0);if(!h||h.childCount)continue e}return{depth:t,fit:a,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ho(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ho(this.placed,this.depth,F.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(F.empty,!0);t.childCount&&(this.placed=ho(this.placed,this.frontier.length,t))}}function po(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(po(n.firstChild.content,e-1,t)))}function ho(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(ho(n.lastChild.content,e-1,t)))}function ml(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function od(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,od(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(F.empty,!0)))),n.copy(r)}function gl(n,e,t,r,i){let o=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==o.childCount&&!t.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,a);return c&&!qv(t,o.content,a)?c:null}function qv(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Jv(n){return n.spec.defining||n.spec.definingForContent}function Gv(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(id(i,o,r))return n.step(new dt(e,t,r));let a=ad(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let c=-(i.depth+1);a.unshift(c);for(let y=i.depth,b=i.pos-1;y>0;y--,b--){let w=i.node(y).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;a.indexOf(y)>-1?c=y:i.before(y)==b&&a.splice(1,0,-y)}let u=a.indexOf(c),d=[],h=r.openStart;for(let y=r.content,b=0;;b++){let w=y.firstChild;if(d.push(w),b==r.openStart)break;y=w.content}for(let y=h-1;y>=0;y--){let b=d[y],w=Jv(b.type);if(w&&!b.sameMarkup(i.node(Math.abs(c)-1)))h=y;else if(w||!b.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let b=(y+h+1)%(r.openStart+1),w=d[b];if(!!w)for(let E=0;E<a.length;E++){let _=a[(E+u)%a.length],N=!0;_<0&&(N=!1,_=-_);let D=i.node(_-1),z=i.index(_-1);if(D.canReplaceWith(z,z,w.type,w.marks))return n.replace(i.before(_),N?o.after(_):t,new K(sd(r.content,0,r.openStart,b),b,r.openEnd))}}let m=n.steps.length;for(let y=a.length-1;y>=0&&(n.replace(e,t,r),!(n.steps.length>m));y--){let b=a[y];b<0||(e=i.before(b),t=o.after(b))}}function sd(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(sd(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),a=o.fillBefore(n).append(n);n=a.append(o.matchFragment(a).fillBefore(F.empty,!0))}return n}function Xv(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=jv(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new K(F.from(r),0,0))}function Yv(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=ad(r,i);for(let a=0;a<o.length;a++){let c=o[a],u=a==o.length-1;if(u&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),i.end(c));if(c>0&&(u||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return n.delete(r.before(c),i.after(c))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a)return n.delete(r.before(a),t);n.delete(e,t)}function ad(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class yi extends yt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ze.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ze.fromReplace(e,this.pos,this.pos+1,new K(F.from(i),0,t.isLeaf?0:1))}getMap(){return qt.empty}invert(e){return new yi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new yi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new yi(t.pos,t.attr,t.value)}}yt.jsonID("attr",yi);class mo extends yt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Ze.ok(r)}getMap(){return qt.empty}invert(e){return new mo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mo(t.attr,t.value)}}yt.jsonID("docAttr",mo);let bi=class extends Error{};bi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t},bi.prototype=Object.create(Error.prototype),bi.prototype.constructor=bi,bi.prototype.name="TransformError";class Zv{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new bi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=K.empty){let i=hl(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new K(F.from(r),0,0))}delete(e,t){return this.replace(e,t,K.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Gv(this,e,t,r),this}replaceRangeWith(e,t,r){return Xv(this,e,t,r),this}deleteRange(e,t){return Yv(this,e,t),this}lift(e,t){return Bv(this,e,t),this}join(e,t=1){return Uv(this,e,t),this}wrap(e,t){return $v(this,e,t),this}setBlockType(e,t=e,r,i=null){return Fv(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return Hv(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new yi(e,t,r)),this}setDocAttribute(e,t){return this.step(new mo(e,t)),this}addNodeMark(e,t){return this.step(new mr(e,t)),this}removeNodeMark(e,t){if(!(t instanceof Oe)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new hi(e,t)),this}split(e,t=1,r){return Wv(this,e,t,r),this}addMark(e,t,r){return Dv(this,e,t,r),this}removeMark(e,t,r){return Rv(this,e,t,r),this}clearIncompatible(e,t,r){return Iv(this,e,t,r),this}}const yl=Object.create(null);class pe{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Qv(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=K.empty){let r=t.content.lastChild,i=null;for(let c=0;c<t.openEnd;c++)i=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:u,$to:d}=a[c],h=e.mapping.slice(o);e.replaceRange(h.map(u.pos),h.map(d.pos),c?K.empty:t),c==0&&ud(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:c}=i[o],u=e.mapping.slice(r),d=u.map(a.pos),h=u.map(c.pos);o?e.deleteRange(d,h):(e.replaceRangeWith(d,h,t),ud(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new fe(e):vi(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let a=t<0?vi(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):vi(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new vn(e.node(0))}static atStart(e){return vi(e,e,0,0,1)||new vn(e)}static atEnd(e){return vi(e,e,e.content.size,e.childCount,-1)||new vn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=yl[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in yl)throw new RangeError("Duplicate use of selection JSON ID "+e);return yl[e]=t,t.prototype.jsonID=e,t}getBookmark(){return fe.between(this.$anchor,this.$head).getBookmark()}}pe.prototype.visible=!0;class Qv{constructor(e,t){this.$from=e,this.$to=t}}let ld=!1;function cd(n){!ld&&!n.parent.inlineContent&&(ld=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class fe extends pe{constructor(e,t=e){cd(e),cd(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return pe.near(r);let i=e.resolve(t.map(this.anchor));return new fe(i.parent.inlineContent?i:r,r)}replace(e,t=K.empty){if(super.replace(e,t),t==K.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof fe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new _s(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new fe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=pe.findFrom(t,r,!0)||pe.findFrom(t,-r,!0);if(o)t=o.$head;else return pe.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(pe.findFrom(e,-r,!0)||pe.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new fe(e,t)}}pe.jsonID("text",fe);class _s{constructor(e,t){this.anchor=e,this.head=t}map(e){return new _s(e.map(this.anchor),e.map(this.head))}resolve(e){return fe.between(e.resolve(this.anchor),e.resolve(this.head))}}class te extends pe{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?pe.near(o):new te(o)}content(){return new K(F.from(this.node),0,0)}eq(e){return e instanceof te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new bl(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new te(e.resolve(t.anchor))}static create(e,t){return new te(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}te.prototype.visible=!1,pe.jsonID("node",te);class bl{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new _s(r,r):new bl(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&te.isSelectable(r)?new te(t):pe.near(t)}}class vn extends pe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=K.empty){if(t==K.empty){e.delete(0,e.doc.content.size);let r=pe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new vn(e)}map(e){return new vn(e)}eq(e){return e instanceof vn}getBookmark(){return ew}}pe.jsonID("all",vn);const ew={map(){return this},resolve(n){return new vn(n)}};function vi(n,e,t,r,i,o=!1){if(e.inlineContent)return fe.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let c=e.child(a);if(c.isAtom){if(!o&&te.isSelectable(c))return te.create(n,t-(i<0?c.nodeSize:0))}else{let u=vi(n,c,t+i,i<0?c.childCount:0,i,o);if(u)return u}t+=c.nodeSize*i}return null}function ud(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof dt||i instanceof st))return;let o=n.mapping.maps[r],a;o.forEach((c,u,d,h)=>{a==null&&(a=h)}),n.setSelection(pe.near(n.doc.resolve(a),t))}const fd=1,Cs=2,dd=4;class tw extends Zv{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fd)&~Cs,this.storedMarks=null,this}get selectionSet(){return(this.updated&fd)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Cs,this}ensureMarks(e){return Oe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Cs)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Cs,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Oe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r==null?t:r,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(t);o=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(pe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=dd,this}get scrolledIntoView(){return(this.updated&dd)>0}}function pd(n,e){return!e||!n?n:n.bind(e)}class go{constructor(e,t,r){this.name=e,this.init=pd(t.init,r),this.apply=pd(t.apply,r)}}const nw=[new go("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new go("selection",{init(n,e){return n.selection||pe.atStart(e.doc)},apply(n){return n.selection}}),new go("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new go("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class vl{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=nw.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new go(r.key,r.spec.state,r))})}}class wi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let c=this.config.plugins[a];if(c.spec.appendTransaction){let u=i?i[a].n:0,d=i?i[a].state:this,h=u<t.length&&c.spec.appendTransaction.call(c,u?t.slice(u):t,d,r);if(h&&r.filterTransaction(h,a)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<a?{state:r,n:t.length}:{state:this,n:0})}t.push(h),r=r.applyInner(h),o=!0}i&&(i[a]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new wi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new tw(this)}static create(e){let t=new vl(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new wi(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new vl(this.schema,e.plugins),r=t.fields,i=new wi(t);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new vl(e.schema,e.plugins),o=new wi(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=Nn.fromJSON(e.schema,t.doc);else if(a.name=="selection")o.selection=pe.fromJSON(o.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let u=r[c],d=u.spec.state;if(u.key==a.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,c)){o[a.name]=d.fromJSON.call(u,e,t[c],o);return}}o[a.name]=a.init(e,o)}}),o}}function hd(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=hd(i,e,{})),t[r]=i}return t}class Bt{constructor(e){this.spec=e,this.props={},e.props&&hd(e.props,this,this.props),this.key=e.key?e.key.key:md("plugin")}getState(e){return e[this.key]}}const wl=Object.create(null);function md(n){return n in wl?n+"$"+ ++wl[n]:(wl[n]=0,n+"$")}class Dn{constructor(e="key"){this.key=md(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ct=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},yo=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let gd=null;const Jn=function(n,e,t){let r=gd||(gd=document.createRange());return r.setEnd(n,t==null?n.nodeValue.length:t),r.setStart(n,e||0),r},Wr=function(n,e,t,r){return t&&(yd(n,e,t,r,-1)||yd(n,e,t,r,1))},rw=/^(img|br|input|textarea|hr)$/i;function yd(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Rn(n))){let o=n.parentNode;if(!o||o.nodeType!=1||xl(n)||rw.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ct(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Rn(n):0}else return!1}}function Rn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function iw(n,e,t){for(let r=e==0,i=e==Rn(n);r||i;){if(n==t)return!0;let o=Ct(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Rn(n)}}function xl(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Ts=function(n){return n.focusNode&&Wr(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ur(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function ow(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function sw(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}const In=typeof navigator<"u"?navigator:null,bd=typeof document<"u"?document:null,yr=In&&In.userAgent||"",kl=/Edge\/(\d+)/.exec(yr),vd=/MSIE \d/.exec(yr),Sl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(yr),Lt=!!(vd||Sl||kl),br=vd?document.documentMode:Sl?+Sl[1]:kl?+kl[1]:0,wn=!Lt&&/gecko\/(\d+)/i.test(yr);wn&&+(/Firefox\/(\d+)/.exec(yr)||[0,0])[1];const El=!Lt&&/Chrome\/(\d+)/.exec(yr),bt=!!El,aw=El?+El[1]:0,Tt=!Lt&&!!In&&/Apple Computer/.test(In.vendor),xi=Tt&&(/Mobile\/\w+/.test(yr)||!!In&&In.maxTouchPoints>2),rn=xi||(In?/Mac/.test(In.platform):!1),lw=In?/Win/.test(In.platform):!1,xn=/Android \d/.test(yr),bo=!!bd&&"webkitFontSmoothing"in bd.documentElement.style,cw=bo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function uw(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Gn(n,e){return typeof n=="number"?n:n[e]}function fw(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function wd(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let a=t||n.dom;a;a=yo(a)){if(a.nodeType!=1)continue;let c=a,u=c==o.body,d=u?uw(o):fw(c),h=0,m=0;if(e.top<d.top+Gn(r,"top")?m=-(d.top-e.top+Gn(i,"top")):e.bottom>d.bottom-Gn(r,"bottom")&&(m=e.bottom-e.top>d.bottom-d.top?e.top+Gn(i,"top")-d.top:e.bottom-d.bottom+Gn(i,"bottom")),e.left<d.left+Gn(r,"left")?h=-(d.left-e.left+Gn(i,"left")):e.right>d.right-Gn(r,"right")&&(h=e.right-d.right+Gn(i,"right")),h||m)if(u)o.defaultView.scrollBy(h,m);else{let y=c.scrollLeft,b=c.scrollTop;m&&(c.scrollTop+=m),h&&(c.scrollLeft+=h);let w=c.scrollLeft-y,E=c.scrollTop-b;e={left:e.left-w,top:e.top-E,right:e.right-w,bottom:e.bottom-E}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function dw(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let c=n.root.elementFromPoint(o,a);if(!c||c==n.dom||!n.dom.contains(c))continue;let u=c.getBoundingClientRect();if(u.top>=t-20){r=c,i=u.top;break}}return{refDOM:r,refTop:i,stack:xd(n.dom)}}function xd(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=yo(r));return e}function pw({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;kd(t,r==0?0:r-e)}function kd(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let ki=null;function hw(n){if(n.setActive)return n.setActive();if(ki)return n.focus(ki);let e=xd(n);n.focus(ki==null?{get preventScroll(){return ki={preventScroll:!0},!0}}:void 0),ki||(ki=!1,kd(e,0))}function Sd(n,e){let t,r=2e8,i,o=0,a=e.top,c=e.top,u,d;for(let h=n.firstChild,m=0;h;h=h.nextSibling,m++){let y;if(h.nodeType==1)y=h.getClientRects();else if(h.nodeType==3)y=Jn(h).getClientRects();else continue;for(let b=0;b<y.length;b++){let w=y[b];if(w.top<=a&&w.bottom>=c){a=Math.max(w.bottom,a),c=Math.min(w.top,c);let E=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(E<r){t=h,r=E,i=E&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,h.nodeType==1&&E&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!u&&w.left<=e.left&&w.right>=e.left&&(u=h,d={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!t&&u&&(t=u,i=d,r=0),t&&t.nodeType==3?mw(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:Sd(t,i)}function mw(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=vr(r,1);if(o.top!=o.bottom&&_l(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function _l(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function gw(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function yw(n,e,t){let{node:r,offset:i}=Sd(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function bw(n,e,t,r){let i=-1;for(let o=e,a=!1;o!=n.dom;){let c=n.docView.nearestDesc(o,!0);if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent&&!a||!c.contentDOM)){let u=c.dom.getBoundingClientRect();if(c.node.isBlock&&c.parent&&!a&&(a=!0,u.left>r.left||u.top>r.top?i=c.posBefore:(u.right<r.left||u.bottom<r.top)&&(i=c.posAfter)),!c.contentDOM&&i<0&&!c.node.isText)return(c.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?c.posBefore:c.posAfter}o=c.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function Ed(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let a=n.childNodes[o];if(a.nodeType==1){let c=a.getClientRects();for(let u=0;u<c.length;u++){let d=c[u];if(_l(e,d))return Ed(a,e,d)}}if((o=(o+1)%r)==i)break}return n}function vw(n,e){let t=n.dom.ownerDocument,r,i=0,o=sw(t,e.left,e.top);o&&({node:r,offset:i}=o);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),c;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let d=n.dom.getBoundingClientRect();if(!_l(e,d)||(a=Ed(n.dom,e,d),!a))return null}if(Tt)for(let d=a;r&&d;d=yo(d))d.draggable&&(r=void 0);if(a=gw(a,e),r){if(wn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],m;h.nodeName=="IMG"&&(m=h.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let d;bo&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=bw(n,r,i,e))}c==null&&(c=yw(n,a,e));let u=n.docView.nearestDesc(a,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}function _d(n){return n.top<n.bottom||n.left<n.right}function vr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(_d(r))return r}return Array.prototype.find.call(t,_d)||n.getBoundingClientRect()}const ww=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Cd(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),a=bo||wn;if(r.nodeType==3)if(a&&(ww.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let u=vr(Jn(r,i,i),t);if(wn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=vr(Jn(r,i-1,i-1),-1);if(d.top==u.top){let h=vr(Jn(r,i,i+1),-1);if(h.top!=u.top)return vo(h,h.left<d.left)}}return u}else{let u=i,d=i,h=t<0?1:-1;return t<0&&!i?(d++,h=-1):t>=0&&i==r.nodeValue.length?(u--,h=1):t<0?u--:d++,vo(vr(Jn(r,u,d),h),h<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==Rn(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return Cl(u.getBoundingClientRect(),!1)}if(o==null&&i<Rn(r)){let u=r.childNodes[i];if(u.nodeType==1)return Cl(u.getBoundingClientRect(),!0)}return Cl(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==Rn(r))){let u=r.childNodes[i-1],d=u.nodeType==3?Jn(u,Rn(u)-(a?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return vo(vr(d,1),!1)}if(o==null&&i<Rn(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?Jn(u,0,a?0:1):u.nodeType==1?u:null:null;if(d)return vo(vr(d,-1),!0)}return vo(vr(r.nodeType==3?Jn(r):r,-t),t>=0)}function vo(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Cl(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Td(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function xw(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Td(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let a=Cd(n,i.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=Jn(c,0,c.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(t=="up"?a.top-h.top>(h.bottom-a.top)*2:h.bottom-a.bottom>(a.bottom-h.top)*2))return!1}}return!0})}const kw=/[\u0590-\u08ac]/;function Sw(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,c=n.domSelection();return!kw.test(r.parent.textContent)||!c.modify?t=="left"||t=="backward"?o:a:Td(n,e,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:m}=n.domSelectionRange(),y=c.caretBidiLevel;c.modify("move",t,"character");let b=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:E}=n.domSelectionRange(),_=w&&!b.contains(w.nodeType==1?w:w.parentNode)||u==w&&d==E;try{c.collapse(h,m),u&&(u!=h||d!=m)&&c.extend&&c.extend(u,d)}catch{}return y!=null&&(c.caretBidiLevel=y),_})}let Od=null,Nd=null,Md=!1;function Ew(n,e,t){return Od==e&&Nd==t?Md:(Od=e,Nd=t,Md=t=="up"||t=="down"?xw(n,e,t):Sw(n,e,t))}const on=0,Ad=1,jr=2,Pn=3;class wo{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=on,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,a;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Ct(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!t||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],c=o+a.size;if(c>e||a instanceof Id){i=e-o;break}o=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Dd&&o.side>=0;r--);if(t<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&t&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Ct(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Ct(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,c=0;;c++){let u=this.children[c],d=a+u.size;if(i==-1&&e<=d){let h=a+u.border;if(e>=h&&t<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,t,h);e=a;for(let m=c;m>0;m--){let y=this.children[m-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){i=Ct(y.dom)+1;break}e-=y.size}i==-1&&(i=0)}if(i>-1&&(d>t||c==this.children.length-1)){t=d;for(let h=c+1;h<this.children.length;h++){let m=this.children[h];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Ct(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),a=Math.max(e,t);for(let y=0,b=0;y<this.children.length;y++){let w=this.children[y],E=b+w.size;if(o>b&&a<E)return w.setSelection(e-b-w.border,t-b-w.border,r,i);b=E}let c=this.domFromPos(e,e?-1:1),u=t==e?c:this.domFromPos(t,t?-1:1),d=r.getSelection(),h=!1;if((wn||Tt)&&e==t){let{node:y,offset:b}=c;if(y.nodeType==3){if(h=!!(b&&y.nodeValue[b-1]==`
`),h&&b==y.nodeValue.length)for(let w=y,E;w;w=w.parentNode){if(E=w.nextSibling){E.nodeName=="BR"&&(c=u={node:E.parentNode,offset:Ct(E)+1});break}let _=w.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let w=y.childNodes[b-1];h=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(wn&&d.focusNode&&d.focusNode!=u.node&&d.focusNode.nodeType==1){let y=d.focusNode.childNodes[d.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||h&&Tt)&&Wr(c.node,c.offset,d.anchorNode,d.anchorOffset)&&Wr(u.node,u.offset,d.focusNode,d.focusOffset))return;let m=!1;if((d.extend||e==t)&&!h){d.collapse(c.node,c.offset);try{e!=t&&d.extend(u.node,u.offset),m=!0}catch{}}if(!m){if(e>t){let b=c;c=u,u=b}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let c=r+o.border,u=a-o.border;if(e>=c&&t<=u){this.dirty=e==r||t==a?jr:Ad,e==c&&t==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Pn:o.markDirty(e-c,t-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?jr:Pn}r=a}this.dirty=jr}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?jr:Ad;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Dd extends wo{constructor(e,t,r,i){let o,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(a.nodeType!=1){let c=document.createElement("span");c.appendChild(a),a=c}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==on&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class _w extends wo{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Kr extends wo{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let o=i.nodeViews[t.type.name],a=o&&o(t,i,r);return(!a||!a.dom)&&(a=Mn.renderSpec(document,t.type.spec.toDOM(t,r))),new Kr(e,t,a.dom,a.contentDOM||a.dom)}parseRule(){return this.dirty&Pn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Pn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=on){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=on}}slice(e,t,r){let i=Kr.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;t<a&&(o=Nl(o,t,a,r)),e>0&&(o=Nl(o,0,e,r));for(let c=0;c<o.length;c++)o[c].parent=i;return i.children=o,i}}class wr extends wo{constructor(e,t,r,i,o,a,c,u,d){super(e,[],o,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(e,t,r,i,o,a){let c=o.nodeViews[t.type.name],u,d=c&&c(t,o,()=>{if(!u)return a;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,m=d&&d.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:m}=Mn.renderSpec(document,t.type.spec.toDOM(t)));!m&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let y=h;return h=Ld(h,r,t),d?u=new Cw(e,t,r,i,h,m||null,y,d,o,a+1):t.isText?new Os(e,t,r,i,h,y,o):new wr(e,t,r,i,h,m||null,y,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>F.empty)}return e}matchesNode(e,t,r){return this.dirty==on&&e.eq(this.node)&&Ol(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,a=o&&o.pos>-1?o:null,c=o&&o.pos<0,u=new Ow(this,a&&a.node,e);Aw(this.node,this.innerDeco,(d,h,m)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!m&&u.syncToMarks(h==this.node.childCount?Oe.none:this.node.child(h).marks,r,e),u.placeWidget(d,e,i)},(d,h,m,y)=>{u.syncToMarks(d.marks,r,e);let b;u.findNodeMatch(d,h,m,y)||c&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(b=u.findIndexWithChild(o.node))>-1&&u.updateNodeAt(d,h,m,b,e)||u.updateNextNode(d,h,m,e,y,i)||u.addNode(d,h,m,e,i),i+=d.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==jr)&&(a&&this.protectLocalComposition(e,a),Pd(this.contentDOM,this.children,e),xi&&Dw(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof fe)||r<t||i>t+this.node.content.size)return null;let o=e.domSelectionRange(),a=Rw(o.focusNode,o.focusOffset);if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let c=a.nodeValue,u=Iw(this.node.content,c,r-t,i-t);return u<0?null:{node:a,pos:u,text:c}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new _w(this,o,t,i);e.input.compositionNodes.push(a),this.children=Nl(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==Pn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=on}updateOuterDeco(e){if(Ol(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Bd(this.dom,this.nodeDOM,Tl(this.outerDeco,this.node,t),Tl(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Rd(n,e,t,r,i){Ld(r,e,n);let o=new wr(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Os extends wr{constructor(e,t,r,i,o,a,c){super(e,t,r,i,o,null,a,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Pn||this.dirty!=on&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=on||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=on,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new Os(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Pn)}get domAtom(){return!1}}class Id extends wo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==on&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Cw extends wr{constructor(e,t,r,i,o,a,c,u,d,h){super(e,t,r,i,o,a,c,d,h),this.spec=u}update(e,t,r,i){if(this.dirty==Pn)return!1;if(this.spec.update){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Pd(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let a=e[o],c=a.dom;if(c.parentNode==n){for(;c!=r;)r=Vd(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(c,r);if(a instanceof Kr){let u=r?r.previousSibling:n.lastChild;Pd(a.contentDOM,a.children,t),r=u?u.nextSibling:n.firstChild}}for(;r;)r=Vd(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const xo=function(n){n&&(this.nodeName=n)};xo.prototype=Object.create(null);const qr=[new xo];function Tl(n,e,t){if(n.length==0)return qr;let r=t?qr[0]:new xo,i=[r];for(let o=0;o<n.length;o++){let a=n[o].type.attrs;if(!!a){a.nodeName&&i.push(r=new xo(a.nodeName));for(let c in a){let u=a[c];u!=null&&(t&&i.length==1&&i.push(r=new xo(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+u:c=="style"?r.style=(r.style?r.style+";":"")+u:c!="nodeName"&&(r[c]=u))}}}return i}function Bd(n,e,t,r){if(t==qr&&r==qr)return e;let i=e;for(let o=0;o<r.length;o++){let a=r[o],c=t[o];if(o){let u;c&&c.nodeName==a.nodeName&&i!=n&&(u=i.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||(u=document.createElement(a.nodeName),u.pmIsDeco=!0,u.appendChild(i),c=qr[0]),i=u}Tw(i,c||qr[0],a)}return i}function Tw(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function Ld(n,e,t){return Bd(n,n,qr,Tl(e,t,n.nodeType!=1))}function Ol(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Vd(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Ow{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Nw(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=on,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){c=u;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let u=Kr.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))o=this.top.children.indexOf(a,this.index);else for(let c=this.index,u=Math.min(this.top.children.length,c+5);c<u;c++){let d=this.top.children[c];if(d.matchesNode(e,t,r)&&!this.preMatch.matched.has(d)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let a=this.top.children[i];return a.dirty==Pn&&a.dom==a.contentDOM&&(a.dirty=jr),a.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,a){for(let c=this.index;c<this.top.children.length;c++){let u=this.top.children[c];if(u instanceof wr){let d=this.preMatch.matched.get(u);if(d!=null&&d!=o)return!1;let h=u.dom,m,y=this.isLocked(h)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Pn&&Ol(t,u.outerDeco));if(!y&&u.update(e,t,r,i))return this.destroyBetween(this.index,c),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!y&&(m=this.recreateWrapper(u,e,t,r,i,a)))return this.top.children[this.index]=m,m.contentDOM&&(m.dirty=jr,m.updateChildren(i,a+1),m.dirty=on),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let c=wr.create(this.top,t,r,i,o,a);if(c.contentDOM){c.children=e.children,e.children=[];for(let u of c.children)u.parent=c}return e.destroy(),c}addNode(e,t,r,i,o){let a=wr.create(this.top,e,t,r,i,o);a.contentDOM&&a.updateChildren(i,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Dd(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Kr;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Os)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Tt||bt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Id(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Nw(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,a=[];e:for(;i>0;){let c;for(;;)if(r){let d=t.children[r-1];if(d instanceof Kr)t=d,r=d.children.length;else{c=d,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let u=c.node;if(!!u){if(u!=n.child(i-1))break;--i,o.set(c,i),a.push(c)}}return{index:i,matched:o,matches:a.reverse()}}function Mw(n,e){return n.type.side-e.type.side}function Aw(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let d=0;d<n.childCount;d++){let h=n.child(d);r(h,i,e.forChild(o,h),d),o+=h.nodeSize}return}let a=0,c=[],u=null;for(let d=0;;){let h,m;for(;a<i.length&&i[a].to==o;){let _=i[a++];_.widget&&(h?(m||(m=[h])).push(_):h=_)}if(h)if(m){m.sort(Mw);for(let _=0;_<m.length;_++)t(m[_],d,!!u)}else t(h,d,!!u);let y,b;if(u)b=-1,y=u,u=null;else if(d<n.childCount)b=d,y=n.child(d++);else break;for(let _=0;_<c.length;_++)c[_].to<=o&&c.splice(_--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)c.push(i[a++]);let w=o+y.nodeSize;if(y.isText){let _=w;a<i.length&&i[a].from<_&&(_=i[a].from);for(let N=0;N<c.length;N++)c[N].to<_&&(_=c[N].to);_<w&&(u=y.cut(_-o),y=y.cut(0,_-o),w=_,b=-1)}let E=y.isInline&&!y.isLeaf?c.filter(_=>!_.inline):c.slice();r(y,E,e.forChild(o,y),b),o=w}}function Dw(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Rw(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=Rn(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function Iw(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let a=n.child(i++),c=o;if(o+=a.nodeSize,!a.isText)continue;let u=a.text;for(;i<n.childCount;){let d=n.child(i++);if(o+=d.nodeSize,!d.isText)break;u+=d.text}if(o>=t){if(o>=r&&u.slice(r-e.length-c,r-c)==e)return r-e.length;let d=c<r?u.lastIndexOf(e,r-c-1):-1;if(d>=0&&d+e.length+c>=t)return c+d;if(t==r&&u.length>=r+e.length-c&&u.slice(r-c,r-c+e.length)==e)return r}}return-1}function Nl(n,e,t,r,i){let o=[];for(let a=0,c=0;a<n.length;a++){let u=n[a],d=c,h=c+=u.size;d>=t||h<=e?o.push(u):(d<e&&o.push(u.slice(0,e-d,r)),i&&(o.push(i),i=void 0),h>t&&o.push(u.slice(t-d,u.size,r)))}return o}function Ml(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let c=r.resolve(a),u,d;if(Ts(t)){for(u=c;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&te.isSelectable(h)&&i.parent&&!(h.isInline&&iw(t.focusNode,t.focusOffset,i.dom))){let m=i.posBefore;d=new te(a==m?c:r.resolve(m))}}else{let h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null;u=r.resolve(h)}if(!d){let h=e=="pointer"||n.state.selection.head<c.pos&&!o?1:-1;d=Dl(n,u,c,h)}return d}function $d(n){return n.editable?n.hasFocus():Kd(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Xn(n,e=!1){let t=n.state.selection;if(Wd(n,t),!!$d(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&bt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Wr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Bw(n);else{let{anchor:r,head:i}=t,o,a;Fd&&!(t instanceof fe)&&(t.$from.parent.inlineContent||(o=zd(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=zd(n,t.to))),n.docView.setSelection(r,i,n.root,e),Fd&&(o&&Hd(o),a&&Hd(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Pw(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Fd=Tt||bt&&aw<63;function zd(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Tt&&i&&i.contentEditable=="false")return Al(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Al(i);if(o)return Al(o)}}function Al(n){return n.contentEditable="true",Tt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Hd(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Pw(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!$d(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Bw(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Ct(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Lt&&br<=11&&(r.disabled=!0,r.disabled=!1)}function Wd(n,e){if(e instanceof te){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ud(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ud(n)}function Ud(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Dl(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||fe.between(e,t,r)}function jd(n){return n.editable&&!n.hasFocus()?!1:Kd(n)}function Kd(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Lw(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Wr(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Rl(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&pe.findFrom(o,e)}function xr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function qd(n,e,t){let r=n.state.selection;if(r instanceof fe)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return xr(n,new fe(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Rl(n.state,e);return i&&i instanceof te?xr(n,i):!1}else if(!(rn&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let c=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=n.docView.descAt(c))&&!a.contentDOM?te.isSelectable(o)?xr(n,new te(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):bo?xr(n,new fe(n.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof te&&r.node.isInline)return xr(n,new fe(e>0?r.$to:r.$from));{let i=Rl(n.state,e);return i?xr(n,i):!1}}}function Ns(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ko(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Si(n,e){return e<0?Vw(n):$w(n)}function Vw(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,a=!1;for(wn&&t.nodeType==1&&r<Ns(t)&&ko(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let c=t.childNodes[r-1];if(ko(c,-1))i=t,o=--r;else if(c.nodeType==3)t=c,r=t.nodeValue.length;else break}}else{if(Jd(t))break;{let c=t.previousSibling;for(;c&&ko(c,-1);)i=t.parentNode,o=Ct(c),c=c.previousSibling;if(c)t=c,r=Ns(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?Il(n,t,r):i&&Il(n,i,o)}function $w(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Ns(t),o,a;for(;;)if(r<i){if(t.nodeType!=1)break;let c=t.childNodes[r];if(ko(c,1))o=t,a=++r;else break}else{if(Jd(t))break;{let c=t.nextSibling;for(;c&&ko(c,1);)o=c.parentNode,a=Ct(c)+1,c=c.nextSibling;if(c)t=c,r=0,i=Ns(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&Il(n,o,a)}function Jd(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Fw(n,e){for(;n&&e==n.childNodes.length&&!xl(n);)e=Ct(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function zw(n,e){for(;n&&!e&&!xl(n);)e=Ct(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Il(n,e,t){if(e.nodeType!=3){let o,a;(a=Fw(e,t))?(e=a,t=0):(o=zw(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(Ts(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Xn(n)},50)}function Gd(n,e){let t=n.state.doc.resolve(e);if(!(bt||lw)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Xd(n,e,t){let r=n.state.selection;if(r instanceof fe&&!r.empty||t.indexOf("s")>-1||rn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Rl(n.state,e);if(a&&a instanceof te)return xr(n,a)}if(!i.parent.inlineContent){let a=e<0?i:o,c=r instanceof vn?pe.near(a,e):pe.findFrom(a,e);return c?xr(n,c):!1}return!1}function Yd(n,e){if(!(n.state.selection instanceof fe))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let a=n.state.tr;return e<0?a.delete(t.pos-o.nodeSize,t.pos):a.delete(t.pos,t.pos+o.nodeSize),n.dispatch(a),!0}return!1}function Zd(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Hw(n){if(!Tt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Zd(n,r,"true"),setTimeout(()=>Zd(n,r,"false"),20)}return!1}function Ww(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Uw(n,e){let t=e.keyCode,r=Ww(e);if(t==8||rn&&t==72&&r=="c")return Yd(n,-1)||Si(n,-1);if(t==46&&!e.shiftKey||rn&&t==68&&r=="c")return Yd(n,1)||Si(n,1);if(t==13||t==27)return!0;if(t==37||rn&&t==66&&r=="c"){let i=t==37?Gd(n,n.state.selection.from)=="ltr"?-1:1:-1;return qd(n,i,r)||Si(n,i)}else if(t==39||rn&&t==70&&r=="c"){let i=t==39?Gd(n,n.state.selection.from)=="ltr"?1:-1:1;return qd(n,i,r)||Si(n,i)}else{if(t==38||rn&&t==80&&r=="c")return Xd(n,-1,r)||Si(n,-1);if(t==40||rn&&t==78&&r=="c")return Hw(n)||Xd(n,1,r)||Si(n,1);if(r==(rn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Qd(n,e){n.someProp("transformCopied",b=>{e=b(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let b=r.firstChild;t.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let a=n.someProp("clipboardSerializer")||Mn.fromSchema(n.state.schema),c=ap(),u=c.createElement("div");u.appendChild(a.serializeFragment(r,{document:c}));let d=u.firstChild,h,m=0;for(;d&&d.nodeType==1&&(h=op[d.nodeName.toLowerCase()]);){for(let b=h.length-1;b>=0;b--){let w=c.createElement(h[b]);for(;u.firstChild;)w.appendChild(u.firstChild);u.appendChild(w),m++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let y=n.someProp("clipboardTextSerializer",b=>b(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:y}}function ep(n,e,t,r,i){let o=i.parent.type.spec.code,a,c;if(!t&&!e)return null;let u=e&&(r||o||!t);if(u){if(n.someProp("transformPastedText",y=>{e=y(e,o||r,n)}),o)return e?new K(F.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):K.empty;let m=n.someProp("clipboardTextParser",y=>y(e,i,r,n));if(m)c=m;else{let y=i.marks(),{schema:b}=n.state,w=Mn.fromSchema(b);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let _=a.appendChild(document.createElement("p"));E&&_.appendChild(w.serializeNode(b.text(E,y)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),a=qw(t),bo&&Jw(a);let d=a&&a.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let m=+h[3];m>0;m--){let y=a.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;a=y}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||di.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!jw.test(y.parentNode.nodeName)?{ignore:!0}:null}})),h)c=Gw(ip(c,+h[1],+h[2]),h[4]);else if(c=K.maxOpen(Kw(c.content,i),!0),c.openStart||c.openEnd){let m=0,y=0;for(let b=c.content.firstChild;m<c.openStart&&!b.type.spec.isolating;m++,b=b.firstChild);for(let b=c.content.lastChild;y<c.openEnd&&!b.type.spec.isolating;y++,b=b.lastChild);c=ip(c,m,y)}return n.someProp("transformPasted",m=>{c=m(c,n)}),c}const jw=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Kw(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,a=[];if(n.forEach(c=>{if(!a)return;let u=i.findWrapping(c.type),d;if(!u)return a=null;if(d=a.length&&o.length&&np(u,o,c,a[a.length-1],0))a[a.length-1]=d;else{a.length&&(a[a.length-1]=rp(a[a.length-1],o.length));let h=tp(c,u);a.push(h),i=i.matchType(h.type),o=u}}),a)return F.from(a)}return n}function tp(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,F.from(n));return n}function np(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=np(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(F.from(tp(t,n,i+1))))}}function rp(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,rp(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(F.empty,!0);return n.copy(t.append(r))}function Pl(n,e,t,r,i,o){let a=e<0?n.firstChild:n.lastChild,c=a.content;return n.childCount>1&&(o=0),i<r-1&&(c=Pl(c,e,t,r,i+1,o)),i>=t&&(c=e<0?a.contentMatchAt(0).fillBefore(c,o<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(F.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(c))}function ip(n,e,t){return e<n.openStart&&(n=new K(Pl(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new K(Pl(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const op={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let sp=null;function ap(){return sp||(sp=document.implementation.createHTMLDocument("title"))}function qw(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ap().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&op[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=n,i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function Jw(n){let e=n.querySelectorAll(bt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Gw(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:a}=n;for(let c=r.length-2;c>=0;c-=2){let u=t.nodes[r[c]];if(!u||u.hasRequiredAttrs())break;i=F.from(u.create(r[c+1],i)),o++,a++}return new K(i,o,a)}const Ot={},Nt={},Xw={touchstart:!0,touchmove:!0};class Yw{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Zw(n){for(let e in Ot){let t=Ot[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{ex(n,r)&&!Ll(n,r)&&(n.editable||!(r.type in Nt))&&t(n,r)},Xw[e]?{passive:!0}:void 0)}Tt&&n.dom.addEventListener("input",()=>null),Bl(n)}function kr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Qw(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Bl(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Ll(n,r))})}function Ll(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function ex(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function tx(n,e){!Ll(n,e)&&Ot[e.type]&&(n.editable||!(e.type in Nt))&&Ot[e.type](n,e)}Nt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!cp(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(xn&&bt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),xi&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Ur(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Uw(n,t)?t.preventDefault():kr(n,"key")},Nt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)},Nt.keypress=(n,e)=>{let t=e;if(cp(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||rn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof fe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Ms(n){return{left:n.clientX,top:n.clientY}}function nx(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Vl(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(n.someProp(e,c=>a>o.depth?c(n,t,o.nodeAfter,o.before(a),i,!0):c(n,t,o.node(a),o.before(a),i,!1)))return!0;return!1}function Ei(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function rx(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&te.isSelectable(r)?(Ei(n,new te(t),"pointer"),!0):!1}function ix(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof te&&(r=t.node);let o=n.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let c=a>o.depth?o.nodeAfter:o.node(a);if(te.isSelectable(c)){r&&t.$from.depth>0&&a>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(a);break}}return i!=null?(Ei(n,te.create(n.state.doc,i),"pointer"),!0):!1}function ox(n,e,t,r,i){return Vl(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?ix(n,t):rx(n,t))}function sx(n,e,t,r){return Vl(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function ax(n,e,t,r){return Vl(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||lx(n,t,r)}function lx(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Ei(n,fe.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),c=i.before(o);if(a.inlineContent)Ei(n,fe.create(r,c+1,c+1+a.content.size),"pointer");else if(te.isSelectable(a))Ei(n,te.create(r,c),"pointer");else continue;return!0}}function $l(n){return As(n)}const lp=rn?"metaKey":"ctrlKey";Ot.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=$l(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&nx(t,n.input.lastClick)&&!t[lp]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let a=n.posAtCoords(Ms(t));!a||(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new cx(n,a,t,!!r)):(o=="doubleClick"?sx:ax)(n,a.pos,a.inside,t)?t.preventDefault():kr(n,"pointer"))};class cx{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[lp],this.allowDefault=r.shiftKey;let o,a;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{let h=e.state.doc.resolve(t.pos);o=h.parent,a=h.depth?h.before():0}const c=i?null:r.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u?u.dom:null;let{selection:d}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||d instanceof te&&d.from<=a&&d.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),kr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ms(e))),this.updateAllowDefault(e),this.allowDefault||!t?kr(this.view,"pointer"):ox(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Tt&&this.mightDrag&&!this.mightDrag.node.isAtom||bt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ei(this.view,pe.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):kr(this.view,"pointer")}move(e){this.updateAllowDefault(e),kr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ot.touchstart=n=>{n.input.lastTouch=Date.now(),$l(n),kr(n,"pointer")},Ot.touchmove=n=>{n.input.lastTouch=Date.now(),kr(n,"pointer")},Ot.contextmenu=n=>$l(n);function cp(n,e){return n.composing?!0:Tt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const ux=xn?5e3:-1;Nt.compositionstart=Nt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),As(n,!0),n.markCursor=null;else if(As(n),wn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){n.domSelection().collapse(a,a.nodeValue.length);break}else i=a,o=-1}}n.input.composing=!0}up(n,ux)},Nt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,up(n,20))};function up(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>As(n),e))}function fp(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=fx());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function fx(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function As(n,e=!1){if(!(xn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),fp(n),e||n.docView&&n.docView.dirty){let t=Ml(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function dx(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const _i=Lt&&br<15||xi&&cw<604;Ot.copy=Nt.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=_i?null:t.clipboardData,a=r.content(),{dom:c,text:u}=Qd(n,a);o?(t.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",u)):dx(n,c),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function px(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function hx(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?So(n,r.value,null,i,e):So(n,r.textContent,r.innerHTML,i,e)},50)}function So(n,e,t,r,i){let o=ep(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",u=>u(n,i,o||K.empty)))return!0;if(!o)return!1;let a=px(o),c=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(o);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Nt.paste=(n,e)=>{let t=e;if(n.composing&&!xn)return;let r=_i?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&So(n,r.getData("text/plain"),r.getData("text/html"),i,t)?t.preventDefault():hx(n,t)};class mx{constructor(e,t){this.slice=e,this.move=t}}const dp=rn?"altKey":"ctrlKey";Ot.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Ms(t));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof te?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(te.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&n.dispatch(n.state.tr.setSelection(te.create(n.state.doc,d.posBefore)))}}let a=n.state.selection.content(),{dom:c,text:u}=Qd(n,a);t.dataTransfer.clearData(),t.dataTransfer.setData(_i?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",_i||t.dataTransfer.setData("text/plain",u),n.dragging=new mx(a,!t[dp])},Ot.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)},Nt.dragover=Nt.dragenter=(n,e)=>e.preventDefault(),Nt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Ms(t));if(!i)return;let o=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",w=>{a=w(a,n)}):a=ep(n,t.dataTransfer.getData(_i?"Text":"text/plain"),_i?null:t.dataTransfer.getData("text/html"),!1,o);let c=!!(r&&!t[dp]);if(n.someProp("handleDrop",w=>w(n,t,a||K.empty,c))){t.preventDefault();return}if(!a)return;t.preventDefault();let u=a?rd(n.state.doc,o.pos,a):o.pos;u==null&&(u=o.pos);let d=n.state.tr;c&&d.deleteSelection();let h=d.mapping.map(u),m=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,y=d.doc;if(m?d.replaceRangeWith(h,h,a.content.firstChild):d.replaceRange(h,h,a),d.doc.eq(y))return;let b=d.doc.resolve(h);if(m&&te.isSelectable(a.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(a.content.firstChild))d.setSelection(new te(b));else{let w=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((E,_,N,D)=>w=D),d.setSelection(Dl(n,b,d.doc.resolve(w)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))},Ot.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Xn(n)},20))},Ot.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)},Ot.beforeinput=(n,e)=>{if(bt&&xn&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Ur(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Nt)Ot[n]=Nt[n];function Eo(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ds{constructor(e,t){this.toDOM=e,this.spec=t||Jr,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new sn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ds&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Eo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Sr{constructor(e,t){this.attrs=e,this.spec=t||Jr}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new sn(o,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Sr&&Eo(this.attrs,e.attrs)&&Eo(this.spec,e.spec)}static is(e){return e.type instanceof Sr}destroy(){}}class Fl{constructor(e,t){this.attrs=e,this.spec=t||Jr}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=o.pos?null:new sn(o.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof Fl&&Eo(this.attrs,e.attrs)&&Eo(this.spec,e.spec)}destroy(){}}class sn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new sn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new sn(e,e,new Ds(t,r))}static inline(e,t,r,i){return new sn(e,t,new Sr(r,i))}static node(e,t,r,i){return new sn(e,t,new Fl(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Sr}get widget(){return this.type instanceof Ds}}const Ci=[],Jr={};class et{constructor(e,t){this.local=e.length?e:Ci,this.children=t.length?t:Ci}static create(e,t){return t.length?Rs(t,e,0,Jr):vt}find(e,t,r){let i=[];return this.findInner(e==null?0:e,t==null?1e9:t,i,0,r),i}findInner(e,t,r,i,o){for(let a=0;a<this.local.length;a++){let c=this.local[a];c.from<=t&&c.to>=e&&(!o||o(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,r,i+c,o)}}map(e,t,r){return this==vt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Jr)}mapInner(e,t,r,i,o){let a;for(let c=0;c<this.local.length;c++){let u=this.local[c].map(e,r,i);u&&u.type.valid(t,u)?(a||(a=[])).push(u):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?gx(this.children,a||[],e,t,r,i,o):a?new et(a.sort(Gr),Ci):vt}add(e,t){return t.length?this==vt?et.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((c,u)=>{let d=u+r,h;if(!!(h=hp(t,c,d))){for(i||(i=this.children.slice());o<i.length&&i[o]<u;)o+=3;i[o]==u?i[o+2]=i[o+2].addInner(c,h,d+1):i.splice(o,0,u,u+c.nodeSize,Rs(h,c,d+1,Jr)),o+=3}});let a=pp(o?mp(t):t,-r);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||a.splice(c--,1);return new et(a.length?this.local.concat(a).sort(Gr):this.local,i||this.children)}remove(e){return e.length==0||this==vt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,c=r[o]+t,u=r[o+1]+t;for(let h=0,m;h<e.length;h++)(m=e[h])&&m.from>c&&m.to<u&&(e[h]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let d=r[o+2].removeInner(a,c+1);d!=vt?r[o+2]=d:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let c=0;c<i.length;c++)i[c].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new et(i,r):vt}forChild(e,t){if(this==vt)return this;if(t.isLeaf)return et.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let o=e+1,a=o+t.content.size;for(let c=0;c<this.local.length;c++){let u=this.local[c];if(u.from<a&&u.to>o&&u.type instanceof Sr){let d=Math.max(o,u.from)-o,h=Math.min(a,u.to)-o;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let c=new et(i.sort(Gr),Ci);return r?new Er([c,r]):c}return r||vt}eq(e){if(this==e)return!0;if(!(e instanceof et)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return zl(this.localsInner(e))}localsInner(e){if(this==vt)return Ci;if(e.inlineContent||!this.local.some(Sr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Sr||t.push(this.local[r]);return t}}et.empty=new et([],[]),et.removeOverlap=zl;const vt=et.empty;class Er{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Jr));return Er.from(r)}forChild(e,t){if(t.isLeaf)return et.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=vt&&(o instanceof Er?r=r.concat(o.members):r.push(o))}return Er.from(r)}eq(e){if(!(e instanceof Er)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(!!o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let a=0;a<o.length;a++)t.push(o[a])}}return t?zl(r?t:t.sort(Gr)):Ci}static from(e){switch(e.length){case 0:return vt;case 1:return e[0];default:return new Er(e.every(t=>t instanceof et)?e:e.reduce((t,r)=>t.concat(r instanceof et?r:r.members),[]))}}}function gx(n,e,t,r,i,o,a){let c=n.slice();for(let d=0,h=o;d<t.maps.length;d++){let m=0;t.maps[d].forEach((y,b,w,E)=>{let _=E-w-(b-y);for(let N=0;N<c.length;N+=3){let D=c[N+1];if(D<0||y>D+h-m)continue;let z=c[N]+h-m;b>=z?c[N+1]=y<=z?-2:-1:w>=i&&_&&(c[N]+=_,c[N+1]+=_)}m+=_}),h=t.maps[d].map(h,-1)}let u=!1;for(let d=0;d<c.length;d+=3)if(c[d+1]<0){if(c[d+1]==-2){u=!0,c[d+1]=-1;continue}let h=t.map(n[d]+o),m=h-i;if(m<0||m>=r.content.size){u=!0;continue}let y=t.map(n[d+1]+o,-1),b=y-i,{index:w,offset:E}=r.content.findIndex(m),_=r.maybeChild(w);if(_&&E==m&&E+_.nodeSize==b){let N=c[d+2].mapInner(t,_,h+1,n[d]+o+1,a);N!=vt?(c[d]=m,c[d+1]=b,c[d+2]=N):(c[d+1]=-2,u=!0)}else u=!0}if(u){let d=yx(c,n,e,t,i,o,a),h=Rs(d,r,0,a);e=h.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,y=0;m<h.children.length;m+=3){let b=h.children[m];for(;y<c.length&&c[y]<b;)y+=3;c.splice(y,0,h.children[m],h.children[m+1],h.children[m+2])}}return new et(e.sort(Gr),c)}function pp(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new sn(i.from+e,i.to+e,i.type))}return t}function yx(n,e,t,r,i,o,a){function c(u,d){for(let h=0;h<u.local.length;h++){let m=u.local[h].map(r,i,d);m?t.push(m):a.onRemove&&a.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)c(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<n.length;u+=3)n[u+1]==-1&&c(n[u+2],e[u]+o+1);return t}function hp(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,a;o<n.length;o++)(a=n[o])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[o]=null);return i}function mp(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Rs(n,e,t,r){let i=[],o=!1;e.forEach((c,u)=>{let d=hp(n,c,u+t);if(d){o=!0;let h=Rs(d,c,t+u+1,r);h!=vt&&i.push(u,u+c.nodeSize,h)}});let a=pp(o?mp(n):n,-t).sort(Gr);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||(r.onRemove&&r.onRemove(a[c].spec),a.splice(c--,1));return a.length||i.length?new et(a,i):vt}function Gr(n,e){return n.from-e.from||n.to-e.to}function zl(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),gp(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),gp(e,i,r.copy(o.from,r.to)));break}}}return e}function gp(n,e,t){for(;e<n.length&&Gr(t,n[e])>0;)e++;n.splice(e,0,t)}function Hl(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=vt&&e.push(r)}),n.cursorWrapper&&e.push(et.create(n.state.doc,[n.cursorWrapper.deco])),Er.from(e)}const bx={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},vx=Lt&&br<=11;class wx{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class xx{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new wx,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Lt&&br<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),vx&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,bx)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!jd(this.view)){if(this.suppressingSelectionUpdates)return Xn(this.view);if(Lt&&br<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Wr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=yo(o))t.add(o);for(let o=e.anchorNode;o;o=yo(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&jd(e)&&!this.ignoreSelectionChange(r),o=-1,a=-1,c=!1,u=[];if(e.editable)for(let h=0;h<t.length;h++){let m=this.registerMutation(t[h],u);m&&(o=o<0?m.from:Math.min(m.from,o),a=a<0?m.to:Math.max(m.to,a),m.typeOver&&(c=!0))}if(wn&&u.length>1){let h=u.filter(m=>m.nodeName=="BR");if(h.length==2){let m=h[0],y=h[1];m.parentNode&&m.parentNode.parentNode==y.parentNode?y.remove():m.remove()}}let d=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ts(r)&&(d=Ml(e))&&d.eq(pe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xn(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,a),kx(e)),this.handleDOMChange(o,a,c,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xn(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++)t.push(e.addedNodes[h]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Lt&&br<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:m,nextSibling:y}=e.addedNodes[h];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y)}let a=i&&i.parentNode==e.target?Ct(i)+1:0,c=r.localPosFromDOM(e.target,a,-1),u=o&&o.parentNode==e.target?Ct(o):e.target.childNodes.length,d=r.localPosFromDOM(e.target,u,1);return{from:c,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let yp=new WeakMap,bp=!1;function kx(n){if(!yp.has(n)&&(yp.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=wn,bp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),bp=!0}}function Sx(n){let e;function t(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return Wr(c.node,c.offset,o,a)&&([r,i,o,a]=[o,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}function Ex(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:a,to:c}=n.docView.parseRange(e,t),u=n.domSelectionRange(),d,h=u.anchorNode;if(h&&n.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],Ts(u)||d.push({node:u.focusNode,offset:u.focusOffset})),bt&&n.input.lastKeyCode===8)for(let _=o;_>i;_--){let N=r.childNodes[_-1],D=N.pmViewDesc;if(N.nodeName=="BR"&&!D){o=_;break}if(!D||D.size)break}let m=n.state.doc,y=n.someProp("domParser")||di.fromSchema(n.state.schema),b=m.resolve(a),w=null,E=y.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:o,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:_x,context:b});if(d&&d[0].pos!=null){let _=d[0].pos,N=d[1]&&d[1].pos;N==null&&(N=_),w={anchor:_+a,head:N+a}}return{doc:E,sel:w,from:a,to:c}}function _x(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Tt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Tt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Cx=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Tx(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let Y=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,we=Ml(n,Y);if(we&&!n.state.selection.eq(we)){if(bt&&xn&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Be=>Be(n,Ur(13,"Enter"))))return;let Pe=n.state.tr.setSelection(we);Y=="pointer"?Pe.setMeta("pointer",!0):Y=="key"&&Pe.scrollIntoView(),o&&Pe.setMeta("composition",o),n.dispatch(Pe)}return}let a=n.state.doc.resolve(e),c=a.sharedDepth(t);e=a.before(c+1),t=n.state.doc.resolve(t).after(c+1);let u=n.state.selection,d=Ex(n,e,t),h=n.state.doc,m=h.slice(d.from,d.to),y,b;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(y=n.state.selection.to,b="end"):(y=n.state.selection.from,b="start"),n.input.lastKeyCode=null;let w=Mx(m.content,d.doc.content,d.from,y,b);if((xi&&n.input.lastIOSEnter>Date.now()-225||xn)&&i.some(Y=>Y.nodeType==1&&!Cx.test(Y.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",Y=>Y(n,Ur(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&u instanceof fe&&!u.empty&&u.$head.sameParent(u.$anchor)&&!n.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))w={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let Y=vp(n,n.state.doc,d.sel);if(Y&&!Y.eq(n.state.selection)){let we=n.state.tr.setSelection(Y);o&&we.setMeta("composition",o),n.dispatch(we)}}return}if(bt&&n.cursorWrapper&&d.sel&&d.sel.anchor==n.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let Y=w.endB-w.start;d.sel={anchor:d.sel.anchor+Y,head:d.sel.anchor+Y}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof fe&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=d.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=d.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),Lt&&br<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>d.from&&d.doc.textBetween(w.start-d.from-1,w.start-d.from+1)==" \xA0"&&(w.start--,w.endA--,w.endB--);let E=d.doc.resolveNoCache(w.start-d.from),_=d.doc.resolveNoCache(w.endB-d.from),N=h.resolve(w.start),D=E.sameParent(_)&&E.parent.inlineContent&&N.end()>=w.endA,z;if((xi&&n.input.lastIOSEnter>Date.now()-225&&(!D||i.some(Y=>Y.nodeName=="DIV"||Y.nodeName=="P"))||!D&&E.pos<d.doc.content.size&&!E.sameParent(_)&&(z=pe.findFrom(d.doc.resolve(E.pos+1),1,!0))&&z.head==_.pos)&&n.someProp("handleKeyDown",Y=>Y(n,Ur(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&Nx(h,w.start,w.endA,E,_)&&n.someProp("handleKeyDown",Y=>Y(n,Ur(8,"Backspace")))){xn&&bt&&n.domObserver.suppressSelectionUpdates();return}bt&&xn&&w.endB==w.start&&(n.input.lastAndroidDelete=Date.now()),xn&&!D&&E.start()!=_.start()&&_.parentOffset==0&&E.depth==_.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==w.endA&&(w.endB-=2,_=d.doc.resolveNoCache(w.endB-d.from),setTimeout(()=>{n.someProp("handleKeyDown",function(Y){return Y(n,Ur(13,"Enter"))})},20));let C=w.start,j=w.endA,L,Q,ve;if(D){if(E.pos==_.pos)Lt&&br<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xn(n),20)),L=n.state.tr.delete(C,j),Q=h.resolve(w.start).marksAcross(h.resolve(w.endA));else if(w.endA==w.endB&&(ve=Ox(E.parent.content.cut(E.parentOffset,_.parentOffset),N.parent.content.cut(N.parentOffset,w.endA-N.start()))))L=n.state.tr,ve.type=="add"?L.addMark(C,j,ve.mark):L.removeMark(C,j,ve.mark);else if(E.parent.child(E.index()).isText&&E.index()==_.index()-(_.textOffset?0:1)){let Y=E.parent.textBetween(E.parentOffset,_.parentOffset);if(n.someProp("handleTextInput",we=>we(n,C,j,Y)))return;L=n.state.tr.insertText(Y,C,j)}}if(L||(L=n.state.tr.replace(C,j,d.doc.slice(w.start-d.from,w.endB-d.from))),d.sel){let Y=vp(n,L.doc,d.sel);Y&&!(bt&&xn&&n.composing&&Y.empty&&(w.start!=w.endB||n.input.lastAndroidDelete<Date.now()-100)&&(Y.head==C||Y.head==L.mapping.map(j)-1)||Lt&&Y.empty&&Y.head==C)&&L.setSelection(Y)}Q&&L.ensureMarks(Q),o&&L.setMeta("composition",o),n.dispatch(L.scrollIntoView())}function vp(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Dl(n,e.resolve(t.anchor),e.resolve(t.head))}function Ox(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,a,c,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<t.length;h++)o=t[h].removeFromSet(o);if(i.length==1&&o.length==0)c=i[0],a="add",u=h=>h.mark(c.addToSet(h.marks));else if(i.length==0&&o.length==1)c=o[0],a="remove",u=h=>h.mark(c.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(u(e.child(h)));if(F.from(d).eq(n))return{mark:c,type:a}}function Nx(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||Wl(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=n.resolve(Wl(o,!0,!0));return!a.parent.isTextblock||a.pos>t||Wl(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Wl(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Mx(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a,b:c}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let u=Math.max(0,o-Math.min(a,c));r-=a+u-o}if(a<o&&n.size<e.size){let u=r<=o&&r>=a?o-r:0;o-=u,c=o+(c-a),a=o}else if(c<o){let u=r<=o&&r>=c?o-r:0;o-=u,a=o+(a-c),c=o}return{start:o,endA:a,endB:c}}class Ax{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Yw,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ep),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=kp(this),xp(this),this.nodeViews=Sp(this),this.docView=Rd(this.state.doc,wp(this),Hl(this),this.dom,this),this.domObserver=new xx(this,(r,i,o,a)=>Tx(this,r,i,o,a)),this.domObserver.start(),Zw(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Bl(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ep),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(fp(this),o=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let y=Sp(this);Rx(y,this.nodeViews)&&(this.nodeViews=y,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Bl(this),this.editable=kp(this),xp(this);let c=Hl(this),u=wp(this),d=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,u,c);(h||!e.selection.eq(r.selection))&&(o=!0);let m=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&dw(this);if(o){this.domObserver.stop();let y=h&&(Lt||bt)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Dx(r.selection,e.selection);if(h){let b=bt?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Rd(e.doc,u,c,this.dom,this)),b&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Lw(this))?Xn(this,y):(Wd(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():m&&pw(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof te){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&wd(this,t.getBoundingClientRect(),e)}else wd(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let c=this.directPlugins[a].props[e];if(c!=null&&(i=t?t(c):c))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let c=o[a].props[e];if(c!=null&&(i=t?t(c):c))return i}}hasFocus(){if(Lt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&hw(this.dom),Xn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return vw(this,e)}coordsAtPos(e,t=1){return Cd(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Ew(this,t||this.state,e)}pasteHTML(e,t){return So(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return So(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){!this.docView||(Qw(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Hl(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return tx(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Tt&&this.root.nodeType===11&&ow(this.dom.ownerDocument)==this.dom?Sx(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function wp(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[sn.node(0,n.state.doc.content.size,e)]}function xp(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:sn.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function kp(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Dx(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Sp(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Rx(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Ep(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var _r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Is={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ix=typeof navigator<"u"&&/Mac/.test(navigator.platform),Px=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),pt=0;pt<10;pt++)_r[48+pt]=_r[96+pt]=String(pt);for(var pt=1;pt<=24;pt++)_r[pt+111]="F"+pt;for(var pt=65;pt<=90;pt++)_r[pt]=String.fromCharCode(pt+32),Is[pt]=String.fromCharCode(pt);for(var Ul in _r)Is.hasOwnProperty(Ul)||(Is[Ul]=_r[Ul]);function Bx(n){var e=Ix&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Px&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Is:_r)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Lx=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Vx(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,a;for(let c=0;c<e.length-1;c++){let u=e[c];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))Lx?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function $x(n){let e=Object.create(null);for(let t in n)e[Vx(t)]=n[t];return e}function jl(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Fx(n){return new Bt({props:{handleKeyDown:_p(n)}})}function _p(n){let e=$x(n);return function(t,r){let i=Bx(r),o,a=e[jl(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=e[jl(i,r,!1)];if(c&&c(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=_r[r.keyCode])&&o!=i){let c=e[jl(o,r)];if(c&&c(t.state,t.dispatch,t))return!0}}return!1}}const zx=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Hx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Wx=(n,e,t)=>{let r=Hx(n,t);if(!r)return!1;let i=Cp(r);if(!i){let a=r.blockRange(),c=a&&mi(a);return c==null?!1:(e&&e(n.tr.lift(a,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&Np(n,i,e))return!0;if(r.parent.content.size==0&&(Ti(o,"end")||te.isSelectable(o))){let a=hl(n.doc,r.before(),r.after(),K.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=n.tr.step(a);c.setSelection(Ti(o,"end")?pe.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):te.create(c.doc,i.pos-o.nodeSize)),e(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function Ti(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Ux=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Cp(r)}let a=o&&o.nodeBefore;return!a||!te.isSelectable(a)?!1:(e&&e(n.tr.setSelection(te.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function Cp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function jx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Kx=(n,e,t)=>{let r=jx(n,t);if(!r)return!1;let i=Tp(r);if(!i)return!1;let o=i.nodeAfter;if(Np(n,i,e))return!0;if(r.parent.content.size==0&&(Ti(o,"start")||te.isSelectable(o))){let a=hl(n.doc,r.before(),r.after(),K.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=n.tr.step(a);c.setSelection(Ti(o,"start")?pe.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):te.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},qx=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Tp(r)}let a=o&&o.nodeAfter;return!a||!te.isSelectable(a)?!1:(e&&e(n.tr.setSelection(te.create(n.doc,o.pos)).scrollIntoView()),!0)};function Tp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Jx=(n,e)=>{let t=n.selection,r=t instanceof te,i;if(r){if(t.node.isTextblock||!gr(n.doc,t.from))return!1;i=t.from}else if(i=Es(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(te.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Gx=(n,e)=>{let t=n.selection,r;if(t instanceof te){if(t.node.isTextblock||!gr(n.doc,t.to))return!1;r=t.to}else if(r=Es(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Xx=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&mi(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},Yx=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Op(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Zx=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),a=Op(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(e){let c=t.after(),u=n.tr.replaceWith(c,c,a.createAndFill());u.setSelection(pe.near(u.doc.resolve(c),1)),e(u.scrollIntoView())}return!0},Qx=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof vn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Op(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=n.tr.insert(a,o.createAndFill());c.setSelection(fe.create(c.doc,a+1)),e(c.scrollIntoView())}return!0},ek=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(gi(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&mi(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},tk=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(te.create(n.doc,i))),!0)};function nk(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||gr(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Np(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,a;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(nk(n,e,t))return!0;let c=e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(t){let m=e.pos+i.nodeSize,y=F.empty;for(let E=o.length-1;E>=0;E--)y=F.from(o[E].create(null,y));y=F.from(r.copy(y));let b=n.tr.step(new st(e.pos-1,m,e.pos,m,new K(y,1,0),o.length,!0)),w=m+2*o.length;gr(b.doc,w)&&b.join(w),t(b.scrollIntoView())}return!0}let u=pe.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&mi(d);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(d,h).scrollIntoView()),!0;if(c&&Ti(i,"start",!0)&&Ti(r,"end")){let m=r,y=[];for(;y.push(m),!m.isTextblock;)m=m.lastChild;let b=i,w=1;for(;!b.isTextblock;b=b.firstChild)w++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(t){let E=F.empty;for(let N=y.length-1;N>=0;N--)E=F.from(y[N].copy(E));let _=n.tr.step(new st(e.pos-y.length,e.pos+i.nodeSize,e.pos+w,e.pos+i.nodeSize-w,new K(E,y.length,0),0,!0));t(_.scrollIntoView())}return!0}}return!1}function Mp(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(fe.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const rk=Mp(-1),ik=Mp(1);function ok(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,a=i.blockRange(o),c=a&&pl(a,n,e);return c?(r&&r(t.tr.wrap(a,c).scrollIntoView()),!0):!1}}function Ap(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:c}}=t.selection.ranges[o];t.doc.nodesBetween(a,c,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(n,e)))if(u.type==n)i=!0;else{let h=t.doc.resolve(d),m=h.index();i=h.parent.canReplaceWith(m,m+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:u}}=t.selection.ranges[a];o.setBlockType(c,u,n,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function sk(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,a=i.blockRange(o),c=!1,u=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(n)&&a.startIndex==0){if(i.index(a.depth-1)==0)return!1;let h=t.doc.resolve(a.start-2);u=new gs(h,h,a.depth),a.endIndex<a.parent.childCount&&(a=new gs(i,t.doc.resolve(o.end(a.depth)),a.depth)),c=!0}let d=pl(u,n,e,a);return d?(r&&r(ak(t.tr,a,d,c,n).scrollIntoView()),!0):!1}}function ak(n,e,t,r,i){let o=F.empty;for(let h=t.length-1;h>=0;h--)o=F.from(t[h].type.create(t[h].attrs,o));n.step(new st(e.start-(r?2:0),e.end,e.start,e.end,new K(o,0,0),t.length,!0));let a=0;for(let h=0;h<t.length;h++)t[h].type==i&&(a=h+1);let c=t.length-a,u=e.start+t.length-(r?2:0),d=e.parent;for(let h=e.startIndex,m=e.endIndex,y=!0;h<m;h++,y=!1)!y&&gi(n.doc,u,c)&&(n.split(u,c),u+=2*c),u+=d.child(h).nodeSize;return n}function lk(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?ck(e,t,n,o):uk(e,t,o):!0:!1}}function ck(n,e,t,r){let i=n.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new st(o-1,a,o,a,new K(F.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new gs(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const c=mi(r);if(c==null)return!1;i.lift(r,c);let u=i.mapping.map(o,-1)-1;return gr(i.doc,u)&&i.join(u),e(i.scrollIntoView()),!0}function uk(n,e,t){let r=n.tr,i=t.parent;for(let b=t.end,w=t.endIndex-1,E=t.startIndex;w>E;w--)b-=i.child(w).nodeSize,r.delete(b-1,b+1);let o=r.doc.resolve(t.start),a=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let c=t.startIndex==0,u=t.endIndex==i.childCount,d=o.node(-1),h=o.index(-1);if(!d.canReplace(h+(c?0:1),h+1,a.content.append(u?F.empty:F.from(i))))return!1;let m=o.pos,y=m+a.nodeSize;return r.step(new st(m-(c?1:0),y+(u?1:0),m+1,y-1,new K((c?F.empty:F.from(i.copy(F.empty))).append(u?F.empty:F.from(i.copy(F.empty))),c?0:1,u?0:1),c?0:1)),e(r.scrollIntoView()),!0}function fk(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==n);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let c=o.parent,u=c.child(a-1);if(u.type!=n)return!1;if(t){let d=u.lastChild&&u.lastChild.type==c.type,h=F.from(d?n.create():null),m=new K(F.from(n.create(null,F.from(c.type.create(null,h)))),d?3:1,0),y=o.start,b=o.end;t(e.tr.step(new st(y-(d?3:1),b,y,b,m,1,!0)).scrollIntoView())}return!0}}function Ps(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}class Bs{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:o}=r,a=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([c,u])=>[c,(...h)=>{const m=u(...h)(a);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:a}=i,c=[],u=!!e,d=e||o.tr,h=()=>(!u&&t&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(d),c.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(r).map(([y,b])=>[y,(...E)=>{const _=this.buildProps(d,t),N=b(...E)(_);return c.push(N),m}])),run:h};return m}createCan(e){const{rawCommands:t,state:r}=this,i=!1,o=e||r.tr,a=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(t).map(([u,d])=>[u,(...h)=>d(...h)({...a,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:a}=i,c={tr:e,editor:i,view:a,state:Ps({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([u,d])=>[u,(...h)=>d(...h)(c)]))}};return c}}class dk{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function X(n,e,t){return n.config[e]===void 0&&n.parent?X(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?X(n.parent,e,t):null}):n.config[e]}function Ls(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Dp(n){const e=[],{nodeExtensions:t,markExtensions:r}=Ls(n),i=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},u=X(a,"addGlobalAttributes",c);if(!u)return;u().forEach(h=>{h.types.forEach(m=>{Object.entries(h.attributes).forEach(([y,b])=>{e.push({type:m,name:y,attribute:{...o,...b}})})})})}),i.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},u=X(a,"addAttributes",c);if(!u)return;const d=u();Object.entries(d).forEach(([h,m])=>{const y={...o,...m};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),(y==null?void 0:y.isRequired)&&(y==null?void 0:y.default)===void 0&&delete y.default,e.push({type:a.name,name:h,attribute:y})})}),e}function at(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function tt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?o.split(" "):[],u=r[i]?r[i].split(" "):[],d=c.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function Kl(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>tt(t,r),{})}function Rp(n){return typeof n=="function"}function he(n,e=void 0,...t){return Rp(n)?e?n.bind(e)(...t):n(...t):n}function pk(n={}){return Object.keys(n).length===0&&n.constructor===Object}function hk(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Ip(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(t):hk(t.getAttribute(a.name));return c==null?o:{...o,[a.name]:c}},{});return{...r,...i}}}}function Pp(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&pk(t)?!1:t!=null))}function mk(n,e){var t;const r=Dp(n),{nodeExtensions:i,markExtensions:o}=Ls(n),a=(t=i.find(d=>X(d,"topNode")))===null||t===void 0?void 0:t.name,c=Object.fromEntries(i.map(d=>{const h=r.filter(N=>N.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},y=n.reduce((N,D)=>{const z=X(D,"extendNodeSchema",m);return{...N,...z?z(d):{}}},{}),b=Pp({...y,content:he(X(d,"content",m)),marks:he(X(d,"marks",m)),group:he(X(d,"group",m)),inline:he(X(d,"inline",m)),atom:he(X(d,"atom",m)),selectable:he(X(d,"selectable",m)),draggable:he(X(d,"draggable",m)),code:he(X(d,"code",m)),defining:he(X(d,"defining",m)),isolating:he(X(d,"isolating",m)),attrs:Object.fromEntries(h.map(N=>{var D;return[N.name,{default:(D=N==null?void 0:N.attribute)===null||D===void 0?void 0:D.default}]}))}),w=he(X(d,"parseHTML",m));w&&(b.parseDOM=w.map(N=>Ip(N,h)));const E=X(d,"renderHTML",m);E&&(b.toDOM=N=>E({node:N,HTMLAttributes:Kl(N,h)}));const _=X(d,"renderText",m);return _&&(b.toText=_),[d.name,b]})),u=Object.fromEntries(o.map(d=>{const h=r.filter(_=>_.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},y=n.reduce((_,N)=>{const D=X(N,"extendMarkSchema",m);return{..._,...D?D(d):{}}},{}),b=Pp({...y,inclusive:he(X(d,"inclusive",m)),excludes:he(X(d,"excludes",m)),group:he(X(d,"group",m)),spanning:he(X(d,"spanning",m)),code:he(X(d,"code",m)),attrs:Object.fromEntries(h.map(_=>{var N;return[_.name,{default:(N=_==null?void 0:_.attribute)===null||N===void 0?void 0:N.default}]}))}),w=he(X(d,"parseHTML",m));w&&(b.parseDOM=w.map(_=>Ip(_,h)));const E=X(d,"renderHTML",m);return E&&(b.toDOM=_=>E({mark:_,HTMLAttributes:Kl(_,h)})),[d.name,b]}));return new Sv({topNode:a,nodes:c,marks:u})}function ql(n,e){return e.nodes[n]||e.marks[n]||null}function Bp(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const gk=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,o,a,c)=>{var u,d;const h=((d=(u=i.type.spec).toText)===null||d===void 0?void 0:d.call(u,{node:i,pos:o,parent:a,index:c}))||i.textContent||"%leaf%";t+=h.slice(0,Math.max(0,r-o))}),t};function Jl(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Vs{constructor(e){this.find=e.find,this.handler=e.handler}}const yk=(n,e)=>{if(Jl(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Gl(n){var e;const{editor:t,from:r,to:i,text:o,rules:a,plugin:c}=n,{view:u}=t;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||!!(!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(y=>y.type.spec.code)))return!1;let h=!1;const m=gk(d)+o;return a.forEach(y=>{if(h)return;const b=yk(m,y.find);if(!b)return;const w=u.state.tr,E=Ps({state:u.state,transaction:w}),_={from:r-(b[0].length-o.length),to:i},{commands:N,chain:D,can:z}=new Bs({editor:t,state:E});y.handler({state:E,range:_,match:b,commands:N,chain:D,can:z})===null||!w.steps.length||(w.setMeta(c,{transform:w,from:r,to:i,text:o}),u.dispatch(w),h=!0)}),h}function bk(n){const{editor:e,rules:t}=n,r=new Bt({state:{init(){return null},apply(i,o){const a=i.getMeta(r);return a||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,a,c){return Gl({editor:e,from:o,to:a,text:c,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Gl({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Gl({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function vk(n){return typeof n=="number"}class wk{constructor(e){this.find=e.find,this.handler=e.handler}}const xk=(n,e)=>{if(Jl(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const i=[r.text];return i.index=r.index,i.input=n,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function kk(n){const{editor:e,state:t,from:r,to:i,rule:o,pasteEvent:a,dropEvent:c}=n,{commands:u,chain:d,can:h}=new Bs({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,i,(b,w)=>{if(!b.isTextblock||b.type.spec.code)return;const E=Math.max(r,w),_=Math.min(i,w+b.content.size),N=b.textBetween(E-w,_-w,void 0,"\uFFFC");xk(N,o.find).forEach(z=>{if(z.index===void 0)return;const C=E+z.index+1,j=C+z[0].length,L={from:t.tr.mapping.map(C),to:t.tr.mapping.map(j)},Q=o.handler({state:t,range:L,match:z,commands:u,chain:d,can:h,pasteEvent:a,dropEvent:c});m.push(Q)})}),m.every(b=>b!==null)}function Sk(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1,a=new ClipboardEvent("paste"),c=new DragEvent("drop");return t.map(d=>new Bt({view(h){const m=y=>{var b;r=!((b=h.dom.parentElement)===null||b===void 0)&&b.contains(y.target)?h.dom.parentElement:null};return window.addEventListener("dragstart",m),{destroy(){window.removeEventListener("dragstart",m)}}},props:{handleDOMEvents:{drop:(h,m)=>(o=r===h.dom.parentElement,c=m,!1),paste:(h,m)=>{var y;const b=(y=m.clipboardData)===null||y===void 0?void 0:y.getData("text/html");return a=m,i=!!(b!=null&&b.includes("data-pm-slice")),!1}}},appendTransaction:(h,m,y)=>{const b=h[0],w=b.getMeta("uiEvent")==="paste"&&!i,E=b.getMeta("uiEvent")==="drop"&&!o;if(!w&&!E)return;const _=m.doc.content.findDiffStart(y.doc.content),N=m.doc.content.findDiffEnd(y.doc.content);if(!vk(_)||!N||_===N.b)return;const D=y.tr,z=Ps({state:y,transaction:D});if(!(!kk({editor:e,state:z,from:Math.max(_-1,0),to:N.b-1,rule:d,pasteEvent:a,dropEvent:c})||!D.steps.length))return c=new DragEvent("drop"),a=new ClipboardEvent("paste"),D}}))}function Ek(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class Oi{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Oi.resolve(e),this.schema=mk(this.extensions,t),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const o={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:ql(r.name,this.schema)};r.type==="mark"&&((i=he(X(r,"keepOnSplit",o)))!==null&&i!==void 0?i:!0)&&this.splittableMarks.push(r.name);const a=X(r,"onBeforeCreate",o);a&&this.editor.on("beforeCreate",a);const c=X(r,"onCreate",o);c&&this.editor.on("create",c);const u=X(r,"onUpdate",o);u&&this.editor.on("update",u);const d=X(r,"onSelectionUpdate",o);d&&this.editor.on("selectionUpdate",d);const h=X(r,"onTransaction",o);h&&this.editor.on("transaction",h);const m=X(r,"onFocus",o);m&&this.editor.on("focus",m);const y=X(r,"onBlur",o);y&&this.editor.on("blur",y);const b=X(r,"onDestroy",o);b&&this.editor.on("destroy",b)})}static resolve(e){const t=Oi.sort(Oi.flatten(e)),r=Ek(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=X(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=X(r,"priority")||100,a=X(i,"priority")||100;return o>a?-1:o<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ql(t.name,this.schema)},i=X(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Oi.sort([...this.extensions].reverse()),r=[],i=[],o=t.map(a=>{const c={name:a.name,options:a.options,storage:a.storage,editor:e,type:ql(a.name,this.schema)},u=[],d=X(a,"addKeyboardShortcuts",c);let h={};if(a.type==="mark"&&a.config.exitable&&(h.ArrowRight=()=>Bn.handleExit({editor:e,mark:a})),d){const E=Object.fromEntries(Object.entries(d()).map(([_,N])=>[_,()=>N({editor:e})]));h={...h,...E}}const m=Fx(h);u.push(m);const y=X(a,"addInputRules",c);Bp(a,e.options.enableInputRules)&&y&&r.push(...y());const b=X(a,"addPasteRules",c);Bp(a,e.options.enablePasteRules)&&b&&i.push(...b());const w=X(a,"addProseMirrorPlugins",c);if(w){const E=w();u.push(...E)}return u}).flat();return[bk({editor:e,rules:r}),...Sk({editor:e,rules:i}),...o]}get attributes(){return Dp(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ls(this.extensions);return Object.fromEntries(t.filter(r=>!!X(r,"addNodeView")).map(r=>{const i=this.attributes.filter(u=>u.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:at(r.name,this.schema)},a=X(r,"addNodeView",o);if(!a)return[];const c=(u,d,h,m)=>{const y=Kl(u,i);return a()({editor:e,node:u,getPos:h,decorations:m,HTMLAttributes:y,extension:r})};return[r.name,c]}))}}function _k(n){return Object.prototype.toString.call(n).slice(8,-1)}function Xl(n){return _k(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function $s(n,e){const t={...n};return Xl(n)&&Xl(e)&&Object.keys(e).forEach(r=>{Xl(e[r])?r in n?t[r]=$s(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class Mt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(X(this,"addOptions",{name:this.name}))),this.storage=he(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mt(e)}configure(e={}){const t=this.extend();return t.options=$s(this.options,e),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Mt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(X(t,"addOptions",{name:t.name})),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}}function Lp(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:a={}}=t||{};let c="",u=!0;return n.nodesBetween(r,i,(d,h,m,y)=>{var b;const w=a==null?void 0:a[d.type.name];w?(d.isBlock&&!u&&(c+=o,u=!0),m&&(c+=w({node:d,pos:h,parent:m,index:y,range:e}))):d.isText?(c+=(b=d==null?void 0:d.text)===null||b===void 0?void 0:b.slice(Math.max(r,h)-h,i-h),u=!1):d.isBlock&&!u&&(c+=o,u=!0)}),c}function Vp(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Ck=Mt.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Bt({key:new Dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,a=Math.min(...o.map(h=>h.$from.pos)),c=Math.max(...o.map(h=>h.$to.pos)),u=Vp(t);return Lp(r,{from:a,to:c},{textSerializers:u})}}})]}}),Tk=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Ok=(n=!1)=>({commands:e})=>e.setContent("",n),Nk=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:a})=>{n.doc.nodesBetween(o.pos,a.pos,(c,u)=>{if(c.type.isText)return;const{doc:d,mapping:h}=e,m=d.resolve(h.map(u)),y=d.resolve(h.map(u+c.nodeSize)),b=m.blockRange(y);if(!b)return;const w=mi(b);if(c.type.isTextblock){const{defaultType:E}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(b.start,E)}(w||w===0)&&e.lift(b,w)})}),!0},Mk=n=>e=>n(e),Ak=()=>({state:n,dispatch:e})=>Qx(n,e),Dk=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,o.content),r.setSelection(new fe(r.doc.resolve(a-1))),!0},Rk=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const c=i.before(o),u=i.after(o);n.delete(c,u).scrollIntoView()}return!0}return!1},Ik=n=>({tr:e,state:t,dispatch:r})=>{const i=at(n,t.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const u=o.before(a),d=o.after(a);e.delete(u,d).scrollIntoView()}return!0}return!1},Pk=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Bk=()=>({state:n,dispatch:e})=>zx(n,e),Lk=()=>({commands:n})=>n.keyboardShortcut("Enter"),Vk=()=>({state:n,dispatch:e})=>Zx(n,e);function Fs(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Jl(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Yl(n,e,t={}){return n.find(r=>r.type===e&&Fs(r.attrs,t))}function $k(n,e,t={}){return!!Yl(n,e,t)}function Zl(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=Yl([...r.node.marks],e,t);if(!i)return;let o=r.index,a=n.start()+r.offset,c=o+1,u=a+r.node.nodeSize;for(Yl([...r.node.marks],e,t);o>0&&i.isInSet(n.parent.child(o-1).marks);)o-=1,a-=n.parent.child(o).nodeSize;for(;c<n.parent.childCount&&$k([...n.parent.child(c).marks],e,t);)u+=n.parent.child(c).nodeSize,c+=1;return{from:a,to:u}}function Cr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Fk=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=Cr(n,r.schema),{doc:a,selection:c}=t,{$from:u,from:d,to:h}=c;if(i){const m=Zl(u,o,e);if(m&&m.from<=d&&m.to>=h){const y=fe.create(a,m.from,m.to);t.setSelection(y)}}return!0},zk=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Ql(n){return n instanceof fe}function Yn(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function $p(n,e=null){if(!e)return null;const t=pe.atStart(n),r=pe.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?fe.create(n,Yn(0,i,o),Yn(n.content.size,i,o)):fe.create(n,Yn(e,i,o),Yn(e,i,o))}function ec(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Hk=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{ec()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!Ql(t.state.selection))return a(),!0;const c=$p(i.doc,n)||t.state.selection,u=t.state.selection.eq(c);return o&&(u||i.setSelection(c),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},Wk=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Uk=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function Fp(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function zs(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?F.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),zs("",e,t)}if(typeof n=="string"){const r=di.fromSchema(e);return t.slice?r.parseSlice(Fp(n),t.parseOptions).content:r.parse(Fp(n),t.parseOptions)}return zs("",e,t)}function jk(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof dt||i instanceof st))return;const o=n.mapping.maps[r];let a=0;o.forEach((c,u,d,h)=>{a===0&&(a=h)}),n.setSelection(pe.near(n.doc.resolve(a),t))}const Kk=n=>n.toString().startsWith("<"),qk=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const a=zs(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(a.toString()==="<>")return!0;let{from:c,to:u}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},d=!0,h=!0;if((Kk(a)?a:[a]).forEach(y=>{y.check(),d=d?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),c===u&&h){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,u+=1)}d?Array.isArray(e)?r.insertText(e.map(y=>y.text||"").join(""),c,u):typeof e=="object"&&!!e&&!!e.text?r.insertText(e.text,c,u):r.insertText(e,c,u):r.replaceWith(c,u,a),t.updateSelection&&jk(r,r.steps.length-1,-1)}return!0},Jk=()=>({state:n,dispatch:e})=>Jx(n,e),Gk=()=>({state:n,dispatch:e})=>Gx(n,e),Xk=()=>({state:n,dispatch:e})=>Wx(n,e),Yk=()=>({state:n,dispatch:e})=>Kx(n,e),Zk=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Es(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Qk=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Es(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}};function tc(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function eS(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,a;for(let c=0;c<e.length-1;c+=1){const u=e[c];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))ec()||tc()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const tS=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=eS(n).split(/-(?!$)/),a=o.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,c))});return u==null||u.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};function _o(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,a=e?at(e,n.schema):null,c=[];n.doc.nodesBetween(r,i,(m,y)=>{if(m.isText)return;const b=Math.max(r,y),w=Math.min(i,y+m.nodeSize);c.push({node:m,from:b,to:w})});const u=i-r,d=c.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>Fs(m.node.attrs,t,{strict:!1}));return o?!!d.length:d.reduce((m,y)=>m+y.to-y.from,0)>=u}const nS=(n,e={})=>({state:t,dispatch:r})=>{const i=at(n,t.schema);return _o(t,i,e)?Xx(t,r):!1},rS=()=>({state:n,dispatch:e})=>ek(n,e),iS=n=>({state:e,dispatch:t})=>{const r=at(n,e.schema);return lk(r)(e,t)},oS=()=>({state:n,dispatch:e})=>Yx(n,e);function Hs(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function zp(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const sS=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,a=null;const c=Hs(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(o=at(n,r.schema)),c==="mark"&&(a=Cr(n,r.schema)),i&&t.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{o&&o===d.type&&t.setNodeMarkup(h,void 0,zp(d.attrs,e)),a&&d.marks.length&&d.marks.forEach(m=>{a===m.type&&t.addMark(h,h+d.nodeSize,a.create(zp(m.attrs,e)))})})}),!0):!1},aS=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),lS=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),cS=()=>({state:n,dispatch:e})=>Ux(n,e),uS=()=>({state:n,dispatch:e})=>qx(n,e),fS=()=>({state:n,dispatch:e})=>tk(n,e),dS=()=>({state:n,dispatch:e})=>ik(n,e),pS=()=>({state:n,dispatch:e})=>rk(n,e);function Hp(n,e,t={}){return zs(n,e,{slice:!1,parseOptions:t})}const hS=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:a}=r,c=Hp(n,i.schema,t);return o&&r.replaceWith(0,a.content.size,c).setMeta("preventUpdate",!e),!0};function Ws(n,e){const t=Cr(e,n.schema),{from:r,to:i,empty:o}=n.selection,a=[];o?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,u=>{a.push(...u.marks)});const c=a.find(u=>u.type.name===t.name);return c?{...c.attrs}:{}}function mS(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function gS(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function nc(n){return e=>gS(e.$from,n)}function yS(n,e){const t=Mn.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function bS(n,e){const t={from:0,to:n.content.size};return Lp(n,t,e)}function vS(n,e){const t=at(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,c=>{o.push(c)});const a=o.reverse().find(c=>c.type.name===t.name);return a?{...a.attrs}:{}}function wS(n,e){const t=Hs(typeof e=="string"?e:e.name,n.schema);return t==="node"?vS(n,e):t==="mark"?Ws(n,e):{}}function Wp(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n-1),a=Zl(o,i.type);!a||r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,o)=>{r.push(...i.marks.map(a=>({from:o,to:o+i.nodeSize,mark:a})))}),r}function Us(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function rc(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?Cr(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>Fs(m.attrs,t,{strict:!1}));let a=0;const c=[];if(i.forEach(({$from:m,$to:y})=>{const b=m.pos,w=y.pos;n.doc.nodesBetween(b,w,(E,_)=>{if(!E.isText&&!E.marks.length)return;const N=Math.max(b,_),D=Math.min(w,_+E.nodeSize),z=D-N;a+=z,c.push(...E.marks.map(C=>({mark:C,from:N,to:D})))})}),a===0)return!1;const u=c.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>Fs(m.mark.attrs,t,{strict:!1})).reduce((m,y)=>m+y.to-y.from,0),d=c.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,y)=>m+y.to-y.from,0);return(u>0?u+d:u)>=a}function xS(n,e,t={}){if(!e)return _o(n,null,t)||rc(n,null,t);const r=Hs(e,n.schema);return r==="node"?_o(n,e,t):r==="mark"?rc(n,e,t):!1}function Up(n,e){const{nodeExtensions:t}=Ls(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=he(X(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function kS(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function SS(n){return n instanceof te}function jp(n,e,t){const i=n.state.doc.content.size,o=Yn(e,0,i),a=Yn(t,0,i),c=n.coordsAtPos(o),u=n.coordsAtPos(a,-1),d=Math.min(c.top,u.top),h=Math.max(c.bottom,u.bottom),m=Math.min(c.left,u.left),y=Math.max(c.right,u.right),b=y-m,w=h-d,N={top:d,bottom:h,left:m,right:y,width:b,height:w,x:m,y:d};return{...N,toJSON:()=>N}}function ES(n,e,t){var r;const{selection:i}=e;let o=null;if(Ql(i)&&(o=i.$cursor),o){const c=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(c)||!c.some(u=>u.type.excludes(t))}const{ranges:a}=i;return a.some(({$from:c,$to:u})=>{let d=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(c.pos,u.pos,(h,m,y)=>{if(d)return!1;if(h.isInline){const b=!y||y.type.allowsMarkType(t),w=!!t.isInSet(h.marks)||!h.marks.some(E=>E.type.excludes(t));d=b&&w}return!d}),d})}const _S=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:a,ranges:c}=o,u=Cr(n,r.schema);if(i)if(a){const d=Ws(r,u);t.addStoredMark(u.create({...d,...e}))}else c.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;r.doc.nodesBetween(h,m,(y,b)=>{const w=Math.max(b,h),E=Math.min(b+y.nodeSize,m);y.marks.find(N=>N.type===u)?y.marks.forEach(N=>{u===N.type&&t.addMark(w,E,u.create({...N.attrs,...e}))}):t.addMark(w,E,u.create(e))})});return ES(r,t,u)},CS=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),TS=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=at(n,t.schema);return o.isTextblock?i().command(({commands:a})=>Ap(o,e)(t)?!0:a.clearNodes()).command(({state:a})=>Ap(o,e)(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},OS=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Yn(n,0,r.content.size),o=te.create(r,i);e.setSelection(o)}return!0},NS=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,a=fe.atStart(r).from,c=fe.atEnd(r).to,u=Yn(i,a,c),d=Yn(o,a,c),h=fe.create(r,u,d);e.setSelection(h)}return!0},MS=n=>({state:e,dispatch:t})=>{const r=at(n,e.schema);return fk(r)(e,t)};function Kp(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const AS=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:a}=e,{$from:c,$to:u}=o,d=i.extensionManager.attributes,h=Us(d,c.node().type.name,c.node().attrs);if(o instanceof te&&o.node.isBlock)return!c.parentOffset||!gi(a,c.pos)?!1:(r&&(n&&Kp(t,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(r){const m=u.parentOffset===u.parent.content.size;o instanceof fe&&e.deleteSelection();const y=c.depth===0?void 0:mS(c.node(-1).contentMatchAt(c.indexAfter(-1)));let b=m&&y?[{type:y,attrs:h}]:void 0,w=gi(e.doc,e.mapping.map(c.pos),1,b);if(!b&&!w&&gi(e.doc,e.mapping.map(c.pos),1,y?[{type:y}]:void 0)&&(w=!0,b=y?[{type:y,attrs:h}]:void 0),w&&(e.split(e.mapping.map(c.pos),1,b),y&&!m&&!c.parentOffset&&c.parent.type!==y)){const E=e.mapping.map(c.before()),_=e.doc.resolve(E);c.node(-1).canReplaceWith(_.index(),_.index()+1,y)&&e.setNodeMarkup(e.mapping.map(c.before()),y)}n&&Kp(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},DS=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var o;const a=at(n,t.schema),{$from:c,$to:u}=t.selection,d=t.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const h=c.node(-1);if(h.type!==a)return!1;const m=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(r){let _=F.empty;const N=c.index(-1)?1:c.index(-2)?2:3;for(let Q=c.depth-N;Q>=c.depth-3;Q-=1)_=F.from(c.node(Q).copy(_));const D=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,z=Us(m,c.node().type.name,c.node().attrs),C=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(z))||void 0;_=_.append(F.from(a.createAndFill(null,C)||void 0));const j=c.before(c.depth-(N-1));e.replace(j,c.after(-D),new K(_,4-N,0));let L=-1;e.doc.nodesBetween(j,e.doc.content.size,(Q,ve)=>{if(L>-1)return!1;Q.isTextblock&&Q.content.size===0&&(L=ve+1)}),L>-1&&e.setSelection(fe.near(e.doc.resolve(L))),e.scrollIntoView()}return!0}const y=u.pos===c.end()?h.contentMatchAt(0).defaultType:null,b=Us(m,h.type.name,h.attrs),w=Us(m,c.node().type.name,c.node().attrs);e.delete(c.pos,u.pos);const E=y?[{type:a,attrs:b},{type:y,attrs:w}]:[{type:a,attrs:b}];if(!gi(e.doc,c.pos,2))return!1;if(r){const{selection:_,storedMarks:N}=t,{splittableMarks:D}=i.extensionManager,z=N||_.$to.parentOffset&&_.$from.marks();if(e.split(c.pos,2,E).scrollIntoView(),!z||!r)return!0;const C=z.filter(j=>D.includes(j.type.name));e.ensureMarks(C)}return!0},ic=(n,e)=>{const t=nc(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&gr(n.doc,t.pos)&&n.join(t.pos),!0},oc=(n,e)=>{const t=nc(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&gr(n.doc,r)&&n.join(r),!0};var RS=Object.freeze({__proto__:null,blur:Tk,clearContent:Ok,clearNodes:Nk,command:Mk,createParagraphNear:Ak,cut:Dk,deleteCurrentNode:Rk,deleteNode:Ik,deleteRange:Pk,deleteSelection:Bk,enter:Lk,exitCode:Vk,extendMarkRange:Fk,first:zk,focus:Hk,forEach:Wk,insertContent:Uk,insertContentAt:qk,joinUp:Jk,joinDown:Gk,joinBackward:Xk,joinForward:Yk,joinItemBackward:Zk,joinItemForward:Qk,keyboardShortcut:tS,lift:nS,liftEmptyBlock:rS,liftListItem:iS,newlineInCode:oS,resetAttributes:sS,scrollIntoView:aS,selectAll:lS,selectNodeBackward:cS,selectNodeForward:uS,selectParentNode:fS,selectTextblockEnd:dS,selectTextblockStart:pS,setContent:hS,setMark:_S,setMeta:CS,setNode:TS,setNodeSelection:OS,setTextSelection:NS,sinkListItem:MS,splitBlock:AS,splitListItem:DS,toggleList:(n,e,t,r={})=>({editor:i,tr:o,state:a,dispatch:c,chain:u,commands:d,can:h})=>{const{extensions:m,splittableMarks:y}=i.extensionManager,b=at(n,a.schema),w=at(e,a.schema),{selection:E,storedMarks:_}=a,{$from:N,$to:D}=E,z=N.blockRange(D),C=_||E.$to.parentOffset&&E.$from.marks();if(!z)return!1;const j=nc(L=>Up(L.type.name,m))(E);if(z.depth>=1&&j&&z.depth-j.depth<=1){if(j.node.type===b)return d.liftListItem(w);if(Up(j.node.type.name,m)&&b.validContent(j.node.content)&&c)return u().command(()=>(o.setNodeMarkup(j.pos,b),!0)).command(()=>ic(o,b)).command(()=>oc(o,b)).run()}return!t||!C||!c?u().command(()=>h().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>ic(o,b)).command(()=>oc(o,b)).run():u().command(()=>{const L=h().wrapInList(b,r),Q=C.filter(ve=>y.includes(ve.type.name));return o.ensureMarks(Q),L?!0:d.clearNodes()}).wrapInList(b,r).command(()=>ic(o,b)).command(()=>oc(o,b)).run()},toggleMark:(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,a=Cr(n,r.schema);return rc(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,e)},toggleNode:(n,e,t={})=>({state:r,commands:i})=>{const o=at(n,r.schema),a=at(e,r.schema);return _o(r,o,t)?i.setNode(a):i.setNode(o,t)},toggleWrap:(n,e={})=>({state:t,commands:r})=>{const i=at(n,t.schema);return _o(t,i,e)?r.lift(i):r.wrapIn(i,e)},undoInputRule:()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const a=n.tr,c=o.transform;for(let u=c.steps.length-1;u>=0;u-=1)a.step(c.steps[u].invert(c.docs[u]));if(o.text){const u=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,n.schema.text(o.text,u))}else a.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},unsetMark:(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:c}=t,u=Cr(n,r.schema),{$from:d,empty:h,ranges:m}=c;if(!i)return!0;if(h&&a){let{from:y,to:b}=c;const w=(o=d.marks().find(_=>_.type===u))===null||o===void 0?void 0:o.attrs,E=Zl(d,u,w);E&&(y=E.from,b=E.to),t.removeMark(y,b,u)}else m.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,u)});return t.removeStoredMark(u),!0},updateAttributes:(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,a=null;const c=Hs(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(o=at(n,r.schema)),c==="mark"&&(a=Cr(n,r.schema)),i&&t.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(d,h,(m,y)=>{o&&o===m.type&&t.setNodeMarkup(y,void 0,{...m.attrs,...e}),a&&m.marks.length&&m.marks.forEach(b=>{if(a===b.type){const w=Math.max(y,d),E=Math.min(y+m.nodeSize,h);t.addMark(w,E,a.create({...b.attrs,...e}))}})})}),!0):!1},wrapIn:(n,e={})=>({state:t,dispatch:r})=>{const i=at(n,t.schema);return ok(i,e)(t,r)},wrapInList:(n,e={})=>({state:t,dispatch:r})=>{const i=at(n,t.schema);return sk(i,e)(t,r)}});const IS=Mt.create({name:"commands",addCommands(){return{...RS}}}),PS=Mt.create({name:"editable",addProseMirrorPlugins(){return[new Bt({key:new Dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),BS=Mt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Bt({key:new Dn("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),LS=Mt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:c})=>{const{selection:u,doc:d}=c,{empty:h,$anchor:m}=u,{pos:y,parent:b}=m,w=m.parent.isTextblock?c.doc.resolve(y-1):m,E=w.parent.type.spec.isolating,_=m.pos-m.parentOffset,N=E&&w.parent.childCount===1?_===m.pos:pe.atStart(d).from===y;return!h||!N||!b.type.isTextblock||b.textContent.length?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ec()||tc()?o:i},addProseMirrorPlugins(){return[new Bt({key:new Dn("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(w=>w.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:o,to:a}=e.selection,c=pe.atStart(e.doc).from,u=pe.atEnd(e.doc).to;if(i||!(o===c&&a===u)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const m=t.tr,y=Ps({state:t,transaction:m}),{commands:b}=new Bs({editor:this.editor,state:y});if(b.clearNodes(),!!m.steps.length)return m}})]}}),VS=Mt.create({name:"tabindex",addProseMirrorPlugins(){return[new Bt({key:new Dn("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var $S=Object.freeze({__proto__:null,ClipboardTextSerializer:Ck,Commands:IS,Editable:PS,FocusEvents:BS,Keymap:LS,Tabindex:VS});const FS=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function zS(n,e,t){const r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class HS extends dk{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=zS(FS,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Rp(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values($S):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Oi(t,this)}createCommandManager(){this.commandManager=new Bs({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Hp(this.options.content,this.schema,this.options.parseOptions),t=$p(e,this.options.autofocus);this.view=new Ax(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:wi.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var c;return(c=this.capturedTransaction)===null||c===void 0?void 0:c.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return wS(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return xS(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return yS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return bS(this.state.doc,{blockSeparator:t,textSerializers:{...Vp(this.schema),...r}})}get isEmpty(){return kS(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}function Ni(n){return new Vs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=he(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],c=r[0];if(a){const u=c.search(/\S/),d=t.from+c.indexOf(a),h=d+a.length;if(Wp(t.from,t.to,e.doc).filter(b=>b.mark.type.excluded.find(E=>E===n.type&&E!==b.mark.type)).filter(b=>b.to>d).length)return null;h<t.to&&o.delete(h,t.to),d>t.from&&o.delete(t.from+u,d);const y=t.from+u+a.length;o.addMark(t.from+u,y,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function WS(n){return new Vs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=he(n.getAttributes,void 0,r)||{},{tr:o}=e,a=t.from;let c=t.to;const u=n.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=a+d;h>c?h=c:c=h+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,a+r[0].length-1),o.replaceWith(h,c,u)}else r[0]&&o.insert(a-1,n.type.create(i)).delete(o.mapping.map(a),o.mapping.map(c));o.scrollIntoView()}})}function sc(n){return new Vs({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),o=he(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function Co(n){return new Vs({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const o=he(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),u=a.doc.resolve(t.from).blockRange(),d=u&&pl(u,n.type,o);if(!d)return null;if(a.wrap(u,d),n.keepMarks&&n.editor){const{selection:m,storedMarks:y}=e,{splittableMarks:b}=n.editor.extensionManager,w=y||m.$to.parentOffset&&m.$from.marks();if(w){const E=w.filter(_=>b.includes(_.type.name));a.ensureMarks(E)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const h=a.doc.resolve(t.from-1).nodeBefore;h&&h.type===n.type&&gr(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,h))&&a.join(t.from-1)}})}class Bn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(X(this,"addOptions",{name:this.name}))),this.storage=he(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bn(e)}configure(e={}){const t=this.extend();return t.options=$s(this.options,e),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Bn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(X(t,"addOptions",{name:t.name})),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const u=a.find(d=>(d==null?void 0:d.type.name)===t.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class wt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(X(this,"addOptions",{name:this.name}))),this.storage=he(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new wt(e)}configure(e={}){const t=this.extend();return t.options=$s(this.options,e),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new wt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(X(t,"addOptions",{name:t.name})),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}}function Mi(n){return new wk({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const o=he(n.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:a}=e,c=r[r.length-1],u=r[0];let d=t.to;if(c){const h=u.search(/\S/),m=t.from+u.indexOf(c),y=m+c.length;if(Wp(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(_=>_===n.type&&_!==w.mark.type)).filter(w=>w.to>m).length)return null;y<t.to&&a.delete(y,t.to),m>t.from&&a.delete(t.from+h,m),d=t.from+h+c.length,a.addMark(t.from+h,d,n.type.create(o||{})),a.removeStoredMark(n.type)}}})}var Vt="top",an="bottom",ln="right",$t="left",ac="auto",To=[Vt,an,ln,$t],Ai="start",Oo="end",US="clippingParents",qp="viewport",No="popper",jS="reference",Jp=To.reduce(function(n,e){return n.concat([e+"-"+Ai,e+"-"+Oo])},[]),Gp=[].concat(To,[ac]).reduce(function(n,e){return n.concat([e,e+"-"+Ai,e+"-"+Oo])},[]),KS="beforeRead",qS="read",JS="afterRead",GS="beforeMain",XS="main",YS="afterMain",ZS="beforeWrite",QS="write",eE="afterWrite",tE=[KS,qS,JS,GS,XS,YS,ZS,QS,eE];function Ln(n){return n?(n.nodeName||"").toLowerCase():null}function Jt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Xr(n){var e=Jt(n).Element;return n instanceof e||n instanceof Element}function cn(n){var e=Jt(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function lc(n){if(typeof ShadowRoot>"u")return!1;var e=Jt(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function nE(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!cn(o)||!Ln(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var c=i[a];c===!1?o.removeAttribute(a):o.setAttribute(a,c===!0?"":c)}))})}function rE(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),c=a.reduce(function(u,d){return u[d]="",u},{});!cn(i)||!Ln(i)||(Object.assign(i.style,c),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}const Xp={name:"applyStyles",enabled:!0,phase:"write",fn:nE,effect:rE,requires:["computeStyles"]};function Vn(n){return n.split("-")[0]}var Yr=Math.max,js=Math.min,Di=Math.round;function cc(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Yp(){return!/^((?!chrome|android).)*safari/i.test(cc())}function Ri(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&cn(n)&&(i=n.offsetWidth>0&&Di(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Di(r.height)/n.offsetHeight||1);var a=Xr(n)?Jt(n):window,c=a.visualViewport,u=!Yp()&&t,d=(r.left+(u&&c?c.offsetLeft:0))/i,h=(r.top+(u&&c?c.offsetTop:0))/o,m=r.width/i,y=r.height/o;return{width:m,height:y,top:h,right:d+m,bottom:h+y,left:d,x:d,y:h}}function uc(n){var e=Ri(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Zp(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&lc(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Zn(n){return Jt(n).getComputedStyle(n)}function iE(n){return["table","td","th"].indexOf(Ln(n))>=0}function Tr(n){return((Xr(n)?n.ownerDocument:n.document)||window.document).documentElement}function Ks(n){return Ln(n)==="html"?n:n.assignedSlot||n.parentNode||(lc(n)?n.host:null)||Tr(n)}function Qp(n){return!cn(n)||Zn(n).position==="fixed"?null:n.offsetParent}function oE(n){var e=/firefox/i.test(cc()),t=/Trident/i.test(cc());if(t&&cn(n)){var r=Zn(n);if(r.position==="fixed")return null}var i=Ks(n);for(lc(i)&&(i=i.host);cn(i)&&["html","body"].indexOf(Ln(i))<0;){var o=Zn(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Mo(n){for(var e=Jt(n),t=Qp(n);t&&iE(t)&&Zn(t).position==="static";)t=Qp(t);return t&&(Ln(t)==="html"||Ln(t)==="body"&&Zn(t).position==="static")?e:t||oE(n)||e}function fc(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Ao(n,e,t){return Yr(n,js(e,t))}function sE(n,e,t){var r=Ao(n,e,t);return r>t?t:r}function eh(){return{top:0,right:0,bottom:0,left:0}}function th(n){return Object.assign({},eh(),n)}function nh(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var aE=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,th(typeof e!="number"?e:nh(e,To))};function lE(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,a=t.modifiersData.popperOffsets,c=Vn(t.placement),u=fc(c),d=[$t,ln].indexOf(c)>=0,h=d?"height":"width";if(!(!o||!a)){var m=aE(i.padding,t),y=uc(o),b=u==="y"?Vt:$t,w=u==="y"?an:ln,E=t.rects.reference[h]+t.rects.reference[u]-a[u]-t.rects.popper[h],_=a[u]-t.rects.reference[u],N=Mo(o),D=N?u==="y"?N.clientHeight||0:N.clientWidth||0:0,z=E/2-_/2,C=m[b],j=D-y[h]-m[w],L=D/2-y[h]/2+z,Q=Ao(C,L,j),ve=u;t.modifiersData[r]=(e={},e[ve]=Q,e.centerOffset=Q-L,e)}}function cE(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Zp(e.elements.popper,i)||(e.elements.arrow=i))}const uE={name:"arrow",enabled:!0,phase:"main",fn:lE,effect:cE,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ii(n){return n.split("-")[1]}var fE={top:"auto",right:"auto",bottom:"auto",left:"auto"};function dE(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:Di(t*i)/i||0,y:Di(r*i)/i||0}}function rh(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,a=n.offsets,c=n.position,u=n.gpuAcceleration,d=n.adaptive,h=n.roundOffsets,m=n.isFixed,y=a.x,b=y===void 0?0:y,w=a.y,E=w===void 0?0:w,_=typeof h=="function"?h({x:b,y:E}):{x:b,y:E};b=_.x,E=_.y;var N=a.hasOwnProperty("x"),D=a.hasOwnProperty("y"),z=$t,C=Vt,j=window;if(d){var L=Mo(t),Q="clientHeight",ve="clientWidth";if(L===Jt(t)&&(L=Tr(t),Zn(L).position!=="static"&&c==="absolute"&&(Q="scrollHeight",ve="scrollWidth")),L=L,i===Vt||(i===$t||i===ln)&&o===Oo){C=an;var Y=m&&L===j&&j.visualViewport?j.visualViewport.height:L[Q];E-=Y-r.height,E*=u?1:-1}if(i===$t||(i===Vt||i===an)&&o===Oo){z=ln;var we=m&&L===j&&j.visualViewport?j.visualViewport.width:L[ve];b-=we-r.width,b*=u?1:-1}}var Pe=Object.assign({position:c},d&&fE),Be=h===!0?dE({x:b,y:E},Jt(t)):{x:b,y:E};if(b=Be.x,E=Be.y,u){var Ne;return Object.assign({},Pe,(Ne={},Ne[C]=D?"0":"",Ne[z]=N?"0":"",Ne.transform=(j.devicePixelRatio||1)<=1?"translate("+b+"px, "+E+"px)":"translate3d("+b+"px, "+E+"px, 0)",Ne))}return Object.assign({},Pe,(e={},e[C]=D?E+"px":"",e[z]=N?b+"px":"",e.transform="",e))}function pE(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,a=o===void 0?!0:o,c=t.roundOffsets,u=c===void 0?!0:c,d={placement:Vn(e.placement),variation:Ii(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,rh(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,rh(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const hE={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pE,data:{}};var qs={passive:!0};function mE(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,c=a===void 0?!0:a,u=Jt(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(h){h.addEventListener("scroll",t.update,qs)}),c&&u.addEventListener("resize",t.update,qs),function(){o&&d.forEach(function(h){h.removeEventListener("scroll",t.update,qs)}),c&&u.removeEventListener("resize",t.update,qs)}}const gE={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mE,data:{}};var yE={left:"right",right:"left",bottom:"top",top:"bottom"};function Js(n){return n.replace(/left|right|bottom|top/g,function(e){return yE[e]})}var bE={start:"end",end:"start"};function ih(n){return n.replace(/start|end/g,function(e){return bE[e]})}function dc(n){var e=Jt(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function pc(n){return Ri(Tr(n)).left+dc(n).scrollLeft}function vE(n,e){var t=Jt(n),r=Tr(n),i=t.visualViewport,o=r.clientWidth,a=r.clientHeight,c=0,u=0;if(i){o=i.width,a=i.height;var d=Yp();(d||!d&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:c+pc(n),y:u}}function wE(n){var e,t=Tr(n),r=dc(n),i=(e=n.ownerDocument)==null?void 0:e.body,o=Yr(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Yr(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-r.scrollLeft+pc(n),u=-r.scrollTop;return Zn(i||t).direction==="rtl"&&(c+=Yr(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:c,y:u}}function hc(n){var e=Zn(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function oh(n){return["html","body","#document"].indexOf(Ln(n))>=0?n.ownerDocument.body:cn(n)&&hc(n)?n:oh(Ks(n))}function Do(n,e){var t;e===void 0&&(e=[]);var r=oh(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),o=Jt(r),a=i?[o].concat(o.visualViewport||[],hc(r)?r:[]):r,c=e.concat(a);return i?c:c.concat(Do(Ks(a)))}function mc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function xE(n,e){var t=Ri(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function sh(n,e,t){return e===qp?mc(vE(n,t)):Xr(e)?xE(e,t):mc(wE(Tr(n)))}function kE(n){var e=Do(Ks(n)),t=["absolute","fixed"].indexOf(Zn(n).position)>=0,r=t&&cn(n)?Mo(n):n;return Xr(r)?e.filter(function(i){return Xr(i)&&Zp(i,r)&&Ln(i)!=="body"}):[]}function SE(n,e,t,r){var i=e==="clippingParents"?kE(n):[].concat(e),o=[].concat(i,[t]),a=o[0],c=o.reduce(function(u,d){var h=sh(n,d,r);return u.top=Yr(h.top,u.top),u.right=js(h.right,u.right),u.bottom=js(h.bottom,u.bottom),u.left=Yr(h.left,u.left),u},sh(n,a,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function ah(n){var e=n.reference,t=n.element,r=n.placement,i=r?Vn(r):null,o=r?Ii(r):null,a=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,u;switch(i){case Vt:u={x:a,y:e.y-t.height};break;case an:u={x:a,y:e.y+e.height};break;case ln:u={x:e.x+e.width,y:c};break;case $t:u={x:e.x-t.width,y:c};break;default:u={x:e.x,y:e.y}}var d=i?fc(i):null;if(d!=null){var h=d==="y"?"height":"width";switch(o){case Ai:u[d]=u[d]-(e[h]/2-t[h]/2);break;case Oo:u[d]=u[d]+(e[h]/2-t[h]/2);break}}return u}function Ro(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,o=t.strategy,a=o===void 0?n.strategy:o,c=t.boundary,u=c===void 0?US:c,d=t.rootBoundary,h=d===void 0?qp:d,m=t.elementContext,y=m===void 0?No:m,b=t.altBoundary,w=b===void 0?!1:b,E=t.padding,_=E===void 0?0:E,N=th(typeof _!="number"?_:nh(_,To)),D=y===No?jS:No,z=n.rects.popper,C=n.elements[w?D:y],j=SE(Xr(C)?C:C.contextElement||Tr(n.elements.popper),u,h,a),L=Ri(n.elements.reference),Q=ah({reference:L,element:z,strategy:"absolute",placement:i}),ve=mc(Object.assign({},z,Q)),Y=y===No?ve:L,we={top:j.top-Y.top+N.top,bottom:Y.bottom-j.bottom+N.bottom,left:j.left-Y.left+N.left,right:Y.right-j.right+N.right},Pe=n.modifiersData.offset;if(y===No&&Pe){var Be=Pe[i];Object.keys(we).forEach(function(Ne){var ct=[ln,an].indexOf(Ne)>=0?1:-1,nt=[Vt,an].indexOf(Ne)>=0?"y":"x";we[Ne]+=Be[nt]*ct})}return we}function EE(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,o=t.rootBoundary,a=t.padding,c=t.flipVariations,u=t.allowedAutoPlacements,d=u===void 0?Gp:u,h=Ii(r),m=h?c?Jp:Jp.filter(function(w){return Ii(w)===h}):To,y=m.filter(function(w){return d.indexOf(w)>=0});y.length===0&&(y=m);var b=y.reduce(function(w,E){return w[E]=Ro(n,{placement:E,boundary:i,rootBoundary:o,padding:a})[Vn(E)],w},{});return Object.keys(b).sort(function(w,E){return b[w]-b[E]})}function _E(n){if(Vn(n)===ac)return[];var e=Js(n);return[ih(n),e,ih(e)]}function CE(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,a=t.altAxis,c=a===void 0?!0:a,u=t.fallbackPlacements,d=t.padding,h=t.boundary,m=t.rootBoundary,y=t.altBoundary,b=t.flipVariations,w=b===void 0?!0:b,E=t.allowedAutoPlacements,_=e.options.placement,N=Vn(_),D=N===_,z=u||(D||!w?[Js(_)]:_E(_)),C=[_].concat(z).reduce(function(kt,Je){return kt.concat(Vn(Je)===ac?EE(e,{placement:Je,boundary:h,rootBoundary:m,padding:d,flipVariations:w,allowedAutoPlacements:E}):Je)},[]),j=e.rects.reference,L=e.rects.popper,Q=new Map,ve=!0,Y=C[0],we=0;we<C.length;we++){var Pe=C[we],Be=Vn(Pe),Ne=Ii(Pe)===Ai,ct=[Vt,an].indexOf(Be)>=0,nt=ct?"width":"height",Ke=Ro(e,{placement:Pe,boundary:h,rootBoundary:m,altBoundary:y,padding:d}),Le=ct?Ne?ln:$t:Ne?an:Vt;j[nt]>L[nt]&&(Le=Js(Le));var De=Js(Le),Ft=[];if(o&&Ft.push(Ke[Be]<=0),c&&Ft.push(Ke[Le]<=0,Ke[De]<=0),Ft.every(function(kt){return kt})){Y=Pe,ve=!1;break}Q.set(Pe,Ft)}if(ve)for(var rt=w?3:1,qe=function(Je){var Ge=C.find(function(R){var H=Q.get(R);if(H)return H.slice(0,Je).every(function(W){return W})});if(Ge)return Y=Ge,"break"},xt=rt;xt>0;xt--){var Xt=qe(xt);if(Xt==="break")break}e.placement!==Y&&(e.modifiersData[r]._skip=!0,e.placement=Y,e.reset=!0)}}const TE={name:"flip",enabled:!0,phase:"main",fn:CE,requiresIfExists:["offset"],data:{_skip:!1}};function lh(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function ch(n){return[Vt,ln,an,$t].some(function(e){return n[e]>=0})}function OE(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=Ro(e,{elementContext:"reference"}),c=Ro(e,{altBoundary:!0}),u=lh(a,r),d=lh(c,i,o),h=ch(u),m=ch(d);e.modifiersData[t]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":m})}const NE={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:OE};function ME(n,e,t){var r=Vn(n),i=[$t,Vt].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=o[0],c=o[1];return a=a||0,c=(c||0)*i,[$t,ln].indexOf(r)>=0?{x:c,y:a}:{x:a,y:c}}function AE(n){var e=n.state,t=n.options,r=n.name,i=t.offset,o=i===void 0?[0,0]:i,a=Gp.reduce(function(h,m){return h[m]=ME(m,e.rects,o),h},{}),c=a[e.placement],u=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=a}const DE={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:AE};function RE(n){var e=n.state,t=n.name;e.modifiersData[t]=ah({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const IE={name:"popperOffsets",enabled:!0,phase:"read",fn:RE,data:{}};function PE(n){return n==="x"?"y":"x"}function BE(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=i===void 0?!0:i,a=t.altAxis,c=a===void 0?!1:a,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,m=t.padding,y=t.tether,b=y===void 0?!0:y,w=t.tetherOffset,E=w===void 0?0:w,_=Ro(e,{boundary:u,rootBoundary:d,padding:m,altBoundary:h}),N=Vn(e.placement),D=Ii(e.placement),z=!D,C=fc(N),j=PE(C),L=e.modifiersData.popperOffsets,Q=e.rects.reference,ve=e.rects.popper,Y=typeof E=="function"?E(Object.assign({},e.rects,{placement:e.placement})):E,we=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),Pe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Be={x:0,y:0};if(!!L){if(o){var Ne,ct=C==="y"?Vt:$t,nt=C==="y"?an:ln,Ke=C==="y"?"height":"width",Le=L[C],De=Le+_[ct],Ft=Le-_[nt],rt=b?-ve[Ke]/2:0,qe=D===Ai?Q[Ke]:ve[Ke],xt=D===Ai?-ve[Ke]:-Q[Ke],Xt=e.elements.arrow,kt=b&&Xt?uc(Xt):{width:0,height:0},Je=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:eh(),Ge=Je[ct],R=Je[nt],H=Ao(0,Q[Ke],kt[Ke]),W=z?Q[Ke]/2-rt-H-Ge-we.mainAxis:qe-H-Ge-we.mainAxis,q=z?-Q[Ke]/2+rt+H+R+we.mainAxis:xt+H+R+we.mainAxis,le=e.elements.arrow&&Mo(e.elements.arrow),Re=le?C==="y"?le.clientTop||0:le.clientLeft||0:0,se=(Ne=Pe==null?void 0:Pe[C])!=null?Ne:0,ee=Le+W-se-Re,_e=Le+q-se,At=Ao(b?js(De,ee):De,Le,b?Yr(Ft,_e):Ft);L[C]=At,Be[C]=At-Le}if(c){var Me,Qr=C==="x"?Vt:$t,Vi=C==="x"?an:ln,Dt=L[j],Qe=j==="y"?"height":"width",Sn=Dt+_[Qr],un=Dt-_[Vi],ei=[Vt,$t].indexOf(N)!==-1,zn=(Me=Pe==null?void 0:Pe[j])!=null?Me:0,$i=ei?Sn:Dt-Q[Qe]-ve[Qe]-zn+we.altAxis,Hn=ei?Dt+Q[Qe]+ve[Qe]-zn-we.altAxis:un,En=b&&ei?sE($i,Dt,Hn):Ao(b?$i:Sn,Dt,b?Hn:un);L[j]=En,Be[j]=En-Dt}e.modifiersData[r]=Be}}const LE={name:"preventOverflow",enabled:!0,phase:"main",fn:BE,requiresIfExists:["offset"]};function VE(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function $E(n){return n===Jt(n)||!cn(n)?dc(n):VE(n)}function FE(n){var e=n.getBoundingClientRect(),t=Di(e.width)/n.offsetWidth||1,r=Di(e.height)/n.offsetHeight||1;return t!==1||r!==1}function zE(n,e,t){t===void 0&&(t=!1);var r=cn(e),i=cn(e)&&FE(e),o=Tr(e),a=Ri(n,i,t),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!t)&&((Ln(e)!=="body"||hc(o))&&(c=$E(e)),cn(e)?(u=Ri(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):o&&(u.x=pc(o))),{x:a.left+c.scrollLeft-u.x,y:a.top+c.scrollTop-u.y,width:a.width,height:a.height}}function HE(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function i(o){t.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(c){if(!t.has(c)){var u=e.get(c);u&&i(u)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||i(o)}),r}function WE(n){var e=HE(n);return tE.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function UE(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function jE(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var uh={placement:"bottom",modifiers:[],strategy:"absolute"};function fh(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function KE(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,o=i===void 0?uh:i;return function(c,u,d){d===void 0&&(d=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},uh,o),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},m=[],y=!1,b={state:h,setOptions:function(N){var D=typeof N=="function"?N(h.options):N;E(),h.options=Object.assign({},o,h.options,D),h.scrollParents={reference:Xr(c)?Do(c):c.contextElement?Do(c.contextElement):[],popper:Do(u)};var z=WE(jE([].concat(r,h.options.modifiers)));return h.orderedModifiers=z.filter(function(C){return C.enabled}),w(),b.update()},forceUpdate:function(){if(!y){var N=h.elements,D=N.reference,z=N.popper;if(!!fh(D,z)){h.rects={reference:zE(D,Mo(z),h.options.strategy==="fixed"),popper:uc(z)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(we){return h.modifiersData[we.name]=Object.assign({},we.data)});for(var C=0;C<h.orderedModifiers.length;C++){if(h.reset===!0){h.reset=!1,C=-1;continue}var j=h.orderedModifiers[C],L=j.fn,Q=j.options,ve=Q===void 0?{}:Q,Y=j.name;typeof L=="function"&&(h=L({state:h,options:ve,name:Y,instance:b})||h)}}}},update:UE(function(){return new Promise(function(_){b.forceUpdate(),_(h)})}),destroy:function(){E(),y=!0}};if(!fh(c,u))return b;b.setOptions(d).then(function(_){!y&&d.onFirstUpdate&&d.onFirstUpdate(_)});function w(){h.orderedModifiers.forEach(function(_){var N=_.name,D=_.options,z=D===void 0?{}:D,C=_.effect;if(typeof C=="function"){var j=C({state:h,name:N,instance:b,options:z}),L=function(){};m.push(j||L)}})}function E(){m.forEach(function(_){return _()}),m=[]}return b}}var qE=[gE,IE,hE,Xp,DE,TE,LE,uE,NE],JE=KE({defaultModifiers:qE}),GE="tippy-box",dh="tippy-content",XE="tippy-backdrop",ph="tippy-arrow",hh="tippy-svg-arrow",Zr={passive:!0,capture:!0},mh=function(){return document.body};function YE(n,e){return{}.hasOwnProperty.call(n,e)}function gc(n,e,t){if(Array.isArray(n)){var r=n[e];return r==null?Array.isArray(t)?t[e]:t:r}return n}function yc(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function gh(n,e){return typeof n=="function"?n.apply(void 0,e):n}function yh(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function ZE(n,e){var t=Object.assign({},n);return e.forEach(function(r){delete t[r]}),t}function QE(n){return n.split(/\s+/).filter(Boolean)}function Pi(n){return[].concat(n)}function bh(n,e){n.indexOf(e)===-1&&n.push(e)}function e_(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function t_(n){return n.split("-")[0]}function Gs(n){return[].slice.call(n)}function vh(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Io(){return document.createElement("div")}function Po(n){return["Element","Fragment"].some(function(e){return yc(n,e)})}function n_(n){return yc(n,"NodeList")}function r_(n){return yc(n,"MouseEvent")}function i_(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function o_(n){return Po(n)?[n]:n_(n)?Gs(n):Array.isArray(n)?n:Gs(document.querySelectorAll(n))}function bc(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function wh(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function s_(n){var e,t=Pi(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function a_(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var o=i.popperRect,a=i.popperState,c=i.props,u=c.interactiveBorder,d=t_(a.placement),h=a.modifiersData.offset;if(!h)return!0;var m=d==="bottom"?h.top.y:0,y=d==="top"?h.bottom.y:0,b=d==="right"?h.left.x:0,w=d==="left"?h.right.x:0,E=o.top-r+m>u,_=r-o.bottom-y>u,N=o.left-t+b>u,D=t-o.right-w>u;return E||_||N||D})}function vc(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function xh(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var $n={isTouch:!1},kh=0;function l_(){$n.isTouch||($n.isTouch=!0,window.performance&&document.addEventListener("mousemove",Sh))}function Sh(){var n=performance.now();n-kh<20&&($n.isTouch=!1,document.removeEventListener("mousemove",Sh)),kh=n}function c_(){var n=document.activeElement;if(i_(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function u_(){document.addEventListener("touchstart",l_,Zr),window.addEventListener("blur",c_)}var f_=typeof window<"u"&&typeof document<"u",d_=f_?!!window.msCrypto:!1;function Bi(n){var e=n==="destroy"?"n already-":" ";return[n+"() was called on a"+e+"destroyed instance. This is a no-op but","indicates a potential memory leak."].join(" ")}function Eh(n){var e=/[ \t]{2,}/g,t=/^[ \t]*/gm;return n.replace(e," ").replace(t,"").trim()}function p_(n){return Eh(`
  %ctippy.js

  %c`+Eh(n)+`

  %c\u{1F477}\u200D This is a development-only message. It will be removed in production.
  `)}function _h(n){return[p_(n),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}var Bo;process.env.NODE_ENV!=="production"&&h_();function h_(){Bo=new Set}function Qn(n,e){if(n&&!Bo.has(e)){var t;Bo.add(e),(t=console).warn.apply(t,_h(e))}}function wc(n,e){if(n&&!Bo.has(e)){var t;Bo.add(e),(t=console).error.apply(t,_h(e))}}function m_(n){var e=!n,t=Object.prototype.toString.call(n)==="[object Object]"&&!n.addEventListener;wc(e,["tippy() was passed","`"+String(n)+"`","as its targets (first) argument. Valid types are: String, Element,","Element[], or NodeList."].join(" ")),wc(t,["tippy() was passed a plain object which is not supported as an argument","for virtual positioning. Use props.getReferenceClientRect instead."].join(" "))}var Ch={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},g_={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Gt=Object.assign({appendTo:mh,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ch,g_),y_=Object.keys(Gt),b_=function(e){process.env.NODE_ENV!=="production"&&Nh(e,[]);var t=Object.keys(e);t.forEach(function(r){Gt[r]=e[r]})};function Th(n){var e=n.plugins||[],t=e.reduce(function(r,i){var o=i.name,a=i.defaultValue;if(o){var c;r[o]=n[o]!==void 0?n[o]:(c=Gt[o])!=null?c:a}return r},{});return Object.assign({},n,t)}function v_(n,e){var t=e?Object.keys(Th(Object.assign({},Gt,{plugins:e}))):y_,r=t.reduce(function(i,o){var a=(n.getAttribute("data-tippy-"+o)||"").trim();if(!a)return i;if(o==="content")i[o]=a;else try{i[o]=JSON.parse(a)}catch{i[o]=a}return i},{});return r}function Oh(n,e){var t=Object.assign({},e,{content:gh(e.content,[n])},e.ignoreAttributes?{}:v_(n,e.plugins));return t.aria=Object.assign({},Gt.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}function Nh(n,e){n===void 0&&(n={}),e===void 0&&(e=[]);var t=Object.keys(n);t.forEach(function(r){var i=ZE(Gt,Object.keys(Ch)),o=!YE(i,r);o&&(o=e.filter(function(a){return a.name===r}).length===0),Qn(o,["`"+r+"`","is not a valid prop. You may have spelled it incorrectly, or if it's","a plugin, forgot to pass it in an array as props.plugins.",`

`,`All props: https://atomiks.github.io/tippyjs/v6/all-props/
`,"Plugins: https://atomiks.github.io/tippyjs/v6/plugins/"].join(" "))})}var w_=function(){return"innerHTML"};function xc(n,e){n[w_()]=e}function Mh(n){var e=Io();return n===!0?e.className=ph:(e.className=hh,Po(n)?e.appendChild(n):xc(e,n)),e}function Ah(n,e){Po(e.content)?(xc(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?xc(n,e.content):n.textContent=e.content)}function kc(n){var e=n.firstElementChild,t=Gs(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(dh)}),arrow:t.find(function(r){return r.classList.contains(ph)||r.classList.contains(hh)}),backdrop:t.find(function(r){return r.classList.contains(XE)})}}function Dh(n){var e=Io(),t=Io();t.className=GE,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Io();r.className=dh,r.setAttribute("data-state","hidden"),Ah(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(o,a){var c=kc(e),u=c.box,d=c.content,h=c.arrow;a.theme?u.setAttribute("data-theme",a.theme):u.removeAttribute("data-theme"),typeof a.animation=="string"?u.setAttribute("data-animation",a.animation):u.removeAttribute("data-animation"),a.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?u.setAttribute("role",a.role):u.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&Ah(d,n.props),a.arrow?h?o.arrow!==a.arrow&&(u.removeChild(h),u.appendChild(Mh(a.arrow))):u.appendChild(Mh(a.arrow)):h&&u.removeChild(h)}return{popper:e,onUpdate:i}}Dh.$$tippy=!0;var x_=1,Xs=[],Sc=[];function k_(n,e){var t=Oh(n,Object.assign({},Gt,Th(vh(e)))),r,i,o,a=!1,c=!1,u=!1,d=!1,h,m,y,b=[],w=yh(ee,t.interactiveDebounce),E,_=x_++,N=null,D=e_(t.plugins),z={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},C={id:_,reference:n,popper:Io(),popperInstance:N,props:t,state:z,plugins:D,clearDelayTimeouts:$i,setProps:Hn,setContent:En,show:Lo,hide:Vo,hideWithInteractivity:$o,enable:ei,disable:zn,unmount:Fo,destroy:zo};if(!t.render)return process.env.NODE_ENV!=="production"&&wc(!0,"render() function has not been supplied."),C;var j=t.render(C),L=j.popper,Q=j.onUpdate;L.setAttribute("data-tippy-root",""),L.id="tippy-"+C.id,C.popper=L,n._tippy=C,L._tippy=C;var ve=D.map(function(I){return I.fn(C)}),Y=n.hasAttribute("aria-expanded");return le(),rt(),Le(),De("onCreate",[C]),t.showOnCreate&&Sn(),L.addEventListener("mouseenter",function(){C.props.interactive&&C.state.isVisible&&C.clearDelayTimeouts()}),L.addEventListener("mouseleave",function(){C.props.interactive&&C.props.trigger.indexOf("mouseenter")>=0&&ct().addEventListener("mousemove",w)}),C;function we(){var I=C.props.touch;return Array.isArray(I)?I:[I,0]}function Pe(){return we()[0]==="hold"}function Be(){var I;return!!((I=C.props.render)!=null&&I.$$tippy)}function Ne(){return E||n}function ct(){var I=Ne().parentNode;return I?s_(I):document}function nt(){return kc(L)}function Ke(I){return C.state.isMounted&&!C.state.isVisible||$n.isTouch||h&&h.type==="focus"?0:gc(C.props.delay,I?0:1,Gt.delay)}function Le(I){I===void 0&&(I=!1),L.style.pointerEvents=C.props.interactive&&!I?"":"none",L.style.zIndex=""+C.props.zIndex}function De(I,G,ne){if(ne===void 0&&(ne=!0),ve.forEach(function(Se){Se[I]&&Se[I].apply(Se,G)}),ne){var Ce;(Ce=C.props)[I].apply(Ce,G)}}function Ft(){var I=C.props.aria;if(!!I.content){var G="aria-"+I.content,ne=L.id,Ce=Pi(C.props.triggerTarget||n);Ce.forEach(function(Se){var ht=Se.getAttribute(G);if(C.state.isVisible)Se.setAttribute(G,ht?ht+" "+ne:ne);else{var zt=ht&&ht.replace(ne,"").trim();zt?Se.setAttribute(G,zt):Se.removeAttribute(G)}})}}function rt(){if(!(Y||!C.props.aria.expanded)){var I=Pi(C.props.triggerTarget||n);I.forEach(function(G){C.props.interactive?G.setAttribute("aria-expanded",C.state.isVisible&&G===Ne()?"true":"false"):G.removeAttribute("aria-expanded")})}}function qe(){ct().removeEventListener("mousemove",w),Xs=Xs.filter(function(I){return I!==w})}function xt(I){if(!($n.isTouch&&(u||I.type==="mousedown"))){var G=I.composedPath&&I.composedPath()[0]||I.target;if(!(C.props.interactive&&xh(L,G))){if(Pi(C.props.triggerTarget||n).some(function(ne){return xh(ne,G)})){if($n.isTouch||C.state.isVisible&&C.props.trigger.indexOf("click")>=0)return}else De("onClickOutside",[C,I]);C.props.hideOnClick===!0&&(C.clearDelayTimeouts(),C.hide(),c=!0,setTimeout(function(){c=!1}),C.state.isMounted||Ge())}}}function Xt(){u=!0}function kt(){u=!1}function Je(){var I=ct();I.addEventListener("mousedown",xt,!0),I.addEventListener("touchend",xt,Zr),I.addEventListener("touchstart",kt,Zr),I.addEventListener("touchmove",Xt,Zr)}function Ge(){var I=ct();I.removeEventListener("mousedown",xt,!0),I.removeEventListener("touchend",xt,Zr),I.removeEventListener("touchstart",kt,Zr),I.removeEventListener("touchmove",Xt,Zr)}function R(I,G){W(I,function(){!C.state.isVisible&&L.parentNode&&L.parentNode.contains(L)&&G()})}function H(I,G){W(I,G)}function W(I,G){var ne=nt().box;function Ce(Se){Se.target===ne&&(vc(ne,"remove",Ce),G())}if(I===0)return G();vc(ne,"remove",m),vc(ne,"add",Ce),m=Ce}function q(I,G,ne){ne===void 0&&(ne=!1);var Ce=Pi(C.props.triggerTarget||n);Ce.forEach(function(Se){Se.addEventListener(I,G,ne),b.push({node:Se,eventType:I,handler:G,options:ne})})}function le(){Pe()&&(q("touchstart",se,{passive:!0}),q("touchend",_e,{passive:!0})),QE(C.props.trigger).forEach(function(I){if(I!=="manual")switch(q(I,se),I){case"mouseenter":q("mouseleave",_e);break;case"focus":q(d_?"focusout":"blur",At);break;case"focusin":q("focusout",At);break}})}function Re(){b.forEach(function(I){var G=I.node,ne=I.eventType,Ce=I.handler,Se=I.options;G.removeEventListener(ne,Ce,Se)}),b=[]}function se(I){var G,ne=!1;if(!(!C.state.isEnabled||Me(I)||c)){var Ce=((G=h)==null?void 0:G.type)==="focus";h=I,E=I.currentTarget,rt(),!C.state.isVisible&&r_(I)&&Xs.forEach(function(Se){return Se(I)}),I.type==="click"&&(C.props.trigger.indexOf("mouseenter")<0||a)&&C.props.hideOnClick!==!1&&C.state.isVisible?ne=!0:Sn(I),I.type==="click"&&(a=!ne),ne&&!Ce&&un(I)}}function ee(I){var G=I.target,ne=Ne().contains(G)||L.contains(G);if(!(I.type==="mousemove"&&ne)){var Ce=Qe().concat(L).map(function(Se){var ht,zt=Se._tippy,er=(ht=zt.popperInstance)==null?void 0:ht.state;return er?{popperRect:Se.getBoundingClientRect(),popperState:er,props:t}:null}).filter(Boolean);a_(Ce,I)&&(qe(),un(I))}}function _e(I){var G=Me(I)||C.props.trigger.indexOf("click")>=0&&a;if(!G){if(C.props.interactive){C.hideWithInteractivity(I);return}un(I)}}function At(I){C.props.trigger.indexOf("focusin")<0&&I.target!==Ne()||C.props.interactive&&I.relatedTarget&&L.contains(I.relatedTarget)||un(I)}function Me(I){return $n.isTouch?Pe()!==I.type.indexOf("touch")>=0:!1}function Qr(){Vi();var I=C.props,G=I.popperOptions,ne=I.placement,Ce=I.offset,Se=I.getReferenceClientRect,ht=I.moveTransition,zt=Be()?kc(L).arrow:null,er=Se?{getBoundingClientRect:Se,contextElement:Se.contextElement||Ne()}:n,Ho={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Fi){var Mr=Fi.state;if(Be()){var ta=nt(),Uo=ta.box;["placement","reference-hidden","escaped"].forEach(function(zi){zi==="placement"?Uo.setAttribute("data-placement",Mr.placement):Mr.attributes.popper["data-popper-"+zi]?Uo.setAttribute("data-"+zi,""):Uo.removeAttribute("data-"+zi)}),Mr.attributes.popper={}}}},tr=[{name:"offset",options:{offset:Ce}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ht}},Ho];Be()&&zt&&tr.push({name:"arrow",options:{element:zt,padding:3}}),tr.push.apply(tr,(G==null?void 0:G.modifiers)||[]),C.popperInstance=JE(er,L,Object.assign({},G,{placement:ne,onFirstUpdate:y,modifiers:tr}))}function Vi(){C.popperInstance&&(C.popperInstance.destroy(),C.popperInstance=null)}function Dt(){var I=C.props.appendTo,G,ne=Ne();C.props.interactive&&I===mh||I==="parent"?G=ne.parentNode:G=gh(I,[ne]),G.contains(L)||G.appendChild(L),C.state.isMounted=!0,Qr(),process.env.NODE_ENV!=="production"&&Qn(C.props.interactive&&I===Gt.appendTo&&ne.nextElementSibling!==L,["Interactive tippy element may not be accessible via keyboard","navigation because it is not directly after the reference element","in the DOM source order.",`

`,"Using a wrapper <div> or <span> tag around the reference element","solves this by creating a new parentNode context.",`

`,"Specifying `appendTo: document.body` silences this warning, but it","assumes you are using a focus management solution to handle","keyboard navigation.",`

`,"See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity"].join(" "))}function Qe(){return Gs(L.querySelectorAll("[data-tippy-root]"))}function Sn(I){C.clearDelayTimeouts(),I&&De("onTrigger",[C,I]),Je();var G=Ke(!0),ne=we(),Ce=ne[0],Se=ne[1];$n.isTouch&&Ce==="hold"&&Se&&(G=Se),G?r=setTimeout(function(){C.show()},G):C.show()}function un(I){if(C.clearDelayTimeouts(),De("onUntrigger",[C,I]),!C.state.isVisible){Ge();return}if(!(C.props.trigger.indexOf("mouseenter")>=0&&C.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(I.type)>=0&&a)){var G=Ke(!1);G?i=setTimeout(function(){C.state.isVisible&&C.hide()},G):o=requestAnimationFrame(function(){C.hide()})}}function ei(){C.state.isEnabled=!0}function zn(){C.hide(),C.state.isEnabled=!1}function $i(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Hn(I){if(process.env.NODE_ENV!=="production"&&Qn(C.state.isDestroyed,Bi("setProps")),!C.state.isDestroyed){De("onBeforeUpdate",[C,I]),Re();var G=C.props,ne=Oh(n,Object.assign({},G,vh(I),{ignoreAttributes:!0}));C.props=ne,le(),G.interactiveDebounce!==ne.interactiveDebounce&&(qe(),w=yh(ee,ne.interactiveDebounce)),G.triggerTarget&&!ne.triggerTarget?Pi(G.triggerTarget).forEach(function(Ce){Ce.removeAttribute("aria-expanded")}):ne.triggerTarget&&n.removeAttribute("aria-expanded"),rt(),Le(),Q&&Q(G,ne),C.popperInstance&&(Qr(),Qe().forEach(function(Ce){requestAnimationFrame(Ce._tippy.popperInstance.forceUpdate)})),De("onAfterUpdate",[C,I])}}function En(I){C.setProps({content:I})}function Lo(){process.env.NODE_ENV!=="production"&&Qn(C.state.isDestroyed,Bi("show"));var I=C.state.isVisible,G=C.state.isDestroyed,ne=!C.state.isEnabled,Ce=$n.isTouch&&!C.props.touch,Se=gc(C.props.duration,0,Gt.duration);if(!(I||G||ne||Ce)&&!Ne().hasAttribute("disabled")&&(De("onShow",[C],!1),C.props.onShow(C)!==!1)){if(C.state.isVisible=!0,Be()&&(L.style.visibility="visible"),Le(),Je(),C.state.isMounted||(L.style.transition="none"),Be()){var ht=nt(),zt=ht.box,er=ht.content;bc([zt,er],0)}y=function(){var tr;if(!(!C.state.isVisible||d)){if(d=!0,L.offsetHeight,L.style.transition=C.props.moveTransition,Be()&&C.props.animation){var Wo=nt(),Fi=Wo.box,Mr=Wo.content;bc([Fi,Mr],Se),wh([Fi,Mr],"visible")}Ft(),rt(),bh(Sc,C),(tr=C.popperInstance)==null||tr.forceUpdate(),De("onMount",[C]),C.props.animation&&Be()&&H(Se,function(){C.state.isShown=!0,De("onShown",[C])})}},Dt()}}function Vo(){process.env.NODE_ENV!=="production"&&Qn(C.state.isDestroyed,Bi("hide"));var I=!C.state.isVisible,G=C.state.isDestroyed,ne=!C.state.isEnabled,Ce=gc(C.props.duration,1,Gt.duration);if(!(I||G||ne)&&(De("onHide",[C],!1),C.props.onHide(C)!==!1)){if(C.state.isVisible=!1,C.state.isShown=!1,d=!1,a=!1,Be()&&(L.style.visibility="hidden"),qe(),Ge(),Le(!0),Be()){var Se=nt(),ht=Se.box,zt=Se.content;C.props.animation&&(bc([ht,zt],Ce),wh([ht,zt],"hidden"))}Ft(),rt(),C.props.animation?Be()&&R(Ce,C.unmount):C.unmount()}}function $o(I){process.env.NODE_ENV!=="production"&&Qn(C.state.isDestroyed,Bi("hideWithInteractivity")),ct().addEventListener("mousemove",w),bh(Xs,w),w(I)}function Fo(){process.env.NODE_ENV!=="production"&&Qn(C.state.isDestroyed,Bi("unmount")),C.state.isVisible&&C.hide(),C.state.isMounted&&(Vi(),Qe().forEach(function(I){I._tippy.unmount()}),L.parentNode&&L.parentNode.removeChild(L),Sc=Sc.filter(function(I){return I!==C}),C.state.isMounted=!1,De("onHidden",[C]))}function zo(){process.env.NODE_ENV!=="production"&&Qn(C.state.isDestroyed,Bi("destroy")),!C.state.isDestroyed&&(C.clearDelayTimeouts(),C.unmount(),Re(),delete n._tippy,C.state.isDestroyed=!0,De("onDestroy",[C]))}}function Li(n,e){e===void 0&&(e={});var t=Gt.plugins.concat(e.plugins||[]);process.env.NODE_ENV!=="production"&&(m_(n),Nh(e,t)),u_();var r=Object.assign({},e,{plugins:t}),i=o_(n);if(process.env.NODE_ENV!=="production"){var o=Po(r.content),a=i.length>1;Qn(o&&a,["tippy() was passed an Element as the `content` prop, but more than","one tippy instance was created by this invocation. This means the","content element will only be appended to the last tippy instance.",`

`,"Instead, pass the .innerHTML of the element, or use a function that","returns a cloned version of the element instead.",`

`,`1) content: element.innerHTML
`,"2) content: () => element.cloneNode(true)"].join(" "))}var c=i.reduce(function(u,d){var h=d&&k_(d,r);return h&&u.push(h),u},[]);return Po(n)?c[0]:c}Li.defaultProps=Gt,Li.setDefaultProps=b_,Li.currentInput=$n,Object.assign({},Xp,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}}),Li.setDefaultProps({render:Dh});class S_{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:c,state:u,from:d,to:h})=>{const{doc:m,selection:y}=u,{empty:b}=y,w=!m.textBetween(d,h).length&&Ql(u.selection),E=this.element.contains(document.activeElement);return!(!(c.hasFocus()||E)||b||w||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:c})=>{var u;if(this.preventHide){this.preventHide=!1;return}(c==null?void 0:c.relatedTarget)&&((u=this.element.parentNode)===null||u===void 0?void 0:u.contains(c.relatedTarget))||this.hide()},this.tippyBlurHandler=c=>{this.blurHandler({event:c})},this.handleDebouncedUpdate=(c,u)=>{const d=!(u!=null&&u.selection.eq(c.state.selection)),h=!(u!=null&&u.doc.eq(c.state.doc));!d&&!h||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(c,d,h,u)},this.updateDelay))},this.updateHandler=(c,u,d,h)=>{var m,y,b;const{state:w,composing:E}=c,{selection:_}=w;if(E||!u&&!d)return;this.createTooltip();const{ranges:D}=_,z=Math.min(...D.map(L=>L.$from.pos)),C=Math.max(...D.map(L=>L.$to.pos));if(!((m=this.shouldShow)===null||m===void 0?void 0:m.call(this,{editor:this.editor,view:c,state:w,oldState:h,from:z,to:C}))){this.hide();return}(y=this.tippy)===null||y===void 0||y.setProps({getReferenceClientRect:((b=this.tippyOptions)===null||b===void 0?void 0:b.getReferenceClientRect)||(()=>{if(SS(w.selection)){let L=c.nodeDOM(z);const Q=L.dataset.nodeViewWrapper?L:L.querySelector("[data-node-view-wrapper]");if(Q&&(L=Q.firstChild),L)return L.getBoundingClientRect()}return jp(c,z,C)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Li(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,i=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),a=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,a,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Rh=n=>new Bt({key:typeof n.pluginKey=="string"?new Dn(n.pluginKey):n.pluginKey,view:e=>new S_({view:e,...n})});Mt.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Rh({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class E_{constructor({editor:e,element:t,view:r,tippyOptions:i={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:c})=>{const{selection:u}=c,{$anchor:d,empty:h}=u,m=d.depth===1,y=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent;return!(!a.hasFocus()||!h||!m||!y||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var c;if(this.preventHide){this.preventHide=!1;return}(a==null?void 0:a.relatedTarget)&&((c=this.element.parentNode)===null||c===void 0?void 0:c.contains(a.relatedTarget))||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.editor=e,this.element=t,this.view=r,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Li(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){var r,i,o;const{state:a}=e,{doc:c,selection:u}=a,{from:d,to:h}=u;if(t&&t.doc.eq(c)&&t.selection.eq(u))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:a,oldState:t}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((o=this.tippyOptions)===null||o===void 0?void 0:o.getReferenceClientRect)||(()=>jp(e,d,h))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Ih=n=>new Bt({key:typeof n.pluginKey=="string"?new Dn(n.pluginKey):n.pluginKey,view:e=>new E_({view:e,...n})});Mt.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Ih({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),p.defineComponent({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=p.ref(null);return p.onMounted(()=>{const{updateDelay:r,editor:i,pluginKey:o,shouldShow:a,tippyOptions:c}=n;i.registerPlugin(Rh({updateDelay:r,editor:i,element:t.value,pluginKey:o,shouldShow:a,tippyOptions:c}))}),p.onBeforeUnmount(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return p.h("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function Ph(n){return p.customRef((e,t)=>({get(){return e(),n},set(r){n=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}class __ extends HS{constructor(e={}){return super(e),this.vueRenderers=p.reactive(new Map),this.contentComponent=null,this.reactiveState=Ph(this.view.state),this.reactiveExtensionStorage=Ph(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),p.markRaw(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const Bh=p.defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const e=p.ref(),t=p.getCurrentInstance();return p.watchEffect(()=>{const r=n.editor;r&&r.options.element&&e.value&&p.nextTick(()=>{if(!e.value||!r.options.element.firstChild)return;const i=p.unref(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=t.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),p.onBeforeUnmount(()=>{const r=n.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const n=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const t=p.h(p.Teleport,{to:e.teleportElement,key:e.id},p.h(e.component,{ref:e.id,...e.props}));n.push(t)}),p.h("div",{ref:e=>{this.rootEl=e}},...n)}});p.defineComponent({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=p.ref(null);return p.onMounted(()=>{const{pluginKey:r,editor:i,tippyOptions:o,shouldShow:a}=n;i.registerPlugin(Ih({pluginKey:r,editor:i,element:t.value,tippyOptions:o,shouldShow:a}))}),p.onBeforeUnmount(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return p.h("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}}),p.defineComponent({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return p.h(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),p.defineComponent({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var n,e;return p.h(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))}});const Lh=(n={})=>{const e=p.shallowRef();return p.onMounted(()=>{e.value=new __(n)}),p.onBeforeUnmount(()=>{var t;(t=e.value)===null||t===void 0||t.destroy()}),e},C_=/^\s*>\s$/,T_=wt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Co({find:C_,type:this.type})]}}),O_=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,N_=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,M_=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,A_=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,D_=Bn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ni({find:O_,type:this.type}),Ni({find:M_,type:this.type})]},addPasteRules(){return[Mi({find:N_,type:this.type}),Mi({find:A_,type:this.type})]}}),R_=wt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",tt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Vh=Bn.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=Ws(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),$h=/^\s*([-+*])\s$/,I_=wt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(R_.name,this.editor.getAttributes(Vh.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Co({find:$h,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Co({find:$h,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Vh.name),editor:this.editor})),[n]}}),P_=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,B_=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,L_=Bn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ni({find:P_,type:this.type})]},addPasteRules(){return[Mi({find:B_,type:this.type})]}}),V_=/^```([a-z]+)?[\s\n]$/,$_=/^~~~([a-z]+)?[\s\n]$/,F_=wt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",tt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!o||!a?!1:n.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0||r.nodeAt(c)?!1:n.commands.exitCode()}}},addInputRules(){return[sc({find:V_,type:this.type,getAttributes:n=>({language:n[1]})}),sc({find:$_,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Bt({key:new Dn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!t||!o)return!1;const{tr:a}=n.state;return a.replaceSelectionWith(this.type.create({language:o})),a.setSelection(fe.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.insertText(t.replace(/\r\n?/g,`
`)),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),z_=wt.create({name:"doc",topNode:!0,content:"block+"});function H_(n={}){return new Bt({view(e){return new W_(e,n)}})}class W_{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=a=>{this[i](a)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let c=e.nodeBefore,u=e.nodeAfter;if(c||u){let d=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(d){let h=d.getBoundingClientRect(),m=c?h.bottom:h.top;c&&u&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:h.left,right:h.right,top:m-this.width/2,bottom:m+this.width/2}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos);r={left:c.left-this.width/2,right:c.left+this.width/2,top:c.top,bottom:c.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let o,a;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,a=-pageYOffset;else{let c=i.getBoundingClientRect();o=c.left-i.scrollLeft,a=c.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-a+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=rd(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const U_=Mt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[H_(this.options)]}});class Ue extends pe{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ue.valid(r)?new Ue(r):pe.near(r)}content(){return K.empty}eq(e){return e instanceof Ue&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ue(e.resolve(t.pos))}getBookmark(){return new Ec(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!j_(e)||!K_(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ue.valid(e))return e;let i=e.pos,o=null;for(let a=e.depth;;a--){let c=e.node(a);if(t>0?e.indexAfter(a)<c.childCount:e.index(a)>0){o=c.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let u=e.doc.resolve(i);if(Ue.valid(u))return u}for(;;){let a=t>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!te.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=a,i+=t;let c=e.doc.resolve(i);if(Ue.valid(c))return c}return null}}}Ue.prototype.visible=!1,Ue.findFrom=Ue.findGapCursorFrom,pe.jsonID("gapcursor",Ue);class Ec{constructor(e){this.pos=e}map(e){return new Ec(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ue.valid(t)?new Ue(t):pe.near(t)}}function j_(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function K_(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function q_(){return new Bt({props:{decorations:Y_,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ue.valid(t)?new Ue(t):null},handleClick:G_,handleKeyDown:J_,handleDOMEvents:{beforeinput:X_}}})}const J_=_p({ArrowLeft:Ys("horiz",-1),ArrowRight:Ys("horiz",1),ArrowUp:Ys("vert",-1),ArrowDown:Ys("vert",1)});function Ys(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let a=r.selection,c=e>0?a.$to:a.$from,u=a.empty;if(a instanceof fe){if(!o.endOfTextblock(t)||c.depth==0)return!1;u=!1,c=r.doc.resolve(e>0?c.after():c.before())}let d=Ue.findGapCursorFrom(c,e,u);return d?(i&&i(r.tr.setSelection(new Ue(d))),!0):!1}}function G_(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ue.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&te.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ue(r))),!0)}function X_(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ue))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=F.empty;for(let a=r.length-1;a>=0;a--)i=F.from(r[a].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new K(i,0,0));return o.setSelection(fe.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function Y_(n){if(!(n.selection instanceof Ue))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",et.create(n.doc,[sn.widget(n.selection.head,e,{key:"gapcursor"})])}const Z_=Mt.create({name:"gapCursor",addProseMirrorPlugins(){return[q_()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=he(X(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Q_=wt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",tt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=r.extensionManager,u=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&a){const m=u.filter(y=>c.includes(y.type.name));d.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),eC=wt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,tt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>sc({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Zs=200,lt=function(){};lt.prototype.append=function(e){return e.length?(e=lt.from(e),!this.length&&e||e.length<Zs&&this.leafAppend(e)||this.length<Zs&&e.leafPrepend(this)||this.appendInner(e)):this},lt.prototype.prepend=function(e){return e.length?lt.from(e).append(this):this},lt.prototype.appendInner=function(e){return new tC(this,e)},lt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?lt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},lt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},lt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)},lt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,a){return i.push(e(o,a))},t,r),i},lt.from=function(e){return e instanceof lt?e:e&&e.length?new Fh(e):lt.empty};var Fh=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,a,c){for(var u=o;u<a;u++)if(i(this.values[u],c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,a,c){for(var u=o-1;u>=a;u--)if(i(this.values[u],c+u)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Zs)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Zs)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(lt);lt.empty=new Fh([]);var tC=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,a){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(o,c),a)===!1||o>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,o)-c,a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,a){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(o,c)-c,a+c)===!1||o<c&&this.left.forEachInvertedInner(r,Math.min(i,c),o,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(lt);const nC=500;class kn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let a=e.tr,c,u,d=[],h=[];return this.items.forEach((m,y)=>{if(!m.step){i||(i=this.remapping(r,y+1),o=i.maps.length),o--,h.push(m);return}if(i){h.push(new Fn(m.map));let b=m.step.map(i.slice(o)),w;b&&a.maybeStep(b).doc&&(w=a.mapping.maps[a.mapping.maps.length-1],d.push(new Fn(w,void 0,void 0,d.length+h.length))),o--,w&&i.appendMap(w,o)}else a.maybeStep(m.step);if(m.selection)return c=i?m.selection.map(i.slice(o)):m.selection,u=new kn(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:a,selection:c}}addTransform(e,t,r,i){let o=[],a=this.eventCount,c=this.items,u=!i&&c.length?c.get(c.length-1):null;for(let h=0;h<e.steps.length;h++){let m=e.steps[h].invert(e.docs[h]),y=new Fn(e.mapping.maps[h],m,t),b;(b=u&&u.merge(y))&&(y=b,h?o.pop():c=c.slice(0,c.length-1)),o.push(y),t&&(a++,t=void 0),i||(u=y)}let d=a-r.depth;return d>iC&&(c=rC(c,d),a-=d),new kn(c.append(o),a)}remapping(e,t){let r=new pi;return this.items.forEach((i,o)=>{let a=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new kn(this.items.append(e.map(t=>new Fn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,a=e.steps.length,c=this.eventCount;this.items.forEach(y=>{y.selection&&c--},i);let u=t;this.items.forEach(y=>{let b=o.getMirror(--u);if(b==null)return;a=Math.min(a,b);let w=o.maps[b];if(y.step){let E=e.steps[b].invert(e.docs[b]),_=y.selection&&y.selection.map(o.slice(u+1,b));_&&c++,r.push(new Fn(w,E,_))}else r.push(new Fn(w))},i);let d=[];for(let y=t;y<a;y++)d.push(new Fn(o.maps[y]));let h=this.items.slice(0,i).append(d).append(r),m=new kn(h,c);return m.emptyItemCount()>nC&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((a,c)=>{if(c>=e)i.push(a),a.selection&&o++;else if(a.step){let u=a.step.map(t.slice(r)),d=u&&u.getMap();if(r--,d&&t.appendMap(d,r),u){let h=a.selection&&a.selection.map(t.slice(r));h&&o++;let m=new Fn(d.invert(),u,h),y,b=i.length-1;(y=i.length&&i[b].merge(m))?i[b]=y:i.push(m)}}else a.map&&r--},this.items.length,0),new kn(lt.from(i.reverse()),o)}}kn.empty=new kn(lt.empty,0);function rC(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Fn{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Fn(t.getMap().invert(),t,this.selection)}}}class Or{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const iC=20;function oC(n,e,t,r){let i=t.getMeta(Nr),o;if(i)return i.historyState;t.getMeta(aC)&&(n=new Or(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Nr))return a.getMeta(Nr).redo?new Or(n.done.addTransform(t,void 0,r,Qs(e)),n.undone,zh(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new Or(n.done,n.undone.addTransform(t,void 0,r,Qs(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let c=t.getMeta("composition"),u=n.prevTime==0||!a&&n.prevComposition!=c&&(n.prevTime<(t.time||0)-r.newGroupDelay||!sC(t,n.prevRanges)),d=a?_c(n.prevRanges,t.mapping):zh(t.mapping.maps[t.steps.length-1]);return new Or(n.done.addTransform(t,u?e.selection.getBookmark():void 0,r,Qs(e)),kn.empty,d,t.time,c==null?n.prevComposition:c)}else return(o=t.getMeta("rebased"))?new Or(n.done.rebased(t,o),n.undone.rebased(t,o),_c(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Or(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),_c(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function sC(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function zh(n){let e=[];return n.forEach((t,r,i,o)=>e.push(i,o)),e}function _c(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function Hh(n,e,t,r){let i=Qs(e),o=Nr.get(e).spec.config,a=(r?n.undone:n.done).popEvent(e,i);if(!a)return;let c=a.selection.resolve(a.transform.doc),u=(r?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),o,i),d=new Or(r?u:a.remaining,r?a.remaining:u,null,0,-1);t(a.transform.setSelection(c).setMeta(Nr,{redo:r,historyState:d}).scrollIntoView())}let Cc=!1,Wh=null;function Qs(n){let e=n.plugins;if(Wh!=e){Cc=!1,Wh=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Cc=!0;break}}return Cc}const Nr=new Dn("history"),aC=new Dn("closeHistory");function lC(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Bt({key:Nr,state:{init(){return new Or(kn.empty,kn.empty,null,0,-1)},apply(e,t,r){return oC(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Uh:r=="historyRedo"?jh:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const Uh=(n,e)=>{let t=Nr.getState(n);return!t||t.done.eventCount==0?!1:(e&&Hh(t,n,e,!1),!0)},jh=(n,e)=>{let t=Nr.getState(n);return!t||t.undone.eventCount==0?!1:(e&&Hh(t,n,e,!0),!0)},cC=Mt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Uh(n,e),redo:()=>({state:n,dispatch:e})=>jh(n,e)}},addProseMirrorPlugins(){return[lC(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),uC=wt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",tt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{$to:t}=e.selection,r=n();return t.parentOffset===0?r.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:o})=>{var a;if(o){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(fe.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(te.create(i.doc,c.pos)):i.setSelection(fe.create(i.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(i.insert(u,d),i.setSelection(fe.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[WS({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),fC=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,dC=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,pC=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,hC=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,mC=Bn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ni({find:fC,type:this.type}),Ni({find:pC,type:this.type})]},addPasteRules(){return[Mi({find:dC,type:this.type}),Mi({find:hC,type:this.type})]}}),gC=wt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",tt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),yC=wt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",tt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Kh=Bn.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=Ws(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),qh=/^(\d+)\.\s$/,bC=wt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",tt(this.options.HTMLAttributes,t),0]:["ol",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yC.name,this.editor.getAttributes(Kh.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Co({find:qh,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Co({find:qh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Kh.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),vC=wt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wC=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,xC=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,kC=Bn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",tt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){const n={};return tc()?n["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():n["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),n},addInputRules(){return[Ni({find:wC,type:this.type})]},addPasteRules(){return[Mi({find:xC,type:this.type})]}}),SC=wt.create({name:"text",group:"inline"}),ea=Mt.create({name:"starterKit",addExtensions(){var n,e,t,r,i,o,a,c,u,d,h,m,y,b,w,E,_,N;const D=[];return this.options.blockquote!==!1&&D.push(T_.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&D.push(D_.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&D.push(I_.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&D.push(L_.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&D.push(F_.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&D.push(z_.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&D.push(U_.configure((a=this.options)===null||a===void 0?void 0:a.dropcursor)),this.options.gapcursor!==!1&&D.push(Z_.configure((c=this.options)===null||c===void 0?void 0:c.gapcursor)),this.options.hardBreak!==!1&&D.push(Q_.configure((u=this.options)===null||u===void 0?void 0:u.hardBreak)),this.options.heading!==!1&&D.push(eC.configure((d=this.options)===null||d===void 0?void 0:d.heading)),this.options.history!==!1&&D.push(cC.configure((h=this.options)===null||h===void 0?void 0:h.history)),this.options.horizontalRule!==!1&&D.push(uC.configure((m=this.options)===null||m===void 0?void 0:m.horizontalRule)),this.options.italic!==!1&&D.push(mC.configure((y=this.options)===null||y===void 0?void 0:y.italic)),this.options.listItem!==!1&&D.push(gC.configure((b=this.options)===null||b===void 0?void 0:b.listItem)),this.options.orderedList!==!1&&D.push(bC.configure((w=this.options)===null||w===void 0?void 0:w.orderedList)),this.options.paragraph!==!1&&D.push(vC.configure((E=this.options)===null||E===void 0?void 0:E.paragraph)),this.options.strike!==!1&&D.push(kC.configure((_=this.options)===null||_===void 0?void 0:_.strike)),this.options.text!==!1&&D.push(SC.configure((N=this.options)===null||N===void 0?void 0:N.text)),D}}),EC={name:"LaravelCmsAdminPageAddComponentForm",props:["templateSections","globalComponents"],components:{EditorContent:Bh,StarterKit:ea},setup(n,{emit:e}){const t={type:null,html:null,view:null,name:null},r=p.reactive({...t}),i=p.ref([]),o=Lh({content:r.html,extensions:[ea],onUpdate:({editor:h})=>{r.html=h.getHTML()}});async function a(){const m=await(await fetch("/api/cms-views")).json();i.value=m.data}async function c(){!this.valid||(e("add",Object.assign({},r)),Object.assign(r,t))}p.watch(()=>r.type,(h,m)=>{r.html=null,r.view=null});const u=p.computed(()=>_t.exports.sortBy(n.globalComponents||[],h=>h.name));a();const d=p.computed(()=>{if(!r.type)return!1;if(r.type=="new-text"){if(!r.html||!r.name)return!1}else if(r.type=="new-view"&&(!r.view||!r.name))return!1;return!0});return{component:r,componentsSorted:u,views:i,valid:d,onSubmit:c,editor:o}}},_C=p.createElementVNode("legend",null,"Add Item to Page",-1),CC={class:"form-group mx-2"},TC={class:"form-label",for:"type"},OC=p.createElementVNode("option",{value:""},"Select Type",-1),NC=p.createElementVNode("option",{value:""},"-- New Component --",-1),MC=p.createElementVNode("option",{value:"new-text"},"HTML/Markdown",-1),AC=p.createElementVNode("option",{value:"new-view"},"Laravel View",-1),DC=p.createElementVNode("option",{value:""},"-- Existing Component --",-1),RC=["value"],IC={class:"form-group mx-2"},PC=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),BC={key:0,class:"form-group mx-2"},LC=p.createElementVNode("label",{class:"form-label",for:"html"},"Body",-1),VC={key:1,class:"form-group mx-2"},$C=p.createElementVNode("label",{class:"form-label",for:"view"},"Laravel View",-1),FC=p.createElementVNode("option",{value:""},"Select",-1),zC=["value"],HC={class:"form-group mx-2"},WC=p.createElementVNode("label",{class:"form-label",for:"cms_template_section_id"},"Template Section",-1),UC=p.createElementVNode("option",{value:""},"Select",-1),jC=["value"],KC=p.createElementVNode("button",{class:"btn mx-2",style:{float:"right"},disabled:1}," Cancel ",-1),qC=["disabled"];function JC(n,e,t,r,i,o){var c;const a=p.resolveComponent("editor-content");return p.openBlock(),p.createElementBlock("form",{onSubmit:e[4]||(e[4]=p.withModifiers((...u)=>r.onSubmit&&r.onSubmit(...u),["prevent"]))},[p.createElementVNode("fieldset",null,[_C,p.createElementVNode("div",CC,[p.createElementVNode("label",TC,"Select Component "+p.toDisplayString(r.component.type),1),p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"type",id:"type","onUpdate:modelValue":e[0]||(e[0]=u=>r.component.type=u)},[OC,NC,MC,AC,(c=r.componentsSorted)!=null&&c.length?(p.openBlock(),p.createElementBlock(p.Fragment,{key:0},[DC,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.componentsSorted,u=>(p.openBlock(),p.createElementBlock("option",{key:u.id,value:u.id},p.toDisplayString(u.name),9,RC))),128))],64)):p.createCommentVNode("",!0)],512),[[p.vModelSelect,r.component.type]])]),p.createElementVNode("div",IC,[PC,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[1]||(e[1]=u=>r.component.name=u)},null,512),[[p.vModelText,r.component.name]])]),r.component.type=="new-text"||r.component.type=="new-view"?(p.openBlock(),p.createElementBlock(p.Fragment,{key:0},[r.component.type=="new-text"&&r.editor?(p.openBlock(),p.createElementBlock("div",BC,[LC,p.createVNode(a,{editor:r.editor},null,8,["editor"])])):p.createCommentVNode("",!0),r.component.type=="new-view"?(p.openBlock(),p.createElementBlock("div",VC,[$C,p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"view",id:"view","onUpdate:modelValue":e[2]||(e[2]=u=>r.component.view=u)},[FC,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.views,u=>(p.openBlock(),p.createElementBlock("option",{key:u,value:u},p.toDisplayString(u),9,zC))),128))],512),[[p.vModelSelect,r.component.view]])])):p.createCommentVNode("",!0)],64)):p.createCommentVNode("",!0),p.createElementVNode("div",HC,[WC,p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"cms_template_section_id",id:"cms_template_section_id","onUpdate:modelValue":e[3]||(e[3]=u=>r.component.cms_template_section_id=u)},[UC,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(t.templateSections,u=>(p.openBlock(),p.createElementBlock("option",{key:u.id,value:u.id},p.toDisplayString(u.name),9,jC))),128))],512),[[p.vModelSelect,r.component.cms_template_section_id]])]),KC,p.createElementVNode("button",{class:"btn btn-primary mx-2",disabled:!r.valid}," Add Component ",8,qC)])],32)}const GC=ye(EC,[["render",JC]]),XC={name:"LaravelCmsAdminPageEditComponentForm",props:["templateSections","component"],components:{EditorContent:Bh,StarterKit:ea},setup(n,{emit:e}){const t=p.ref([]),r=Lh({content:n.component.html,extensions:[ea],onUpdate:({editor:u})=>{n.component.html=u.getHTML()}});async function i(){const d=await(await fetch("/api/cms-views")).json();t.value=d.data}async function o(){!this.valid||e("update",n.component)}const a=p.computed(()=>_t.exports.sortBy(n.globalComponents||[],u=>u.name));i();const c=p.computed(()=>!0);return{componentsSorted:a,views:t,valid:c,onSubmit:o,editor:r}}},YC=p.createElementVNode("legend",null,"Edit Component",-1),ZC={class:"form-group mx-2"},QC=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),eT={key:0,class:"form-group mx-2"},tT=p.createElementVNode("label",{class:"form-label",for:"view"},"Laravel View",-1),nT=p.createElementVNode("option",{value:""},"Select",-1),rT=["value"],iT={key:1,class:"form-group mx-2"},oT=p.createElementVNode("label",{class:"form-label",for:"html"},"Body",-1),sT={class:"form-group mx-2"},aT=p.createElementVNode("label",{class:"form-label",for:"cms_template_section_id"},"Template Section",-1),lT=p.createElementVNode("option",{value:""},"Select",-1),cT=["value"],uT=p.createElementVNode("button",{class:"btn mx-2",style:{float:"right"},disabled:1}," Cancel ",-1),fT=["disabled"];function dT(n,e,t,r,i,o){const a=p.resolveComponent("editor-content");return p.openBlock(),p.createElementBlock("form",{onSubmit:e[3]||(e[3]=p.withModifiers((...c)=>r.onSubmit&&r.onSubmit(...c),["prevent"]))},[p.createElementVNode("fieldset",null,[YC,p.createElementVNode("div",ZC,[QC,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=c=>t.component.name=c)},null,512),[[p.vModelText,t.component.name]])]),t.component.view?(p.openBlock(),p.createElementBlock("div",eT,[tT,p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"view",id:"view","onUpdate:modelValue":e[1]||(e[1]=c=>t.component.view=c)},[nT,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.views,c=>(p.openBlock(),p.createElementBlock("option",{key:c,value:c},p.toDisplayString(c),9,rT))),128))],512),[[p.vModelSelect,t.component.view]])])):(p.openBlock(),p.createElementBlock("div",iT,[oT,p.createVNode(a,{editor:r.editor},null,8,["editor"])])),p.createElementVNode("div",sT,[aT,p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"cms_template_section_id",id:"cms_template_section_id","onUpdate:modelValue":e[2]||(e[2]=c=>t.component.cms_template_section_id=c)},[lT,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(t.templateSections,c=>(p.openBlock(),p.createElementBlock("option",{key:c.id,value:c.id},p.toDisplayString(c.name),9,cT))),128))],512),[[p.vModelSelect,t.component.cms_template_section_id]])]),uT,p.createElementVNode("button",{class:"btn btn-primary mx-2",disabled:!r.valid}," Update Component ",8,fT)])],32)}const pT={name:"LaravelCmsAdminPageContent",props:["page"],components:{UnsortedComponents:rv,TemplateSections:lv,ComponentAddForm:GC,ComponentEditForm:ye(XC,[["render",dT]])},setup(n,{emit:e}){const t=p.ref(n.page.components),r=p.ref([]),i=p.ref(null);async function o(m){if(!isNaN(m.type)){const w=await fetch("/api/cms-component-page",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify({cms_page_id:n.page.id,cms_component_id:m.type,cms_template_section_id:m.cms_template_section_id})}),E=await w.json();if(!w.ok){ue({title:E.message,type:"error"});return}t.value.push(Object.assign(m,E.data.component)),ue({title:"New component added.",type:"success"});return}m.cms_page_id=n.page.id,m.is_global=!1;const y=await fetch("/api/cms-components",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(m)}),b=await y.json();if(!y.ok){ue({title:b.message,type:"error"});return}t.value.push(Object.assign(m,b.data)),ue({title:"New component added.",type:"success"})}async function a(){let m="/api/cms-components?"+new URLSearchParams({"q[]":["is_global[eq]=TRUE"]}).toString();const b=await(await fetch(m)).json();r.value=b.data}async function c(m){const y=await fetch("/api/cms-component-page",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE",body:JSON.stringify({cms_page_id:n.page.id,cms_component_id:m.id})}),b=await y.json();if(!y.ok){ue({title:b.message,type:"error"});return}t.value.splice(t.value.map(w=>w.id).indexOf(m.id),1),ue({title:"Component removed.",type:"success"})}async function u(m){m.cms_page_id=n.page.id;const y=await fetch("/api/cms-components/"+m.id,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"PUT",body:JSON.stringify(m)}),b=await y.json();if(!y.ok){ue({title:b.message,type:"error"});return}t.value.splice(t.value.map(w=>w.id).indexOf(m.id),1,Object.assign(m,b.data)),ue({title:"Component update.",type:"success"})}const d=p.computed(()=>{var w;const y=(((w=n.page.template)==null?void 0:w.template_sections)||[]).map(function(E){return E.id}),b=_t.exports.filter(t.value,E=>!E.cms_template_section_id||y.indexOf(E.cms_template_section_id)==-1);return _t.exports.sortBy(b,"sort_order")});function h(m){i.value=m}return Promise.all([a()]),{selectedComponent:i,deleteComponent:c,pageComponents:t,globalComponents:r,unsortedComponents:d,selectComponent:h,onAddComponent:o,onUpdateComponent:u}}},hT={class:"container"},mT={class:"columns"},gT={class:"column col-6"},yT={class:"column col-6"};function bT(n,e,t,r,i,o){var h,m,y,b,w,E,_,N,D;const a=p.resolveComponent("unsorted-components"),c=p.resolveComponent("template-sections"),u=p.resolveComponent("component-edit-form"),d=p.resolveComponent("component-add-form");return p.openBlock(),p.createElementBlock("div",hT,[p.createElementVNode("div",mT,[p.createElementVNode("div",gT,[r.unsortedComponents.length>0?(p.openBlock(),p.createBlock(a,{key:0,"template-sections":(m=(h=t.page)==null?void 0:h.template)==null?void 0:m.template_sections,components:r.unsortedComponents,onSelect:r.selectComponent,onDelete:r.deleteComponent},null,8,["template-sections","components","onSelect","onDelete"])):p.createCommentVNode("",!0),p.createVNode(c,{"template-sections":(b=(y=t.page)==null?void 0:y.template)==null?void 0:b.template_sections,components:(w=t.page)==null?void 0:w.components,onSelect:r.selectComponent,onDelete:r.deleteComponent},null,8,["template-sections","components","onSelect","onDelete"])]),p.createElementVNode("div",yT,[r.selectedComponent?(p.openBlock(),p.createBlock(u,{key:0,component:r.selectedComponent,"template-sections":(_=(E=t.page)==null?void 0:E.template)==null?void 0:_.template_sections,onUpdate:r.onUpdateComponent},{default:p.withCtx(()=>[p.createTextVNode("EDIT")]),_:1},8,["component","template-sections","onUpdate"])):p.createCommentVNode("",!0),p.createVNode(d,{"template-sections":(D=(N=t.page)==null?void 0:N.template)==null?void 0:D.template_sections,"global-components":r.globalComponents,onAdd:r.onAddComponent},null,8,["template-sections","global-components","onAdd"])])])])}const vT=ye(pT,[["render",bT]]),wT={name:"LaravelCmsAdminPagePreview",props:["page"],components:{},setup(n,{emit:e}){const t=p.ref(null);console.log("...get page data");async function r(){const o=await(await fetch("/api/cms-render",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify({cms_page_id:n.page.id})})).json();t.value=o.data}return r(),{page:t}}};function xT(n,e,t,r,i,o){return p.toDisplayString(r.page)}const kT=ye(wT,[["render",xT]]),ST={name:"LaravelCmsAdminPageMainForm",props:["page","templates"],components:{},setup(n,{emit:e}){return{}}},ET={class:"form-group"},_T=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),CT={class:"form-group"},TT=p.createElementVNode("label",{class:"form-label",for:"path"},"Path",-1),OT={key:0,class:"form-group"},NT=p.createElementVNode("label",{class:"form-label",for:"template"},"Template",-1),MT=["value"];function AT(n,e,t,r,i,o){var a;return p.openBlock(),p.createElementBlock("fieldset",null,[p.createElementVNode("div",ET,[_T,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=c=>t.page.name=c)},null,512),[[p.vModelText,t.page.name]])]),p.createElementVNode("div",CT,[TT,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"path",id:"path","onUpdate:modelValue":e[1]||(e[1]=c=>t.page.path=c)},null,512),[[p.vModelText,t.page.path]])]),(a=t.templates)!=null&&a.length?(p.openBlock(),p.createElementBlock("div",OT,[NT,p.withDirectives(p.createElementVNode("select",{class:"form-select",name:"template",id:"template","onUpdate:modelValue":e[2]||(e[2]=c=>t.page.cms_template_id=c)},[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(t.templates,c=>(p.openBlock(),p.createElementBlock("option",{key:c.id,value:c.id},p.toDisplayString(c.name),9,MT))),128))],512),[[p.vModelSelect,t.page.cms_template_id,void 0,{number:!0}]])])):p.createCommentVNode("",!0)])}const DT=ye(ST,[["render",AT]]),RT={name:"LaravelCmsAdminPageSeoForm",props:["page"],components:{},setup(n,{emit:e}){return{}}},IT={class:"form-group"},PT=p.createElementVNode("label",{class:"form-label",for:"title"},"Title",-1),BT={class:"form-group"},LT=p.createElementVNode("label",{class:"form-label",for:"keywords"},"Meta Keywords",-1),VT={class:"form-group"},$T=p.createElementVNode("label",{class:"form-label",for:"keywords"},"Meta Description",-1);function FT(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("fieldset",null,[p.createElementVNode("div",IT,[PT,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"title",id:"title","onUpdate:modelValue":e[0]||(e[0]=a=>t.page.title=a)},null,512),[[p.vModelText,t.page.title]])]),p.createElementVNode("div",BT,[LT,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"meta_keywords",id:"meta_keywords","onUpdate:modelValue":e[1]||(e[1]=a=>t.page.meta_keywords=a)},null,512),[[p.vModelText,t.page.meta_keywords]])]),p.createElementVNode("div",VT,[$T,p.withDirectives(p.createElementVNode("textarea",{class:"form-input",name:"meta_description",id:"meta_description","onUpdate:modelValue":e[2]||(e[2]=a=>t.page.meta_description=a)},null,512),[[p.vModelText,t.page.meta_description]])])])}const zT={name:"LaravelCmsAdminPage",components:{PageContent:vT,PagePaths:U1,PagePreview:kT,MainForm:DT,SeoForm:ye(RT,[["render",FT]])},props:["id"],setup(n){const e=p.ref(null),t=p.ref(null),r=p.ref(null),i=p.ref([]);async function o(){const h=await(await fetch("/api/cms-pages/"+n.id)).json();e.value=h.data,r.value=Object.assign({},e.value)}async function a(){const h=await(await fetch("/api/cms-templates")).json();i.value=h.data}async function c(){const d=await fetch("/api/cms-pages/"+n.id,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"PUT",body:JSON.stringify(e.value)}),h=await d.json();if(!d.ok){ue({title:h.message,type:"error"});return}e.value=h.data,r.value=Object.assign({},e.value),ue({title:"Page updated.",type:"success"})}Promise.all([o(),a()]);const u=p.computed(()=>JSON.stringify(r.value)!=JSON.stringify(e.value));return{tab:t,page:e,templates:i,saveEnabled:u,onSubmit:c}}},HT={class:"tab",style:{"margin-bottom":"1rem"}},WT={key:0,class:"container"},UT={class:"columns"},jT={class:"column col-6"},KT=["disabled"];function qT(n,e,t,r,i,o){const a=p.resolveComponent("router-link"),c=p.resolveComponent("main-form"),u=p.resolveComponent("seo-form"),d=p.resolveComponent("page-paths"),h=p.resolveComponent("page-content"),m=p.resolveComponent("page-preview");return p.openBlock(),p.createElementBlock(p.Fragment,null,[p.createElementVNode("p",null,[p.createVNode(a,{to:"/pages"},{default:p.withCtx(()=>[p.createTextVNode("< Back")]),_:1})]),r.page?(p.openBlock(),p.createElementBlock(p.Fragment,{key:0},[p.createElementVNode("h2",null,"Edit Page: "+p.toDisplayString(r.page.name),1),p.createElementVNode("ul",HT,[p.createElementVNode("li",{class:p.normalizeClass(["tab-item",{active:r.tab=="main"||!r.tab}])},[p.createElementVNode("a",{href:"#",onClick:e[0]||(e[0]=p.withModifiers(y=>r.tab="main",["prevent"]))},"Main")],2),p.createElementVNode("li",{class:p.normalizeClass(["tab-item",{active:r.tab=="seo"}])},[p.createElementVNode("a",{href:"#",onClick:e[1]||(e[1]=p.withModifiers(y=>r.tab="seo",["prevent"]))},"SEO")],2),p.createElementVNode("li",{class:p.normalizeClass(["tab-item",{active:r.tab=="paths"}])},[p.createElementVNode("a",{href:"#",onClick:e[2]||(e[2]=p.withModifiers(y=>r.tab="paths",["prevent"]))},"Paths")],2),p.createElementVNode("li",{class:p.normalizeClass(["tab-item",{active:r.tab=="content"}])},[p.createElementVNode("a",{href:"#",onClick:e[3]||(e[3]=p.withModifiers(y=>r.tab="content",["prevent"]))},"Content")],2),p.createElementVNode("li",{class:p.normalizeClass(["tab-item",{active:r.tab=="preview"}])},[p.createElementVNode("a",{href:"#",onClick:e[4]||(e[4]=p.withModifiers(y=>r.tab="preview",["prevent"]))},"Preview")],2)]),r.tab=="main"||r.tab=="seo"||!r.tab?(p.openBlock(),p.createElementBlock("div",WT,[p.createElementVNode("div",UT,[p.createElementVNode("div",jT,[p.createElementVNode("form",{onSubmit:e[5]||(e[5]=p.withModifiers((...y)=>r.onSubmit&&r.onSubmit(...y),["prevent"]))},[p.withDirectives(p.createVNode(c,{page:r.page},null,8,["page"]),[[p.vShow,r.tab=="main"||!r.tab]]),p.withDirectives(p.createVNode(u,{page:r.page},null,8,["page"]),[[p.vShow,r.tab=="seo"]]),p.createElementVNode("button",{class:"btn btn-primary",disabled:!r.saveEnabled}," Update ",8,KT)],32)])])])):p.createCommentVNode("",!0),r.tab=="paths"?(p.openBlock(),p.createBlock(d,{key:1,page:r.page},null,8,["page"])):p.createCommentVNode("",!0),r.tab=="content"?(p.openBlock(),p.createBlock(h,{key:2,page:r.page},null,8,["page"])):p.createCommentVNode("",!0),r.tab=="preview"?(p.openBlock(),p.createBlock(m,{key:3,page:r.page},null,8,["page"])):p.createCommentVNode("",!0)],64)):p.createCommentVNode("",!0)],64)}const JT=ye(zT,[["render",qT]]),GT={name:"LaravelCmsAdminPagesListItem",props:["path"],setup(n,{emit:e}){async function t(){e("delete",n.path.id)}return{onDeleteClick:t}}};function XT(n,e,t,r,i,o){const a=p.resolveComponent("router-link");return p.openBlock(),p.createElementBlock("tr",null,[p.createElementVNode("td",null,p.toDisplayString(t.path.id),1),p.createElementVNode("td",null,p.toDisplayString(t.path.cms_page_id),1),p.createElementVNode("td",null,[p.createVNode(a,{to:"/paths/"+t.path.id},{default:p.withCtx(()=>[p.createTextVNode(p.toDisplayString(t.path.path),1)]),_:1},8,["to"])]),p.createElementVNode("td",null,[p.createElementVNode("button",{onClick:e[0]||(e[0]=p.withModifiers((...c)=>r.onDeleteClick&&r.onDeleteClick(...c),["prevent"])),class:"btn btn-link text-error"}," Delete ")])])}const YT={name:"LaravelCmsAdminPaths",components:{ListItem:ye(GT,[["render",XT]])},setup(n,{emit:e}){const t=p.ref([]),r=p.ref(!1);async function i(){const u=await(await fetch("/api/cms-paths")).json();t.value=u.data,r.value=!0}async function o(c){if(!(await fetch("/api/cms-paths/"+c,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Path deleted.",type:"warn"});var d=t.value.map(h=>h.id).indexOf(c);~d&&t.value.splice(d,1)}return i(),{pathsSorted:p.computed(()=>_t.exports.sortBy(t.value||[],c=>c.path)),loaded:r,onDelete:o}}},ZT=p.createElementVNode("h2",null,"Paths",-1),QT={key:0,class:"table"},eO=p.createElementVNode("tr",null,[p.createElementVNode("th",null,"Id"),p.createElementVNode("th",null,"Page Id"),p.createElementVNode("th",{colspan:"2"},"Path")],-1),tO={key:1},nO={key:2};function rO(n,e,t,r,i,o){const a=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock(p.Fragment,null,[ZT,r.loaded&&r.pathsSorted.length?(p.openBlock(),p.createElementBlock("table",QT,[eO,(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.pathsSorted,c=>(p.openBlock(),p.createBlock(a,{key:c.id,path:c,onDelete:r.onDelete},null,8,["path","onDelete"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",tO,"There are no paths.")):(p.openBlock(),p.createElementBlock("p",nO,"Loading..."))],64)}const iO=ye(YT,[["render",rO]]),oO={name:"LaravelCmsAdminTemplatesListItem",props:["template"],emits:["delete"],setup(n,{emit:e}){async function t(){e("delete",n.template.id)}return{onDeleteClick:t}}};function sO(n,e,t,r,i,o){const a=p.resolveComponent("router-link");return p.openBlock(),p.createElementBlock("tr",null,[p.createElementVNode("td",null,p.toDisplayString(t.template.id),1),p.createElementVNode("td",null,[p.createVNode(a,{to:"/templates/"+t.template.id},{default:p.withCtx(()=>[p.createTextVNode(p.toDisplayString(t.template.name),1)]),_:1},8,["to"])]),p.createElementVNode("td",null,p.toDisplayString(t.template.identifier),1),p.createElementVNode("td",null,[p.createElementVNode("button",{onClick:e[0]||(e[0]=p.withModifiers((...c)=>r.onDeleteClick&&r.onDeleteClick(...c),["prevent"])),class:"btn btn-link text-error"}," Delete ")])])}const aO=ye(oO,[["render",sO]]),lO={name:"LaravelCmsAdminTemplateAddForm",components:{},emits:["add"],setup(n,{emit:e}){const t=p.ref({});async function r(){!this.valid||(e("add",t.value),t.value={})}const i=p.computed(()=>t.value.name!=null&&t.value.identifier!=null);return{newTemplate:t,onSubmit:r,valid:i}}},cO={class:"form-group form-inline mx-2"},uO=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),fO={class:"form-group form-inline mx-2"},dO=p.createElementVNode("label",{class:"form-label",for:"identifier"},"Identifier",-1),pO=["disabled"];function hO(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("form",{onSubmit:e[2]||(e[2]=p.withModifiers((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"]))},[p.createElementVNode("fieldset",null,[p.createElementVNode("div",cO,[uO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>r.newTemplate.name=a)},null,512),[[p.vModelText,r.newTemplate.name]])]),p.createElementVNode("div",fO,[dO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"identifier",id:"identifier","onUpdate:modelValue":e[1]||(e[1]=a=>r.newTemplate.identifier=a)},null,512),[[p.vModelText,r.newTemplate.identifier]])]),p.createElementVNode("button",{class:"btn btn-primary mx-2",disabled:!r.valid}," Add Template ",8,pO)])],32)}const mO={name:"LaravelCmsAdminTemplates",components:{ListItem:aO,AddForm:ye(lO,[["render",hO]])},setup(n,{emit:e}){const t=xf(),r=p.inject("$cookies"),i=p.ref([]),o=p.ref(!1);async function a(){const m=await(await fetch("/api/cms-templates")).json();i.value=m.data,o.value=!0}async function c(h){const m=await fetch("/api/cms-templates",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":r.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(h)}),y=await m.json();if(!m.ok){ue({title:y.message,type:"error"});return}i.value.push(y.data),ue({title:"New template created.",type:"success"}),t.push("/templates/"+y.data.id)}async function u(h){if(!(await fetch("/api/cms-templates/"+h,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":r.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Template deleted.",type:"warn"});var y=i.value.map(b=>b.id).indexOf(h);~y&&i.value.splice(y,1)}return a(),{templatesSorted:p.computed(()=>_t.exports.sortBy(i.value||[],h=>h.name)),loaded:o,onAdd:c,onDelete:u}}},gO=p.createElementVNode("h2",null,"Add Template",-1),yO=p.createElementVNode("h2",null,"Existing Templates",-1),bO={key:0,class:"table"},vO={key:1},wO={key:2};function xO(n,e,t,r,i,o){const a=p.resolveComponent("add-form"),c=p.resolveComponent("list-item");return p.openBlock(),p.createElementBlock(p.Fragment,null,[gO,p.createVNode(a,{onAdd:r.onAdd},null,8,["onAdd"]),yO,r.loaded&&r.templatesSorted.length?(p.openBlock(),p.createElementBlock("table",bO,[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.templatesSorted,u=>(p.openBlock(),p.createBlock(c,{key:u.id,template:u,onDelete:r.onDelete},null,8,["template","onDelete"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",vO,"There are no templates.")):(p.openBlock(),p.createElementBlock("p",wO,"Loading..."))],64)}const kO=ye(mO,[["render",xO]]),SO=(n,e)=>{let t;return(...r)=>{t&&clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}},EO={name:"LaravelCmsAdminTemplatesListItem",props:["section"],emits:["delete","save"],setup(n,{emit:e}){p.watch(n.section,(i,o)=>{r()});async function t(){e("delete",n.section.id)}const r=SO(()=>{e("save",n.section)},1e3);return{onDeleteClick:t}}},_O={class:"form-group form-inline mx-2"},CO=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),TO={class:"form-group form-inline mx-2"},OO=p.createElementVNode("label",{class:"form-label",for:"identifier"},"Slug",-1);function NO(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("fieldset",null,[p.createElementVNode("div",_O,[CO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>t.section.name=a)},null,512),[[p.vModelText,t.section.name]])]),p.createElementVNode("div",TO,[OO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"identifier",id:"identifier","onUpdate:modelValue":e[1]||(e[1]=a=>t.section.identifier=a)},null,512),[[p.vModelText,t.section.identifier]])]),p.createElementVNode("button",{class:"btn btn-link text-error mx-2",onClick:e[2]||(e[2]=p.withModifiers((...a)=>r.onDeleteClick&&r.onDeleteClick(...a),["prevent"]))}," Delete ")])}const MO=ye(EO,[["render",NO]]),AO={name:"LaravelCmsAdminTemplateSectionAddForm",components:{},emits:["add"],setup(n,{emit:e}){const t=p.ref({});async function r(){!this.valid||(e("add",t.value),t.value={})}const i=p.computed(()=>t.value.name!=null&&t.value.identifier!=null);return{newTemplateSection:t,onSubmit:r,valid:i}}},DO=p.createElementVNode("legend",null,"Add Section",-1),RO={class:"form-group form-inline mx-2"},IO=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),PO={class:"form-group form-inline mx-2"},BO=p.createElementVNode("label",{class:"form-label",for:"identifier"},"Identifier",-1),LO=["disabled"];function VO(n,e,t,r,i,o){return p.openBlock(),p.createElementBlock("form",{onSubmit:e[2]||(e[2]=p.withModifiers((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"]))},[p.createElementVNode("fieldset",null,[DO,p.createElementVNode("div",RO,[IO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>r.newTemplateSection.name=a),required:""},null,512),[[p.vModelText,r.newTemplateSection.name]])]),p.createElementVNode("div",PO,[BO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"identifier",id:"identifier","onUpdate:modelValue":e[1]||(e[1]=a=>r.newTemplateSection.identifier=a)},null,512),[[p.vModelText,r.newTemplateSection.identifier]])]),p.createElementVNode("button",{class:"btn btn-link mx-2",disabled:!r.valid}," Add Template Section ",8,LO)])],32)}const $O={name:"LaravelCmsAdminTemplateSections",components:{AddForm:ye(AO,[["render",VO]]),ListItem:MO},props:["templateId"],setup(n){const e=p.ref([]),t=p.ref(!1);async function r(){let u="/api/cms-template-sections?"+new URLSearchParams({"q[]":["cms_template_id[eq]="+n.templateId]}).toString();const h=await(await fetch(u)).json();e.value=h.data,t.value=!0}async function i(u){if(!(await fetch("/api/cms-template-sections/"+u,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"DELETE"})).ok){ue({title:json.message,type:"error"});return}ue({title:"Template section deleted.",type:"warn"});var h=e.value.map(m=>m.id).indexOf(u);~h&&e.value.splice(h,1)}async function o(u){const d=await fetch("/api/cms-template-sections/"+u.id,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"PUT",body:JSON.stringify(u)}),h=await d.json();if(!d.ok){ue({title:h.message,type:"error"});return}ue({title:"Template section updated.",type:"success"});var m=e.value.map(y=>y.id).indexOf(u.id);~m&&e.value.splice(m,1,u)}async function a(u){u.cms_template_id=n.templateId;const d=await fetch("/api/cms-template-sections",{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"POST",body:JSON.stringify(u)}),h=await d.json();if(!d.ok){ue({title:h.message,type:"error"});return}e.value.push(h.data),ue({title:"New template section created.",type:"success"})}return r(),{sectionsSorted:p.computed(()=>_t.exports.sortBy(e.value||[],u=>u.name)),loaded:t,onDelete:i,onSave:o,onAdd:a}}},FO={key:0},zO=p.createElementVNode("div",{class:"divider"},null,-1),HO={key:0},WO={key:1},UO={key:2};function jO(n,e,t,r,i,o){const a=p.resolveComponent("add-form"),c=p.resolveComponent("list-item");return r.sectionsSorted?(p.openBlock(),p.createElementBlock("fieldset",FO,[p.createVNode(a,{onAdd:r.onAdd},null,8,["onAdd"]),zO,r.loaded&&r.sectionsSorted.length?(p.openBlock(),p.createElementBlock("div",HO,[(p.openBlock(!0),p.createElementBlock(p.Fragment,null,p.renderList(r.sectionsSorted,u=>(p.openBlock(),p.createBlock(c,{key:u.id,section:u,onDelete:r.onDelete,onSave:r.onSave},null,8,["section","onDelete","onSave"]))),128))])):r.loaded?(p.openBlock(),p.createElementBlock("p",WO,"There are no templates sections.")):(p.openBlock(),p.createElementBlock("p",UO,"Loading..."))])):p.createCommentVNode("",!0)}const KO={name:"LaravelCmsAdminTemplate",components:{TemplateSections:ye($O,[["render",jO]])},props:["id"],setup(n){const e=p.ref(null),t=p.ref(null);async function r(){const c=await(await fetch("/api/cms-templates/"+n.id)).json();e.value=c.data,t.value=Object.assign({},e.value)}async function i(){const a=await fetch("/api/cms-templates/"+n.id,{headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":$cookies.get("XSRF-TOKEN")},method:"PUT",body:JSON.stringify(e.value)}),c=await a.json();if(!a.ok){ue({title:c.message,type:"error"});return}e.value=c.data,t.value=Object.assign({},e.value),ue({title:"Template updated.",type:"success"})}r();const o=p.computed(()=>JSON.stringify(t.value)!=JSON.stringify(e.value));return{template:e,onSubmit:i,saveEnabled:o}}},qO=p.createElementVNode("h2",null,"Edit Template",-1),JO={key:0},GO={class:"form-group form-inline mx-2"},XO=p.createElementVNode("label",{class:"form-label",for:"name"},"Name",-1),YO={class:"form-group form-inline mx-2"},ZO=p.createElementVNode("label",{class:"form-label",for:"identifier"},"Identifier",-1),QO={class:"form-group form-inline mx-2"},eN=p.createElementVNode("label",{class:"form-label",for:"description"},"Description",-1),tN=["disabled"],nN=p.createElementVNode("h2",null,"Template Sections",-1);function rN(n,e,t,r,i,o){const a=p.resolveComponent("router-link"),c=p.resolveComponent("template-sections");return p.openBlock(),p.createElementBlock(p.Fragment,null,[p.createElementVNode("p",null,[p.createVNode(a,{to:"/templates"},{default:p.withCtx(()=>[p.createTextVNode("< Back")]),_:1})]),qO,p.createElementVNode("form",{onSubmit:e[3]||(e[3]=p.withModifiers((...u)=>r.onSubmit&&r.onSubmit(...u),["prevent"]))},[r.template?(p.openBlock(),p.createElementBlock("fieldset",JO,[p.createElementVNode("div",GO,[XO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=u=>r.template.name=u)},null,512),[[p.vModelText,r.template.name]])]),p.createElementVNode("div",YO,[ZO,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"identifier",id:"identifier","onUpdate:modelValue":e[1]||(e[1]=u=>r.template.identifier=u)},null,512),[[p.vModelText,r.template.identifier]])]),p.createElementVNode("div",QO,[eN,p.withDirectives(p.createElementVNode("input",{class:"form-input",type:"text",name:"description",id:"description","onUpdate:modelValue":e[2]||(e[2]=u=>r.template.description=u)},null,512),[[p.vModelText,r.template.description]])]),p.createElementVNode("button",{class:"btn btn-link mx-2",disabled:!r.saveEnabled}," Update ",8,tN)])):p.createCommentVNode("",!0)],32),nN,p.createElementVNode("form",null,[p.createVNode(c,{"template-id":t.id},null,8,["template-id"])])],64)}const iN=[{path:"/",name:"Home",component:_f},{path:"/components",name:"Components",component:zb},{path:"/pages",name:"Pages",component:_f},{path:"/pages/:id",name:"Page",component:JT,props:n=>({id:parseInt(n.params.id)})},{path:"/paths",name:"Paths",component:iO},{path:"/media",name:"Media",component:i1},{path:"/templates",name:"Templates",component:kO},{path:"/templates/:id",name:"Template",component:ye(KO,[["render",rN]]),props:n=>({id:parseInt(n.params.id)})}],oN=tb({history:t0(),routes:iN});var Jh={exports:{}};(function(n,e){(function(){var t={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax"},r={install:function(i,o){o&&this.config(o.expires,o.path,o.domain,o.secure,o.sameSite),i.prototype&&(i.prototype.$cookies=this),i.config&&i.config.globalProperties&&(i.config.globalProperties.$cookies=this,i.provide("$cookies",this)),i.$cookies=this},config:function(i,o,a,c,u){t.expires=i||"1d",t.path=o?"; path="+o:"; path=/",t.domain=a?"; domain="+a:"",t.secure=c?"; Secure":"",t.sameSite=u?"; SameSite="+u:"; SameSite=Lax"},get:function(i){var o=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(i).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(o&&(o.substring(0,1)==="{"&&o.substring(o.length-1,o.length)==="}"||o.substring(0,1)==="["&&o.substring(o.length-1,o.length)==="]"))try{o=JSON.parse(o)}catch{return o}return o},set:function(i,o,a,c,u,d,h){if(i){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(i))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+i)}else throw new Error("Cookie name is not found in the first argument.");o&&typeof o=="object"&&(o=JSON.stringify(o));var m="";if(a=a==null?t.expires:a,a&&a!=0)switch(a.constructor){case Number:a===1/0||a===-1?m="; expires=Fri, 31 Dec 9999 23:59:59 GMT":m="; max-age="+a;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(a)){var y=a.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(a.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":m="; max-age="+ +y*2592e3;break;case"d":m="; max-age="+ +y*86400;break;case"h":m="; max-age="+ +y*3600;break;case"min":m="; max-age="+ +y*60;break;case"s":m="; max-age="+y;break;case"y":m="; max-age="+ +y*31104e3;break}}else m="; expires="+a;break;case Date:m="; expires="+a.toUTCString();break}return document.cookie=encodeURIComponent(i)+"="+encodeURIComponent(o)+m+(u?"; domain="+u:t.domain)+(c?"; path="+c:t.path)+(d==null?t.secure:d?"; Secure":"")+(h==null?t.sameSite:h?"; SameSite="+h:""),this},remove:function(i,o,a){return!i||!this.isKey(i)?!1:(document.cookie=encodeURIComponent(i)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:t.domain)+(o?"; path="+o:t.path)+"; SameSite=Lax",!0)},isKey:function(i){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(i).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var i=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),o=0;o<i.length;o++)i[o]=decodeURIComponent(i[o]);return i}};n.exports=r,typeof window<"u"&&(window.$cookies=r)})()})(Jh);const sN=Jh.exports,tL="";return p.createApp(Ny).use(oN).use(Eb).use(sN)});
